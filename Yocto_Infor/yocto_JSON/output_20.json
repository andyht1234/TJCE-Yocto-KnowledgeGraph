[
    "* [yocto-autobuilder-helper][PATCH] config.json: add a workaround for the \"autobuilderlog.json\" error\n@ 2023-10-18 22:28 Yoann Congal\n  2023-10-18 23:22 ` [yocto] \" Jose Quaresma\n  0 siblings, 1 reply; 3+ messages in thread\nFrom: Yoann Congal @ 2023-10-18 22:28 UTC (permalink / raw)\n  To: yocto; +Cc: Yoann Congal\n\nFor the reproducible-meta-oe builder, workaround the bug #15241 [1], by\npassing BB_LOGCONFIG through \"readlink -f\" to avoid relative reference\nto the main build dir.\n\nAlso, switch from BBPATH to BUILDDIR to reference the main build dir.\n\n[1]: https://bugzilla.yoctoproject.org/show_bug.cgi?id=15241\n\nSigned-off-by: Yoann Congal <yoann.congal@smile.fr>\n---\n config.json | 20 ++++++++++----------\n 1 file changed, 10 insertions(+), 10 deletions(-)\n\ndiff --git a/config.json b/config.json\nindex c01a453..84da67b 100644\n--- a/config.json\n+++ b/config.json\n@@ -303,7 +303,7 @@\n             ],\n             \"step1\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-filesystems\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-filesystems/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-filesystems -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-filesystems/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-filesystems -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-python\",\n@@ -323,7 +323,7 @@\n             },\n             \"step2\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-gnome\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-gnome/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-gnome -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-gnome/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-gnome -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-python\",\n@@ -343,14 +343,14 @@\n             },\n             \"step3\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-initramfs\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-initramfs/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-initramfs -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-initramfs/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-initramfs -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-initramfs\"\n                 ]\n             },\n             \"step4\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-multimedia\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-multimedia/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-multimedia -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-multimedia/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-multimedia -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-python\",\n@@ -367,7 +367,7 @@\n             },\n             \"step5\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-networking\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-networking/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-networking -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-networking/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-networking -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-networking\"\n@@ -382,7 +382,7 @@\n             },\n             \"step6\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-oe\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-oe/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-oe -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-oe/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-oe -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\"\n                 ],\n@@ -393,7 +393,7 @@\n             },\n             \"step7\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-perl\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-perl/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-perl -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-perl/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-perl -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-perl\"\n@@ -408,7 +408,7 @@\n             },\n             \"step8\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-python\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-python/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-python -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-python/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-python -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-python\"\n@@ -419,7 +419,7 @@\n             },\n             \"step9\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-webserver\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-webserver/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-webserver -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-webserver/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-webserver -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-webserver\"\n@@ -433,7 +433,7 @@\n             },\n             \"step10\" : {\n                 \"shortname\" : \"Repro meta-oe/meta-xfce\",\n-                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-xfce/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-xfce -r reproducible\"],\n+                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-xfce/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-xfce -r reproducible\"],\n                 \"ADDLAYER\" : [\n                     \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n                     \"${BUILDDIR}/../meta-openembedded/meta-python\",\n-- \n2.30.2\n\n\n\n^ permalink raw reply related\t[flat|nested] 3+ messages in thread",
    "* Re: [yocto] [yocto-autobuilder-helper][PATCH] config.json: add a workaround for the \"autobuilderlog.json\" error\n  2023-10-18 22:28 [yocto-autobuilder-helper][PATCH] config.json: add a workaround for the \"autobuilderlog.json\" error Yoann Congal\n@ 2023-10-18 23:22 ` Jose Quaresma\n  2023-10-19  8:34   ` Yoann CONGAL\n  0 siblings, 1 reply; 3+ messages in thread\nFrom: Jose Quaresma @ 2023-10-18 23:22 UTC (permalink / raw)\n  To: Yoann Congal; +Cc: yocto\n\n[-- Attachment #1: Type: text/plain, Size: 9758 bytes --]\n\nHi Yoann,\n\nI have found the same for BBLAYERS that was fixed [1] expanding any\nrelative path that could exist.\nMaybe it would be better to also expand BB_LOGCONFIG when\nthe newbuilddir argument is present.\n\n[1]\nhttps://git.yoctoproject.org/poky/commit/id=f5f465ff5777eb99941db3dda84e65d4699d97f7\n\nJose\n\nYoann Congal <yoann.congal@smile.fr> escreveu no dia quarta, 18/10/2023\nà(s) 23:28:\n\n> For the reproducible-meta-oe builder, workaround the bug #15241 [1], by\n> passing BB_LOGCONFIG through \"readlink -f\" to avoid relative reference\n> to the main build dir.\n>\n> Also, switch from BBPATH to BUILDDIR to reference the main build dir.\n>\n> [1]: https://bugzilla.yoctoproject.org/show_bug.cgi?id=15241\n>\n> Signed-off-by: Yoann Congal <yoann.congal@smile.fr>\n> ---\n>  config.json | 20 ++++++++++----------\n>  1 file changed, 10 insertions(+), 10 deletions(-)\n>\n> diff --git a/config.json b/config.json\n> index c01a453..84da67b 100644\n> --- a/config.json\n> +++ b/config.json\n> @@ -303,7 +303,7 @@\n>              ],\n>              \"step1\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-filesystems\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-filesystems/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-filesystems -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-filesystems/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-filesystems -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n> @@ -323,7 +323,7 @@\n>              },\n>              \"step2\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-gnome\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-gnome/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-gnome -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-gnome/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-gnome -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n> @@ -343,14 +343,14 @@\n>              },\n>              \"step3\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-initramfs\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-initramfs/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-initramfs -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-initramfs/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-initramfs -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-initramfs\"\n>                  ]\n>              },\n>              \"step4\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-multimedia\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-multimedia/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-multimedia -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-multimedia/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-multimedia -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n> @@ -367,7 +367,7 @@\n>              },\n>              \"step5\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-networking\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-networking/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-networking -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-networking/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-networking -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-networking\"\n> @@ -382,7 +382,7 @@\n>              },\n>              \"step6\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-oe\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-oe/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-oe -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-oe/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-oe -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\"\n>                  ],\n> @@ -393,7 +393,7 @@\n>              },\n>              \"step7\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-perl\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-perl/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-perl -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-perl/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-perl -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-perl\"\n> @@ -408,7 +408,7 @@\n>              },\n>              \"step8\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-python\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-python/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-python -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-python/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-python -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-python\"\n> @@ -419,7 +419,7 @@\n>              },\n>              \"step9\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-webserver\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-webserver/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-webserver -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-webserver/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-webserver -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-webserver\"\n> @@ -433,7 +433,7 @@\n>              },\n>              \"step10\" : {\n>                  \"shortname\" : \"Repro meta-oe/meta-xfce\",\n> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-xfce/\n> DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-xfce -r\n> reproducible\"],\n> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc;\n> OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-xfce/\n> DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest\n> --newbuilddir $BUILDDIR/build-st-meta-xfce -r reproducible\"],\n>                  \"ADDLAYER\" : [\n>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n> --\n> 2.30.2\n>\n>\n> -=-=-=-=-=-=-=-=-=-=-=-\n> Links: You receive all messages sent to this group.\n> View/Reply Online (#61405):\n> https://lists.yoctoproject.org/g/yocto/message/61405\n> Mute This Topic: https://lists.yoctoproject.org/mt/102049703/5052612\n> Group Owner: yocto+owner@lists.yoctoproject.org\n> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [\n> quaresma.jose@gmail.com]\n> -=-=-=-=-=-=-=-=-=-=-=-\n>\n>\n\n-- \nBest regards,\n\nJosé Quaresma\n\n[-- Attachment #2: Type: text/html, Size: 12639 bytes --]\n\n^ permalink raw reply\t[flat|nested] 3+ messages in thread",
    "* Re: [yocto] [yocto-autobuilder-helper][PATCH] config.json: add a workaround for the \"autobuilderlog.json\" error\n  2023-10-18 23:22 ` [yocto] \" Jose Quaresma\n@ 2023-10-19  8:34   ` Yoann CONGAL\n  0 siblings, 0 replies; 3+ messages in thread\nFrom: Yoann CONGAL @ 2023-10-19  8:34 UTC (permalink / raw)\n  To: Jose Quaresma; +Cc: yocto\n\nLe jeu. 19 oct. 2023 à 01:22, Jose Quaresma <quaresma.jose@gmail.com> a écrit :\n> Hi Yoann,\n\nHi!\n\n> I have found the same for BBLAYERS that was fixed [1] expanding any relative path that could exist.\n> Maybe it would be better to also expand BB_LOGCONFIG when the newbuilddir argument is present.\n>\n> [1] https://git.yoctoproject.org/poky/commit/id=f5f465ff5777eb99941db3dda84e65d4699d97f7\n\nOOOooohh That is interesting, Thanks!\n\nFor reference, I've had to fix the URL:\nhttps://git.yoctoproject.org/poky/commit/?id=f5f465ff5777eb99941db3dda84e65d4699d97f7\n\nAnd thank you for updating the bug :)\n\n> Jose\n>\n> Yoann Congal <yoann.congal@smile.fr> escreveu no dia quarta, 18/10/2023 à(s) 23:28:\n>>\n>> For the reproducible-meta-oe builder, workaround the bug #15241 [1], by\n>> passing BB_LOGCONFIG through \"readlink -f\" to avoid relative reference\n>> to the main build dir.\n>>\n>> Also, switch from BBPATH to BUILDDIR to reference the main build dir.\n>>\n>> [1]: https://bugzilla.yoctoproject.org/show_bug.cgi?id=15241\n>>\n>> Signed-off-by: Yoann Congal <yoann.congal@smile.fr>\n>> ---\n>>  config.json | 20 ++++++++++----------\n>>  1 file changed, 10 insertions(+), 10 deletions(-)\n>>\n>> diff --git a/config.json b/config.json\n>> index c01a453..84da67b 100644\n>> --- a/config.json\n>> +++ b/config.json\n>> @@ -303,7 +303,7 @@\n>>              ],\n>>              \"step1\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-filesystems\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-filesystems/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-filesystems -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-filesystems/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-filesystems -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n>> @@ -323,7 +323,7 @@\n>>              },\n>>              \"step2\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-gnome\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-gnome/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-gnome -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-gnome/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-gnome -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n>> @@ -343,14 +343,14 @@\n>>              },\n>>              \"step3\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-initramfs\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-initramfs/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-initramfs -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-initramfs/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-initramfs -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-initramfs\"\n>>                  ]\n>>              },\n>>              \"step4\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-multimedia\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-multimedia/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-multimedia -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-multimedia/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-multimedia -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n>> @@ -367,7 +367,7 @@\n>>              },\n>>              \"step5\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-networking\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-networking/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-networking -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-networking/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-networking -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-networking\"\n>> @@ -382,7 +382,7 @@\n>>              },\n>>              \"step6\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-oe\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-oe/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-oe -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-oe/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-oe -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\"\n>>                  ],\n>> @@ -393,7 +393,7 @@\n>>              },\n>>              \"step7\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-perl\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-perl/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-perl -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-perl/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-perl -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-perl\"\n>> @@ -408,7 +408,7 @@\n>>              },\n>>              \"step8\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-python\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-python/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-python -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-python/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-python -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-python\"\n>> @@ -419,7 +419,7 @@\n>>              },\n>>              \"step9\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-webserver\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-webserver/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-webserver -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-webserver/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-webserver -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-webserver\"\n>> @@ -433,7 +433,7 @@\n>>              },\n>>              \"step10\" : {\n>>                  \"shortname\" : \"Repro meta-oe/meta-xfce\",\n>> -                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-xfce/ DISPLAY=:1 oe-selftest --newbuilddir $BBPATH/build-st-meta-xfce -r reproducible\"],\n>> +                \"EXTRACMDS\" : [\"${SCRIPTSDIR}/checkvnc; OEQA_DEBUGGING_SAVED_OUTPUT=${BASE_SHAREDDIR}/pub/repro-fail-openembedded/meta-xfce/ DISPLAY=:1 BB_LOGCONFIG=$(readlink -f $BB_LOGCONFIG) oe-selftest --newbuilddir $BUILDDIR/build-st-meta-xfce -r reproducible\"],\n>>                  \"ADDLAYER\" : [\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-oe\",\n>>                      \"${BUILDDIR}/../meta-openembedded/meta-python\",\n>> --\n>> 2.30.2\n>>\n>>\n>> -=-=-=-=-=-=-=-=-=-=-=-\n>> Links: You receive all messages sent to this group.\n>> View/Reply Online (#61405): https://lists.yoctoproject.org/g/yocto/message/61405\n>> Mute This Topic: https://lists.yoctoproject.org/mt/102049703/5052612\n>> Group Owner: yocto+owner@lists.yoctoproject.org\n>> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [quaresma.jose@gmail.com]\n>> -=-=-=-=-=-=-=-=-=-=-=-\n>>\n>\n>\n> --\n> Best regards,\n>\n> José Quaresma\n\n\n\n-- \nYoann Congal\nSmile ECS - Tech expert\n\n\n^ permalink raw reply\t[flat|nested] 3+ messages in thread",
    "end of thread, other threads:[~2023-10-19  8:34 UTC | newest]\n\nThread overview: 3+ messages (download: mbox.gz / follow: Atom feed)\n-- links below jump to the message on this page --\n2023-10-18 22:28 [yocto-autobuilder-helper][PATCH] config.json: add a workaround for the \"autobuilderlog.json\" error Yoann Congal\n2023-10-18 23:22 ` [yocto] \" Jose Quaresma\n2023-10-19  8:34   ` Yoann CONGAL\n"
]