[
    "* Trouble making a recipe for the IOBB library\n@ 2023-10-17 15:34 Iurascu Teodor\n  2023-10-21  8:30 ` [yocto] \" Adrian Freihofer\n  0 siblings, 1 reply; 2+ messages in thread\nFrom: Iurascu Teodor @ 2023-10-17 15:34 UTC (permalink / raw)\n  To: yocto\n\n\n[-- Attachment #1.1: Type: text/plain, Size: 4304 bytes --]\n\nHello!\nI am new to the Yocto Project and I have been trying to make a recipe to include the IOBB library in my SDK for the BeagleBone Black board. I have used devtool to create a recipe based on a fork of the library.\n\nLibrary makefile:\n\nLIB_PATH = ./BBBio_lib/\nDEMO_PATH = ./Demo/\nTOOLKIT_PATH = ./Toolkit/\nLAB_PATH = ./Lab/\n\nLIBRARIES = iobb\n\nall\n: libiobb.a LED ADT7301 SEVEN_SCAN SMOTOR LED_GPIO DEBOUNCING 4x4keypad\nADC ADC_VOICE GPIO_STATUS EP_STATUS ADC_CALC lcd3-test test-outputs \npb-test-outputs test-inputs pb-test-inputs\n\nlibiobb.a : ${LIB_PATH}BBBiolib.c ${LIB_PATH}BBBiolib.h BBBiolib_PWMSS.o BBBiolib_McSPI.o BBBiolib_ADCTSC.o i2cfunc.o\n    gcc -c ${LIB_PATH}BBBiolib.c -o ${LIB_PATH}BBBiolib.o\n  \n ar -rs ${LIB_PATH}libiobb.a ${LIB_PATH}BBBiolib.o \n${LIB_PATH}BBBiolib_PWMSS.o ${LIB_PATH}BBBiolib_McSPI.o \n${LIB_PATH}BBBiolib_ADCTSC.o ${LIB_PATH}i2cfunc.o\n    cp ${LIB_PATH}libiobb.a ./\n    cp ${LIB_PATH}BBBiolib.h ./iobb.h\n    cp ${LIB_PATH}BBBiolib_ADCTSC.h ./\n    cp ${LIB_PATH}BBBiolib_McSPI.h ./\n    cp ${LIB_PATH}BBBiolib_PWMSS.h ./\n    cp ${LIB_PATH}i2cfunc.h ./\n\nBBBiolib_PWMSS.o : ${LIB_PATH}BBBiolib_PWMSS.c ${LIB_PATH}BBBiolib_PWMSS.h\n    gcc -c ${LIB_PATH}BBBiolib_PWMSS.c -o ${LIB_PATH}BBBiolib_PWMSS.o -W \n\nBBBiolib_McSPI.o : ${LIB_PATH}BBBiolib_McSPI.c ${LIB_PATH}BBBiolib_PWMSS.h\n    gcc -c ${LIB_PATH}BBBiolib_McSPI.c -o ${LIB_PATH}BBBiolib_McSPI.o -W\n\nBBBiolib_ADCTSC.o : ${LIB_PATH}BBBiolib_ADCTSC.c ${LIB_PATH}BBBiolib_ADCTSC.h\n    gcc -c ${LIB_PATH}BBBiolib_ADCTSC.c -o ${LIB_PATH}BBBiolib_ADCTSC.o -W\n\ni2cfunc.o : ${LIB_PATH}i2cfunc.c ${LIB_PATH}i2cfunc.h\n    gcc -c ${LIB_PATH}i2cfunc.c -o ${LIB_PATH}i2cfunc.o\n\ninstall :  \nifndef locatie\n    $(info locatie is [${locatie}])\n    rm -f /usr/local/include/BBBiolib.h\n    cp ${LIB_PATH}libiobb.a /usr/local/lib\n    cp ${LIB_PATH}BBBiolib.h /usr/local/include/iobb.h\n    cp ${LIB_PATH}BBBiolib_ADCTSC.h /usr/local/include\n    cp ${LIB_PATH}BBBiolib_McSPI.h /usr/local/include\n    cp ${LIB_PATH}BBBiolib_PWMSS.h /usr/local/include\n    cp ${LIB_PATH}i2cfunc.h /usr/local/include\n    ln -s /usr/local/include/iobb.h /usr/local/include/BBBiolib.h\nelse\n    $(info locatie is [${locatie}])\n    rm -f $(locatie)/usr/local/include/BBBiolib.h\n    mkdir -p $(locatie)/usr/local/lib\n    mkdir -p $(locatie)/usr/local/include\n    cp ${LIB_PATH}libiobb.a $(locatie)/usr/local/lib\n    cp ${LIB_PATH}BBBiolib.h $(locatie)/usr/local/include/iobb.h\n    cp ${LIB_PATH}BBBiolib_ADCTSC.h $(locatie)/usr/local/include\n    cp ${LIB_PATH}BBBiolib_McSPI.h $(locatie)/usr/local/include\n    cp ${LIB_PATH}BBBiolib_PWMSS.h $(locatie)/usr/local/include\n    cp ${LIB_PATH}i2cfunc.h $(locatie)/usr/local/include\n    cp $(locatie)/usr/local/include/iobb.h $(locatie)/usr/local/include/BBBiolib.h\nendif\n\nrecipe file:\nLICENSE = \"Unknown\"\nLIC_FILES_CHKSUM = \"file://LICENSE;md5=7db6c9cd5c53a0a05ffa2f383b2408dc\"\n\nSRC_URI = \"git://github.com/TeoThatsMe/iobb;protocol=https;branch=master\"\n\n# Modify these as desired\nPV = \"1.0+git${SRCPV}\"\nSRCREV = \"1a7bdf1767f730b0d6058117e42c4ec77047b4ab\"\n\nS = \"${WORKDIR}/git\"\nFILES:${PN} += \"${base_libdir}\"\n\n# NOTE: the following library dependencies are unknown, ignoring: iobb fftw3\n#       (this is based on recipes that have previously been built and packaged)\n\n# NOTE: this is a Makefile-only piece of software, so we cannot generate much of the\n# recipe automatically - you will need to examine the Makefile yourself and ensure\n# that the appropriate arguments are passed in.\n\ndo_configure () {\n\t# Specify any needed configure commands here\n\t:\n}\n\ndo_compile () {\n\t# You will almost certainly need to add additional arguments here\n\toe_runmake\n}\n\ndo_install () {\n\t# This is a guess; additional arguments may be required\n\toe_runmake install locatie=${D}\n}\n\nI have modified the makefile with the locatie variable so that the install script installs it in the ${D} directory and not on my machine.\nEven though I am setting\nFILES:${PN} += \"${base_libdir}\" I am still getting this error.\n\nDo I have to set the FILES variable to something esle or am I doing something wrong before the packaging phase?\nThank you!\n\n[-- Attachment #1.2: Type: text/html, Size: 4865 bytes --]\n\n[-- Attachment #2: dummyfile.0.part --]\n[-- Type: image/png, Size: 29952 bytes --]\n\n^ permalink raw reply\t[flat|nested] 2+ messages in thread",
    "* Re: [yocto] Trouble making a recipe for the IOBB library\n  2023-10-17 15:34 Trouble making a recipe for the IOBB library Iurascu Teodor\n@ 2023-10-21  8:30 ` Adrian Freihofer\n  0 siblings, 0 replies; 2+ messages in thread\nFrom: Adrian Freihofer @ 2023-10-21  8:30 UTC (permalink / raw)\n  To: Iurascu Teodor; +Cc: Yocto-mailing-list\n\n\n[-- Attachment #1.1: Type: text/plain, Size: 5775 bytes --]\n\nThe best would probably be to improve the Makefile to install the files to\nstandard paths such as /usr instead of /usr/local. /usr/local is usually\nused for not packaged files and therefore not handled by the default FILES\npackage splitting rules of Yocto.\n\nIdeally there would be a PREFIX variable in the Makefile which defaults to\n/usr/local and gets over written by bitbake to /usr. Then also the FILES\nline should no longer be needed.\n\nAnother approach would be to replace the Makefile by e.g. meson or cmake\nwhich both do all these details right by default.\n\nAs a workaround extending the FILES line would work as well. But using\nlocations like lib or usr in FILES is not a good idea. It probably adds too\nmany files like debug stuff to the package.\n\nTo see the variables for you recipe you might want to use bitbake -e. To\nsee how bitbake spits the packages you might look into the\npackages-splitted folder in the $WORKDIR of your recipe.\n\nRegards\nAdrian\n\n\nIurascu Teodor <iurascu_teo@hotmail.com> schrieb am Sa., 21. Okt. 2023,\n09:05:\n\n> Hello!\n> I am new to the Yocto Project and I have been trying to make a recipe to\n> include the IOBB library in my SDK for the BeagleBone Black board. I have\n> used devtool to create a recipe based on a fork of the library.\n>\n>\n> Library makefile:\n>\n>\n> LIB_PATH = ./BBBio_lib/\n> DEMO_PATH = ./Demo/\n> TOOLKIT_PATH = ./Toolkit/\n> LAB_PATH = ./Lab/\n>\n>\n> LIBRARIES = iobb\n>\n> all\n>  : libiobb.a LED ADT7301 SEVEN_SCAN SMOTOR LED_GPIO DEBOUNCING 4x4keypad\n>  ADC ADC_VOICE GPIO_STATUS EP_STATUS ADC_CALC lcd3-test test-outputs\n> pb-test-outputs test-inputs pb-test-inputs\n>\n> libiobb.a : ${LIB_PATH}BBBiolib.c ${LIB_PATH}BBBiolib.h BBBiolib_PWMSS.o BBBiolib_McSPI.o BBBiolib_ADCTSC.o i2cfunc.o\n>     gcc -c ${LIB_PATH}BBBiolib.c -o ${LIB_PATH}BBBiolib.o\n>\n>   ar -rs ${LIB_PATH}libiobb.a ${LIB_PATH}BBBiolib.o\n> ${LIB_PATH}BBBiolib_PWMSS.o ${LIB_PATH}BBBiolib_McSPI.o\n> ${LIB_PATH}BBBiolib_ADCTSC.o ${LIB_PATH}i2cfunc.o\n>     cp ${LIB_PATH}libiobb.a ./\n>     cp ${LIB_PATH}BBBiolib.h ./iobb.h\n>     cp ${LIB_PATH}BBBiolib_ADCTSC.h ./\n>     cp ${LIB_PATH}BBBiolib_McSPI.h ./\n>     cp ${LIB_PATH}BBBiolib_PWMSS.h ./\n>     cp ${LIB_PATH}i2cfunc.h ./\n>\n> BBBiolib_PWMSS.o : ${LIB_PATH}BBBiolib_PWMSS.c ${LIB_PATH}BBBiolib_PWMSS.h\n>     gcc -c ${LIB_PATH}BBBiolib_PWMSS.c -o ${LIB_PATH}BBBiolib_PWMSS.o -W\n>\n> BBBiolib_McSPI.o : ${LIB_PATH}BBBiolib_McSPI.c ${LIB_PATH}BBBiolib_PWMSS.h\n>     gcc -c ${LIB_PATH}BBBiolib_McSPI.c -o ${LIB_PATH}BBBiolib_McSPI.o -W\n>\n> BBBiolib_ADCTSC.o : ${LIB_PATH}BBBiolib_ADCTSC.c ${LIB_PATH}BBBiolib_ADCTSC.h\n>     gcc -c ${LIB_PATH}BBBiolib_ADCTSC.c -o ${LIB_PATH}BBBiolib_ADCTSC.o -W\n>\n> i2cfunc.o : ${LIB_PATH}i2cfunc.c ${LIB_PATH}i2cfunc.h\n>     gcc -c ${LIB_PATH}i2cfunc.c -o ${LIB_PATH}i2cfunc.o\n>\n> install :\n> ifndef locatie\n>     $(info locatie is [${locatie}])\n>     rm -f /usr/local/include/BBBiolib.h\n>     cp ${LIB_PATH}libiobb.a /usr/local/lib\n>     cp ${LIB_PATH}BBBiolib.h /usr/local/include/iobb.h\n>     cp ${LIB_PATH}BBBiolib_ADCTSC.h /usr/local/include\n>     cp ${LIB_PATH}BBBiolib_McSPI.h /usr/local/include\n>     cp ${LIB_PATH}BBBiolib_PWMSS.h /usr/local/include\n>     cp ${LIB_PATH}i2cfunc.h /usr/local/include\n>     ln -s /usr/local/include/iobb.h /usr/local/include/BBBiolib.h\n> else\n>     $(info locatie is [${locatie}])\n>     rm -f $(locatie)/usr/local/include/BBBiolib.h\n>     mkdir -p $(locatie)/usr/local/lib\n>     mkdir -p $(locatie)/usr/local/include\n>     cp ${LIB_PATH}libiobb.a $(locatie)/usr/local/lib\n>     cp ${LIB_PATH}BBBiolib.h $(locatie)/usr/local/include/iobb.h\n>     cp ${LIB_PATH}BBBiolib_ADCTSC.h $(locatie)/usr/local/include\n>     cp ${LIB_PATH}BBBiolib_McSPI.h $(locatie)/usr/local/include\n>     cp ${LIB_PATH}BBBiolib_PWMSS.h $(locatie)/usr/local/include\n>     cp ${LIB_PATH}i2cfunc.h $(locatie)/usr/local/include\n>     cp $(locatie)/usr/local/include/iobb.h $(locatie)/usr/local/include/BBBiolib.h\n> endif\n>\n>\n> recipe file:\n>\n> LICENSE = \"Unknown\"\n> LIC_FILES_CHKSUM = \"file://LICENSE;md5=7db6c9cd5c53a0a05ffa2f383b2408dc\"\n>\n> SRC_URI = \"git://github.com/TeoThatsMe/iobb;protocol=https;branch=master\"\n>\n> # Modify these as desired\n> PV = \"1.0+git${SRCPV}\"\n> SRCREV = \"1a7bdf1767f730b0d6058117e42c4ec77047b4ab\"\n>\n> S = \"${WORKDIR}/git\"\n> FILES:${PN} += \"${base_libdir}\"\n>\n> # NOTE: the following library dependencies are unknown, ignoring: iobb fftw3\n> #       (this is based on recipes that have previously been built and packaged)\n>\n> # NOTE: this is a Makefile-only piece of software, so we cannot generate much of the\n> # recipe automatically - you will need to examine the Makefile yourself and ensure\n> # that the appropriate arguments are passed in.\n>\n> do_configure () {\n> \t# Specify any needed configure commands here\n> \t:\n> }\n>\n> do_compile () {\n> \t# You will almost certainly need to add additional arguments here\n> \toe_runmake\n> }\n>\n> do_install () {\n> \t# This is a guess; additional arguments may be required\n> \toe_runmake install locatie=${D}\n> }\n>\n>\n> I have modified the makefile with the locatie variable so that the install\n> script installs it in the ${D} directory and not on my machine.\n> Even though I am setting\n>\n> FILES:${PN} += \"${base_libdir}\"\n>\n> I am still getting this error.\n>\n>\n>\n>\n> Do I have to set the FILES variable to something esle or am I doing\n> something wrong before the packaging phase?\n> Thank you!\n>\n>\n> -=-=-=-=-=-=-=-=-=-=-=-\n> Links: You receive all messages sent to this group.\n> View/Reply Online (#61442):\n> https://lists.yoctoproject.org/g/yocto/message/61442\n> Mute This Topic: https://lists.yoctoproject.org/mt/102097263/4454582\n> Group Owner: yocto+owner@lists.yoctoproject.org\n> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [\n> adrian.freihofer@gmail.com]\n> -=-=-=-=-=-=-=-=-=-=-=-\n>\n>\n\n[-- Attachment #1.2: Type: text/html, Size: 7367 bytes --]\n\n[-- Attachment #2: dummyfile.0.part --]\n[-- Type: image/png, Size: 29952 bytes --]\n\n^ permalink raw reply\t[flat|nested] 2+ messages in thread",
    "end of thread, other threads:[~2023-10-21  8:30 UTC | newest]\n\nThread overview: 2+ messages (download: mbox.gz / follow: Atom feed)\n-- links below jump to the message on this page --\n2023-10-17 15:34 Trouble making a recipe for the IOBB library Iurascu Teodor\n2023-10-21  8:30 ` [yocto] \" Adrian Freihofer\n"
]