* [kirkstone] `rustc` executable missing from sdk
       [not found] <mail.63fcde23.64c0.25550c0e0edee261@storage.wm.amazon.com>
@ 2023-02-27 16:45 ` danny
  2023-04-20 19:23   ` [yocto] " Randy MacLeod
  0 siblings, 1 reply; 2+ messages in thread
From: danny @ 2023-02-27 16:45 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 1424 bytes --]

Hello all! I am working on integrating my application CI pipeline with the SDK generated by our yocto CI pipeline. So far, I have been able to build an SDK with cargo included by adding the following `TOOLCHAIN_HOST_TASK` assignment to our local.conf:

```

TOOLCHAIN_HOST_TASK:append = " nativesdk-cargo"

```

 
and building the SDK via 

```

bitbake -k -c populate_sdk <our image name>

```

 
However, when our application CI picks up the SDK, it looks like it is missing the underlying `rustc` executable; a `cargo build` command fails with:

 
```

error: could not execute process `rustc -vV` (never executed)

```

 
I've manually sourced the SDK environment in a shell and confirmed that `which` does pick up cargo but not `rustc`:

 
```

$ which cargo

/<SDK installation path>/.sdk/sysroots/x86_64-pokysdk-linux/usr/bin/cargo
$ which rustc

$ 

```

 
Has anyone been able to populate the SDK on kirkstone with a working rustc/cargo toolchain?

I've also tried comparing langdale and kirkstone; it looks like on langdale some work was done to add `nativesdk` support to the rust recipe itself (via BBCLASSEXTEND in rust-target.inc). I've been trying to mirror those changes via `.bbappend` files but haven't quite figured out what strings to pull. 

I'd be happy to provide any additional information that'd help triage.

 
 
Thanks!

- Danny


[-- Attachment #2: Type: text/html, Size: 5059 bytes --]

^ permalink raw reply	[flat|nested] 2+ messages in thread
* Re: [yocto] [kirkstone] `rustc` executable missing from sdk
  2023-02-27 16:45 ` [kirkstone] `rustc` executable missing from sdk danny
@ 2023-04-20 19:23   ` Randy MacLeod
  0 siblings, 0 replies; 2+ messages in thread
From: Randy MacLeod @ 2023-04-20 19:23 UTC (permalink / raw)
  To: yocto, danny; +Cc: Kokkonda, Sundeep

[-- Attachment #1: Type: text/plain, Size: 2248 bytes --]

On 2023-02-27 11:45, Danny Hadley via lists.yoctoproject.org wrote:
> [kirkstone] `rustc` executable missing from sdk
>
> Hello all! I am working on integrating my application CI pipeline with 
> the SDK generated by our yocto CI pipeline. So far, I have been able 
> to build an SDK with cargo included by adding the following 
> `TOOLCHAIN_HOST_TASK` assignment to our local.conf:
>
> ```
>
> TOOLCHAIN_HOST_TASK:append = " nativesdk-cargo"
>
> ```
>
> and building the SDK via
>
> ```
>
> bitbake -k -c populate_sdk <our image name>
>
> ```
>
> However, when our application CI picks up the SDK, it looks like it is 
> missing the underlying `rustc` executable; a `cargo build` command 
> fails with:
>
> ```
>
> error: could not execute process `rustc -vV` (never executed)
>
> ```
>
> I've manually sourced the SDK environment in a shell and confirmed 
> that `which` does pick up cargo but not `rustc`:
>
> ```
>
> $ which cargo
>
> /<SDK installation path>/.sdk/sysroots/x86_64-pokysdk-linux/usr/bin/cargo
> $ which rustc
>
> $
>
> ```
>
> Has anyone been able to populate the SDK on kirkstone with a working 
> rustc/cargo toolchain?
>
> I've also tried comparing langdale and kirkstone; it looks like on 
> langdale some work was done to add `nativesdk` support to the rust 
> recipe itself (via BBCLASSEXTEND in rust-target.inc). I've been trying 
> to mirror those changes via `.bbappend` files but haven't quite 
> figured out what strings to pull.
>
> I'd be happy to provide any additional information that'd help triage.
>
Hi Danny,

Sorry for the long delay in replying. Did you ever get this to work?

Sundeep is CCed and he can help a bit if not since I'm away next week.

../Randy

> Thanks!
>
> - Danny
>
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#59310):https://lists.yoctoproject.org/g/yocto/message/59310
> Mute This Topic:https://lists.yoctoproject.org/mt/97270242/3616765
> Group Owner:yocto+owner@lists.yoctoproject.org
> Unsubscribe:https://lists.yoctoproject.org/g/yocto/unsub  [randy.macleod@windriver.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>

-- 
# Randy MacLeod
# Wind River Linux

[-- Attachment #2: Type: text/html, Size: 7458 bytes --]

^ permalink raw reply	[flat|nested] 2+ messages in thread
end of thread, other threads:[~2023-04-20 19:24 UTC | newest]

Thread overview: 2+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
     [not found] <mail.63fcde23.64c0.25550c0e0edee261@storage.wm.amazon.com>
2023-02-27 16:45 ` [kirkstone] `rustc` executable missing from sdk danny
2023-04-20 19:23   ` [yocto] " Randy MacLeod

