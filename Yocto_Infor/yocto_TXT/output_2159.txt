* Building Yocto images for RPi CM4
@ 2022-02-22 22:35 Sourabh Hegde
  2022-02-22 22:46 ` [yocto] " Khem Raj
  0 siblings, 1 reply; 7+ messages in thread
From: Sourabh Hegde @ 2022-02-22 22:35 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 1659 bytes --]

Hello All,

I am building a basic image (core-image-base) for RPi CM4(Lite) on "Honister" release with "uboot" as bootloader.

In my conf/local.conf file MACHINE = "raspberrypi4-64" and also I have set

RPI_USE_U_BOOT = "1"
PREFERRED_PROVIDER_virtual/bootloader = "u-boot"

Image builds successfully and I transferred the image to SD card and tried to boot. I am using WKS_FILE = "sdimage-dual-raspberrypi.wks.in"

sdimage-dual-raspberrypi.wks.in :

part /boot --source bootimg-partition --ondisk mmcblk0 --fstype=vfat --label boot --active --align 4096 --size 100
part / --source rootfs --ondisk mmcblk0 --fstype=ext4 --label rootfs_A --align 4096
part / --source rootfs --ondisk mmcblk0 --fstype=ext4 --label rootfs_B --align 4096
part /home --source rootfs --rootfs-dir=${IMAGE_ROOTFS}/home --ondisk mmcblk0 --fstype=ext4 --label homefs --align 1024 --size 500 --fsoptions "x-systemd.growfs"

But unfortunately, i am not able to boot using this image and initially it starts with
.
.
Detecting USB Device.
.
.
Hit any key to stop auto-boot..
.
.
Starting kernel..

But right after this screen turns off and after a second screen turns on with "Loading progress bar" and as soon as it loads, a blank screen pops-up. I am not sure whether system is booted properly or not. I am not able to interact with it. And no Linux user space is accessible

Sadly, the custom carrier board I am using has no serial console, so I can only use a RPi display to see the progress and messages.

Can anyone please let me know what could be the issue here and how to resolve it?

Your help will be much appreciated.

thanks in advance..

[-- Attachment #2: Type: text/html, Size: 1808 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: [yocto] Building Yocto images for RPi CM4
  2022-02-22 22:35 Building Yocto images for RPi CM4 Sourabh Hegde
@ 2022-02-22 22:46 ` Khem Raj
  2022-02-23  7:07   ` Sourabh Hegde
  0 siblings, 1 reply; 7+ messages in thread
From: Khem Raj @ 2022-02-22 22:46 UTC (permalink / raw)
  To: Sourabh Hegde; +Cc: Yocto-mailing-list

it will be good to see serial console and what it prints there can
give more info. It might be easier to debug it that way.

On Tue, Feb 22, 2022 at 2:35 PM Sourabh Hegde <hrsourabh011@gmail.com> wrote:
>
> Hello All,
>
> I am building a basic image (core-image-base) for RPi CM4(Lite) on "Honister" release with "uboot" as bootloader.
>
> In my conf/local.conf file MACHINE = "raspberrypi4-64" and also I have set
>
> RPI_USE_U_BOOT = "1"
> PREFERRED_PROVIDER_virtual/bootloader = "u-boot"
>
> Image builds successfully and I transferred the image to SD card and tried to boot. I am using WKS_FILE = "sdimage-dual-raspberrypi.wks.in"
>
> sdimage-dual-raspberrypi.wks.in :
>
> part /boot --source bootimg-partition --ondisk mmcblk0 --fstype=vfat --label boot --active --align 4096 --size 100
> part / --source rootfs --ondisk mmcblk0 --fstype=ext4 --label rootfs_A --align 4096
> part / --source rootfs --ondisk mmcblk0 --fstype=ext4 --label rootfs_B --align 4096
> part /home --source rootfs --rootfs-dir=${IMAGE_ROOTFS}/home --ondisk mmcblk0 --fstype=ext4 --label homefs --align 1024 --size 500 --fsoptions "x-systemd.growfs"
>
> But unfortunately, i am not able to boot using this image and initially it starts with
> .
> .
> Detecting USB Device.
> .
> .
> Hit any key to stop auto-boot..
> .
> .
> Starting kernel..
>
> But right after this screen turns off and after a second screen turns on with "Loading progress bar" and as soon as it loads, a blank screen pops-up. I am not sure whether system is booted properly or not. I am not able to interact with it. And no Linux user space is accessible
>
> Sadly, the custom carrier board I am using has no serial console, so I can only use a RPi display to see the progress and messages.
>
> Can anyone please let me know what could be the issue here and how to resolve it?
>
> Your help will be much appreciated.
>
> thanks in advance..
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> You automatically follow any topics you start or reply to.
> View/Reply Online (#56253): https://lists.yoctoproject.org/g/yocto/message/56253
> Mute This Topic: https://lists.yoctoproject.org/mt/89328890/1997914
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [raj.khem@gmail.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>


^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: Building Yocto images for RPi CM4
  2022-02-22 22:46 ` [yocto] " Khem Raj
@ 2022-02-23  7:07   ` Sourabh Hegde
  2022-02-23 17:47     ` [yocto] " Khem Raj
  0 siblings, 1 reply; 7+ messages in thread
From: Sourabh Hegde @ 2022-02-23  7:07 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 194 bytes --]

Hello Khem,

I agree. But since there is no serial console support available on my IO carrier board, I can't see what it prints.

Is there any other way to debug?

Kind Regards,
Sourabh

[-- Attachment #2: Type: text/html, Size: 223 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: [yocto] Building Yocto images for RPi CM4
  2022-02-23  7:07   ` Sourabh Hegde
@ 2022-02-23 17:47     ` Khem Raj
  2022-02-23 20:18       ` Sourabh Hegde
  0 siblings, 1 reply; 7+ messages in thread
From: Khem Raj @ 2022-02-23 17:47 UTC (permalink / raw)
  To: Sourabh Hegde; +Cc: Yocto-mailing-list

On Tue, Feb 22, 2022 at 11:07 PM Sourabh Hegde <hrsourabh011@gmail.com> wrote:
>
> Hello Khem,
>
> I agree. But since there is no serial console support available on my IO carrier board, I can't see what it prints.
>
> Is there any other way to debug?
>

if you have a screen connected maybe you can enable verbose options
for kernel and bootloader and see if it prints stuff on
console.

> Kind Regards,
> Sourabh
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> You automatically follow any topics you start or reply to.
> View/Reply Online (#56258): https://lists.yoctoproject.org/g/yocto/message/56258
> Unfollow This Topic: https://lists.yoctoproject.org/unft/89328890/1997914
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [raj.khem@gmail.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>


^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: Building Yocto images for RPi CM4
  2022-02-23 17:47     ` [yocto] " Khem Raj
@ 2022-02-23 20:18       ` Sourabh Hegde
  2022-02-27 11:42         ` Sourabh Hegde
  0 siblings, 1 reply; 7+ messages in thread
From: Sourabh Hegde @ 2022-02-23 20:18 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 172 bytes --]

Hello Khem,

I am already using Raspberry Pi compatible screen. Can you please let me know how to enable verbose options for kernel and bootloader?

Thanks in advance

[-- Attachment #2: Type: text/html, Size: 188 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: Building Yocto images for RPi CM4
  2022-02-23 20:18       ` Sourabh Hegde
@ 2022-02-27 11:42         ` Sourabh Hegde
  2022-02-28  2:40           ` [yocto] " Khem Raj
  0 siblings, 1 reply; 7+ messages in thread
From: Sourabh Hegde @ 2022-02-27 11:42 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 37003 bytes --]

Hello Khem,

I got my hands on Raspberry Pi Compute Module 4 IO Board and also I could access serial console now. Below is the log message I got while booting:

[    0.000000] Booting Linux on physical CPU 0x0000000000 [0x410fd083]
[    0.000000] Linux version 5.10.78-v8 (oe-user@oe-host) (aarch64-oe-linux-gcc (GCC) 11.2.0, GNU ld (GNU Binutils) 2.37.20210721) #1 SMP PREEMPT Tue Feb 22 15:19:24 UTC 2022
[    0.000000] random: fast init done
[    0.000000] Machine model: Raspberry Pi Compute Module 4 Rev 1.0
[    0.000000] efi: UEFI not found.
[    0.000000] Reserved memory: created CMA memory pool at 0x000000001ec00000, size 256 MiB
[    0.000000] OF: reserved mem: initialized node linux,cma, compatible id shared-dma-pool
[    0.000000] Zone ranges:
[    0.000000]   DMA      [mem 0x0000000000000000-0x000000003b3fffff]
[    0.000000]   DMA32    empty
[    0.000000]   Normal   empty
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x0000000000000000-0x000000003b3fffff]
[    0.000000] Initmem setup node 0 [mem 0x0000000000000000-0x000000003b3fffff]
[    0.000000] percpu: Embedded 32 pages/cpu s92312 r8192 d30568 u131072
[    0.000000] Detected PIPT I-cache on CPU0
[    0.000000] CPU features: detected: Spectre-v2
[    0.000000] CPU features: detected: Spectre-v4
[    0.000000] CPU features: detected: ARM errata 1165522, 1319367, or 1530923
[    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 238896
[    0.000000] Kernel command line: coherent_pool=1M 8250.nr_uarts=1 snd_bcm2835.enable_compat_alsa=0 snd_bcm2835.enable_hdmi=1  smsc95xx.macaddr=E4:5F:01:49:E3:A0 vc_mem.mem_base=0x3ec00000 vc_mem.mem_size=0x40000000  dwc_otg.lpm_enable=0 console=ttyS0,115200 root=/dev/mmcblk0p2 rootfstype=ext4 rootwait
[    0.000000] Dentry cache hash table entries: 131072 (order: 8, 1048576 bytes, linear)
[    0.000000] Inode-cache hash table entries: 65536 (order: 7, 524288 bytes, linear)
[    0.000000] mem auto-init: stack:off, heap alloc:off, heap free:off
[    0.000000] Memory: 663720K/970752K available (12416K kernel code, 1992K rwdata, 4440K rodata, 3968K init, 1267K bss, 44888K reserved, 262144K cma-reserved)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=4, Nodes=1
[    0.000000] ftrace: allocating 39462 entries in 155 pages
[    0.000000] ftrace: allocated 155 pages with 5 groups
[    0.000000] rcu: Preemptible hierarchical RCU implementation.
[    0.000000] rcu:     RCU event tracing is enabled.
[    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=256 to nr_cpu_ids=4.
[    0.000000]  Trampoline variant of Tasks RCU enabled.
[    0.000000]  Rude variant of Tasks RCU enabled.
[    0.000000]  Tracing variant of Tasks RCU enabled.
[    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 25 jiffies.
[    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=4
[    0.000000] NR_IRQS: 64, nr_irqs: 64, preallocated irqs: 0
[    0.000000] GIC: Using split EOI/Deactivate mode
[    0.000000] irq_brcmstb_l2: registered L2 intc (/soc/interrupt-controller@7ef00100, parent irq: 10)
[    0.000000] random: get_random_bytes called from start_kernel+0x3b4/0x574 with crng_init=1
[    0.000000] arch_timer: cp15 timer(s) running at 54.00MHz (phys).
[    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0xc743ce346, max_idle_ns: 440795203123 ns
[    0.000006] sched_clock: 56 bits at 54MHz, resolution 18ns, wraps every 4398046511102ns
[    0.000246] Console: colour dummy device 80x25
[    0.000305] Calibrating delay loop (skipped), value calculated using timer frequency.. 108.00 BogoMIPS (lpj=216000)
[    0.000334] pid_max: default: 32768 minimum: 301
[    0.000480] LSM: Security Framework initializing
[    0.000658] Mount-cache hash table entries: 2048 (order: 2, 16384 bytes, linear)
[    0.000688] Mountpoint-cache hash table entries: 2048 (order: 2, 16384 bytes, linear)
[    0.001948] cgroup: Disabling memory control group subsystem
[    0.004198] rcu: Hierarchical SRCU implementation.
[    0.005174] EFI services will not be available.
[    0.005670] smp: Bringing up secondary CPUs ...
[    0.006642] Detected PIPT I-cache on CPU1
[    0.006713] CPU1: Booted secondary processor 0x0000000001 [0x410fd083]
[    0.007803] Detected PIPT I-cache on CPU2
[    0.007850] CPU2: Booted secondary processor 0x0000000002 [0x410fd083]
[    0.008988] Detected PIPT I-cache on CPU3
[    0.009034] CPU3: Booted secondary processor 0x0000000003 [0x410fd083]
[    0.009215] smp: Brought up 1 node, 4 CPUs
[    0.009260] SMP: Total of 4 processors activated.
[    0.009277] CPU features: detected: 32-bit EL0 Support
[    0.009294] CPU features: detected: CRC32 instructions
[    0.009311] CPU features: detected: 32-bit EL1 Support
[    0.044411] CPU: All CPU(s) started at EL2
[    0.044481] alternatives: patching kernel code
[    0.045650] devtmpfs: initialized
[    0.055650] Enabled cp15_barrier support
[    0.055694] Enabled setend support
[    0.056029] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 7645041785100000 ns
[    0.056097] futex hash table entries: 1024 (order: 4, 65536 bytes, linear)
[    0.063289] pinctrl core: initialized pinctrl subsystem
[    0.064024] DMI not present or invalid.
[    0.064444] NET: Registered protocol family 16
[    0.067843] DMA: preallocated 1024 KiB GFP_KERNEL pool for atomic allocations
[    0.068456] DMA: preallocated 1024 KiB GFP_KERNEL|GFP_DMA pool for atomic allocations
[    0.069414] DMA: preallocated 1024 KiB GFP_KERNEL|GFP_DMA32 pool for atomic allocations
[    0.069523] audit: initializing netlink subsys (disabled)
[    0.069799] audit: type=2000 audit(0.068:1): state=initialized audit_enabled=0 res=1
[    0.070316] thermal_sys: Registered thermal governor 'step_wise'
[    0.070532] cpuidle: using governor menu
[    0.070728] hw-breakpoint: found 6 breakpoint and 4 watchpoint registers.
[    0.070927] ASID allocator initialised with 65536 entries
[    0.071060] Serial: AMBA PL011 UART driver
[    0.110080] bcm2835-mbox fe00b880.mailbox: mailbox enabled
[    0.116379] raspberrypi-firmware soc:firmware: Attached to firmware from 2021-09-30T19:21:03, variant start
[    0.120394] raspberrypi-firmware soc:firmware: Firmware hash is 51215b4f6e3966401ecd99652a35cf1c25069113
[    0.153635] bcm2835-dma fe007000.dma: DMA legacy API manager, dmachans=0x1
[    0.157672] vgaarb: loaded
[    0.158083] SCSI subsystem initialized
[    0.158307] usbcore: registered new interface driver usbfs
[    0.158363] usbcore: registered new interface driver hub
[    0.158429] usbcore: registered new device driver usb
[    0.158788] usb_phy_generic phy: supply vcc not found, using dummy regulator
[    0.159737] Advanced Linux Sound Architecture Driver Initialized.
[    0.160822] clocksource: Switched to clocksource arch_sys_counter
[    1.180587] VFS: Disk quotas dquot_6.6.0
[    1.180699] VFS: Dquot-cache hash table entries: 512 (order 0, 4096 bytes)
[    1.180878] FS-Cache: Loaded
[    1.181104] CacheFiles: Loaded
[    1.191916] NET: Registered protocol family 2
[    1.192151] IP idents hash table entries: 16384 (order: 5, 131072 bytes, linear)
[    1.193473] tcp_listen_portaddr_hash hash table entries: 512 (order: 1, 8192 bytes, linear)
[    1.193507] TCP established hash table entries: 8192 (order: 4, 65536 bytes, linear)
[    1.193668] TCP bind hash table entries: 8192 (order: 5, 131072 bytes, linear)
[    1.193793] TCP: Hash tables configured (established 8192 bind 8192)
[    1.193995] UDP hash table entries: 512 (order: 2, 16384 bytes, linear)
[    1.194028] UDP-Lite hash table entries: 512 (order: 2, 16384 bytes, linear)
[    1.194293] NET: Registered protocol family 1
[    1.195120] RPC: Registered named UNIX socket transport module.
[    1.195137] RPC: Registered udp transport module.
[    1.195152] RPC: Registered tcp transport module.
[    1.195166] RPC: Registered tcp NFSv4.1 backchannel transport module.
[    1.195189] PCI: CLS 0 bytes, default 64
[    1.197342] hw perfevents: enabled with armv8_cortex_a72 PMU driver, 7 counters available
[    1.197623] kvm [1]: IPA Size Limit: 44 bits
[    1.198801] kvm [1]: vgic interrupt IRQ9
[    1.199075] kvm [1]: Hyp mode initialized successfully
[    1.201677] Initialise system trusted keyrings
[    1.202005] workingset: timestamp_bits=46 max_order=18 bucket_order=0
[    1.208121] zbud: loaded
[    1.209754] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    1.210008] FS-Cache: Netfs 'nfs' registered for caching
[    1.210671] NFS: Registering the id_resolver key type
[    1.210716] Key type id_resolver registered
[    1.210732] Key type id_legacy registered
[    1.210855] nfs4filelayout_init: NFSv4 File Layout Driver Registering...
[    1.210872] nfs4flexfilelayout_init: NFSv4 Flexfile Layout Driver Registering...
[    1.211950] Key type asymmetric registered
[    1.211969] Asymmetric key parser 'x509' registered
[    1.212019] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 247)
[    1.212271] io scheduler mq-deadline registered
[    1.212289] io scheduler kyber registered
[    1.216591] gpio-507 (ant1): hogged as output/high
[    1.217956] gpio-511 (ant2): hogged as output/low
[    1.219110] brcm-pcie fd500000.pcie: host bridge /scb/pcie@7d500000 ranges:
[    1.219142] brcm-pcie fd500000.pcie:   No bus range found for /scb/pcie@7d500000, using [bus 00-ff]
[    1.219215] brcm-pcie fd500000.pcie:      MEM 0x0600000000..0x063fffffff -> 0x00c0000000
[    1.219295] brcm-pcie fd500000.pcie:   IB MEM 0x0000000000..0x003fffffff -> 0x0400000000
[    1.536845] brcm-pcie fd500000.pcie: link down
[    1.542588] Serial: 8250/16550 driver, 1 ports, IRQ sharing enabled
[    1.543460] bcm2835-aux-uart fe215040.serial: there is not valid maps for state default
[    1.545765] iproc-rng200 fe104000.rng: hwrng registered
[    1.546149] vc-mem: phys_addr:0x00000000 mem_base=0x3ec00000 mem_size:0x40000000(1024 MiB)
[    1.547472] gpiomem-bcm2835 fe200000.gpiomem: Initialised: Registers at 0xfe200000
[    1.557763] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    1.558622] cacheinfo: Unable to detect cache hierarchy for CPU 0
[    1.569652] brd: module loaded
[    1.581572] loop: module loaded
[    1.583327] Loading iSCSI transport class v2.0-870.
[    1.586751] libphy: Fixed MDIO Bus: probed
[    1.588364] bcmgenet fd580000.ethernet: GENET 5.0 EPHY: 0x0000
[    1.600865] libphy: bcmgenet MII bus: probed
[    1.648957] unimac-mdio unimac-mdio.-19: Broadcom UniMAC MDIO bus
[    1.650027] usbcore: registered new interface driver r8152
[    1.650094] usbcore: registered new interface driver lan78xx
[    1.650149] usbcore: registered new interface driver smsc95xx
[    1.650714] dwc_otg: version 3.00a 10-AUG-2012 (platform bus)
[    1.651548] usbcore: registered new interface driver uas
[    1.651609] usbcore: registered new interface driver usb-storage
[    1.651837] mousedev: PS/2 mouse device common for all mice
[    1.651886] i2c /dev entries driver
[    1.652742] Driver for 1-wire Dallas network protocol.
[    1.655022] bcm2835-wdt bcm2835-wdt: Broadcom BCM2835 watchdog timer
[    1.658246] sdhci: Secure Digital Host Controller Interface driver
[    1.658264] sdhci: Copyright(c) Pierre Ossman
[    1.659020] mmc-bcm2835 fe300000.mmcnr: could not get clk, deferring probe
[    1.661482] sdhci-pltfm: SDHCI platform and OF driver helper
[    1.664363] ledtrig-cpu: registered to indicate activity on CPUs
[    1.664701] hid: raw HID events driver (C) Jiri Kosina
[    1.664947] usbcore: registered new interface driver usbhid
[    1.664963] usbhid: USB HID core driver
[    1.665261] ashmem: initialized
[    1.674480] Initializing XFRM netlink socket
[    1.674534] NET: Registered protocol family 17
[    1.674650] Key type dns_resolver registered
[    1.675067] registered taskstats version 1
[    1.675096] Loading compiled-in X.509 certificates
[    1.675717] Key type ._fscrypt registered
[    1.675736] Key type .fscrypt registered
[    1.675751] Key type fscrypt-provisioning registered
[    1.686689] uart-pl011 fe201000.serial: there is not valid maps for state default
[    1.686966] uart-pl011 fe201000.serial: cts_event_workaround enabled
[    1.687068] fe201000.serial: ttyAMA0 at MMIO 0xfe201000 (irq = 23, base_baud = 0) is a PL011 rev2
[    1.693178] bcm2835-aux-uart fe215040.serial: there is not valid maps for state default
[    1.693806] printk: console [ttyS0] disabled
[    1.693923] fe215040.serial: ttyS0 at MMIO 0xfe215040 (irq = 24, base_baud = 62500000) is a 16550
[    2.811548] printk: console [ttyS0] enabled
[    2.820987] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    2.827771] bcm2835-power bcm2835-power: Broadcom BCM2835 power domains driver
[    2.837670] mmc-bcm2835 fe300000.mmcnr: mmc_debug:0 mmc_debug2:0
[    2.843863] mmc-bcm2835 fe300000.mmcnr: DMA channel allocated
[    2.880304] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    2.891380] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    2.900692] of_cfs_init
[    2.903346] of_cfs_init: OK
[    2.906233] mmc1: queuing unknown CIS tuple 0x80 (2 bytes)
[    2.913529] mmc1: queuing unknown CIS tuple 0x80 (3 bytes)
[    2.914316] mmc0: SDHCI controller on fe340000.mmc [fe340000.mmc] using ADMA
[    2.920774] mmc1: queuing unknown CIS tuple 0x80 (3 bytes)
[    2.927726] ALSA device list:
[    2.931646] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    2.934870] mmc1: queuing unknown CIS tuple 0x80 (7 bytes)
[    2.934914]   No soundcards found.
[    2.942397] mmc1: queuing unknown CIS tuple 0x80 (3 bytes)
[    2.956053] Waiting for root device /dev/mmcblk0p2...
[    3.019902] mmc1: new high speed SDIO card at address 0001
[    3.027907] mmc0: new ultra high speed DDR50 SDHC card at address aaaa
[    3.035470] mmcblk0: mmc0:aaaa SC16G 14.8 GiB
[    3.046464]  mmcblk0: p1 p2
[    3.055549] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    3.083634] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. Opts: (null)
[    3.092049] VFS: Mounted root (ext4 filesystem) readonly on device 179:2.
[    3.102781] devtmpfs: mounted
[    3.113385] Freeing unused kernel memory: 3968K
[    3.118193] Run /sbin/init as init process
[    3.327246] systemd[1]: System time before build time, advancing clock.
[    3.408332] NET: Registered protocol family 10
[    3.414333] Segment Routing with IPv6
[    3.456287] systemd[1]: systemd 249.7+ running in system mode (+PAM -AUDIT -SELINUX -APPARMOR +IMA -SMACK +SECCOMP -GCRYPT -GNUTLS -OPENSSL +ACL +BLKID -CURL -ELFUTILS -FIDO2 -IDN2 -IDN -IPTC +KMOD -LIBCRYPTSETUP +LIBFDISK -PCRE2 -PWQUALITY -P11KIT -QRENCODE -BZIP2 -LZ4 -XZ -ZLIB +ZSTD +XKBCOMMON +UTMP +SYSVINIT default-hierarchy=hybrid)
[    3.487567] systemd[1]: Detected architecture arm64.

Welcome to OpenEmbedded nodistro.0!

[    3.540979] systemd[1]: Hostname set to <raspberrypi4-64>.
[    3.552504] random: systemd: uninitialized urandom read (16 bytes read)
[    3.559368] systemd[1]: Initializing machine ID from random generator.
[    3.566376] systemd[1]: Installed transient /etc/machine-id file.
[    3.640033] systemd-fstab-generator[107]: Failed to create unit file /run/systemd/generator/boot.mount, as it already exists. Duplicate entry in /etc/fstab?
[    3.699053] systemd[105]: /lib/systemd/system-generators/systemd-fstab-generator failed with exit status 1.
[    4.074995] systemd[1]: Queued start job for default target Multi-User System.
[    4.083709] random: systemd: uninitialized urandom read (16 bytes read)
[    4.137482] systemd[1]: Created slice Slice /system/getty.
[  OK  ] Created slice Slice /system/getty.
[    4.161062] random: systemd: uninitialized urandom read (16 bytes read)
[    4.169819] systemd[1]: Created slice Slice /system/modprobe.
[  OK  ] Created slice Slice /system/modprobe.
[    4.194908] systemd[1]: Created slice Slice /system/serial-getty.
[  OK  ] Created slice Slice /system/serial-getty.
[    4.218857] systemd[1]: Created slice Slice /system/wpa_supplicant-nl80211.
[  OK  ] Created slice Slice /system/wpa_supplicant-nl80211.
[    4.246570] systemd[1]: Created slice User and Session Slice.
[  OK  ] Created slice User and Session Slice.
[    4.269477] systemd[1]: Started Dispatch Password Requests to Console Directory Watch.
[  OK  ] Started Dispatch Password …ts to Console Directory Watch.
[    4.297403] systemd[1]: Started Forward Password Requests to Wall Directory Watch.
[  OK  ] Started Forward Password R…uests to Wall Directory Watch.
[    4.325329] systemd[1]: Reached target Path Units.
[  OK  ] Reached target Path Units.
[    4.345071] systemd[1]: Reached target Remote File Systems.
[  OK  ] Reached target Remote File Systems.
[    4.365050] systemd[1]: Reached target Slice Units.
[  OK  ] Reached target Slice Units.
[    4.385058] systemd[1]: Reached target Swaps.
[  OK  ] Reached target Swaps.
[    4.433090] systemd[1]: Listening on RPCbind Server Activation Socket.
[  OK  ] Listening on RPCbind Server Activation Socket.
[    4.457275] systemd[1]: Reached target RPC Port Mapper.
[  OK  ] Reached target RPC Port Mapper.
[    4.477987] systemd[1]: Listening on Syslog Socket.
[  OK  ] Listening on Syslog Socket.
[    4.497387] systemd[1]: Listening on initctl Compatibility Named Pipe.
[  OK  ] Listening on initctl Compatibility Named Pipe.
[    4.522088] systemd[1]: Listening on Journal Audit Socket.
[  OK  ] Listening on Journal Audit Socket.
[    4.545647] systemd[1]: Listening on Journal Socket (/dev/log).
[  OK  ] Listening on Journal Socket (/dev/log).
[    4.569877] systemd[1]: Listening on Journal Socket.
[  OK  ] Listening on Journal Socket.
[    4.589940] systemd[1]: Listening on Network Service Netlink Socket.
[  OK  ] Listening on Network Service Netlink Socket.
[    4.613846] systemd[1]: Listening on udev Control Socket.
[  OK  ] Listening on udev Control Socket.
[    4.637603] systemd[1]: Listening on udev Kernel Socket.
[  OK  ] Listening on udev Kernel Socket.
[    4.661623] systemd[1]: Listening on User Database Manager Socket.
[  OK  ] Listening on User Database Manager Socket.
[    4.685838] systemd[1]: Condition check resulted in Huge Pages File System being skipped.
[    4.698792] systemd[1]: Mounting POSIX Message Queue File System...
Mounting POSIX Message Queue File System...
[    4.725788] systemd[1]: Mounting Kernel Debug File System...
Mounting Kernel Debug File System...
[    4.757718] systemd[1]: Mounting Kernel Trace File System...
Mounting Kernel Trace File System...
[    4.789511] systemd[1]: Mounting Temporary Directory /tmp...
Mounting Temporary Directory /tmp...
[    4.814515] systemd[1]: Starting Create List of Static Device Nodes...
Starting Create List of Static Device Nodes...
[    4.841861] systemd[1]: Starting Load Kernel Module configfs...
Starting Load Kernel Module configfs...
[    4.869773] systemd[1]: Starting Load Kernel Module drm...
Starting Load Kernel Module drm...
[    4.893853] systemd[1]: Starting Load Kernel Module fuse...
Starting Load Kernel Module fuse...
[    4.920607] fuse: init (API version 7.32)
[    4.922212] systemd[1]: Starting Start psplash boot splash screen...
Starting Start psplash boot splash screen...
[    4.954277] systemd[1]: Starting RPC Bind...
Starting RPC Bind...
[    4.978095] systemd[1]: Starting File System Check on Root Device...
Starting File System Check on Root Device...
[    5.009819] systemd[1]: Starting Journal Service...
Starting Journal Service..[    5.018672] systemd[1]: Condition check resulted in Load Kernel Modules being skipped.
.
[    5.033667] systemd[1]: Starting Apply Kernel Variables...
Starting Apply Kernel Variables...
[    5.045884] systemd[1]: Starting Coldplug All udev Devices...
Starting Coldplug All udev Devices...
[    5.065621] systemd[1]: Started RPC Bind.
[  OK      5.070888] systemd[1]: Mounted POSIX Message Queue File System.
0m] Started     5.078603] systemd[1]: Mounted Kernel Debug File System.
1;39mRPC Bind.
[    5.085789] systemd[1]: Mounted Kernel Trace File System.
;32m  OK  ] Mounted [    5.093484] systemd[1]: Mounted Temporary Directory /tmp.
POSIX Message Queue File System.
[[    5.103087] systemd[1]: Finished Create List of Static Device Nodes.
OK  ] Mounted     5.112765] systemd[1]: modprobe@configfs.service: Deactivated successfully.
;39mKernel Debug File System[    5.122750] systemd[1]: Finished Load Kernel Module configfs.
.
[  OK  ] Mounted  systemd[1]: modprobe@drm.service: Deactivated successfully.
[0;1;39mKernel Trace File System[    5.141000] systemd[1]: Finished Load Kernel Module drm.
.
[  OK  ] Mount[    5.149229] systemd[1]: modprobe@fuse.service: Deactivated successfully.
ed Temporary Directory [    5.158928] systemd[1]: Finished Load Kernel Module fuse.
/tmp.
[  OK [    5.166274] systemd[1]: psplash-start.service: Main process exited, code=exited, status=255/EXCEPTION
] Finished [    5.177531] systemd[1]: psplash-start.service: Failed with result 'exit-code'.
Create List of Static Device No[    5.188088] systemd[1]: Failed to start Start psplash boot splash screen.
des.
[    5.196215] systemd[1]: Dependency failed for Start psplash-systemd progress communication helper.
2m  OK  [    5.206502] systemd[1]: psplash-systemd.service: Job psplash-systemd.service/start failed with result 'dependency'.
] Finished Load Kernel Module confi[    5.220887] systemd[1]: Finished Apply Kernel Variables.
gfs.
[  OK  ] Finished Load Kernel Module drm.
[  O[    5.234289] systemd[1]: Mounting FUSE Control File System...
K  ] Finished Load Kernel Module fuse.
[FAILE[    5.246549] systemd[1]: Mounting Kernel Configuration File System...
D] Failed to start Start psplash boot splash screen.
See 'systemctl status psplash-start.service' for details.
[DEPEND] Dependency failed for Star…progress communication helper.
[  OK  ] Finished Apply Kernel Variables.
Mounting FUSE Control File System...
Mounting Kernel Configuration File System...
[    5.313974] systemd[1]: Started Journal Service.
[  OK  ] Started Journal Service.
[  OK  ] Finished File System Check on Root Device.
[  OK  ] Mounted FUSE Control File System.
[  OK  ] Mounted Kernel Configuration File System.
Starting Remount Root and Kernel File Systems...
[    5.445206] EXT4-fs (mmcblk0p2): re-mounted. Opts: (null)
[  OK  ] Finished Remount Root and Kernel File Systems.
Starting Flush Journal to Persistent Storage...
Starting Create System[    5.510241] systemd-journald[135]: Received client request to flush runtime journal.
Users...
[  OK  ] Finished Flush Journal to Persistent Storage.
[  OK  ] Finished Coldplug All udev Devices.
[  OK  ] Finished Create System Users.
Starting Create Static Device Nodes in /dev...
[  OK  ] Finished Create Static Device Nodes in /dev.
[  OK  ] Reached target Preparation for Local File Systems.
Mounting /var/volatile...
[    5.802376] audit: type=1334 audit(1636549114.475:2): prog-id=5 op=LOAD
[    5.809177] audit: type=1334 audit(1636549114.475:3): prog-id=6 op=LOAD
Starting Rule-based Manage…for Device Events and Files...
[  OK  ] Mounted /var/volatile.
Starting Load/Save Random Seed...
[  OK  ] Started Rule-based Manager for Device Events and Files.
Starting Network Configuration...
[    6.215697] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    6.261009] rpivid-mem feb00000.hevc-decoder: rpivid-hevcmem initialised: Registers at 0xfeb00000 length 0x00010000
[    6.294000] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    6.305014] rpivid-mem feb10000.rpivid-local-intc: rpivid-intcmem initialised: Registers at 0xfeb10000 length 0x00001000
[    6.330846] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    6.332704] rpivid-mem feb20000.h264-decoder: rpivid-h264mem initialised: Registers at 0xfeb20000 length 0x00010000
[    6.353703] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    6.369615] rpivid-mem feb30000.vp9-decoder: rpivid-vp9mem initialised: Registers at 0xfeb30000 length 0x00010000
[  OK  ] Found device[    6.387710] vc_sm_cma: module is from the staging directory, the quality is unknown, you have been warned.
6.393632] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
9m/dev/mmcblk0p1.
[    6.412765] mc: Linux media interface: v0.10
Mounting /boot...
[  OK  ] Star[    6.431869] bcm2835_vc_sm_cma_probe: Videocore shared memory driver
ted     6.433163] bcmgenet fd580000.ethernet: configuring instance for external RGMII (RX delay)
1;39mNetwork Configuration.
[    6.451339] bcmgenet fd580000.ethernet eth0: Link is Down
[    6.457389] [vc_sm_connected_init]: start
Starting Wait for Network to be Configured...
[    6.477747] [vc_sm_connected_init]: installed successfully
[    6.489525] videodev: Linux video capture interface: v2.00
[    6.496669] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    6.520255] brcmstb-i2c fef04500.i2c:  @97500hz registered in polling mode
[    6.533854] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
[    6.541493] brcmstb-i2c fef09500.i2c:  @97500hz registered in polling mode
[    6.549647] Registered IR keymap rc-cec
[    6.553818] rc rc0: vc4 as /devices/platform/soc/fef00700.hdmi/rc/rc0
[    6.560663] input: vc4 as /devices/platform/soc/fef00700.hdmi/rc/rc0/input0
[    6.572121] vc4-drm gpu: bound fef00700.hdmi (ops vc4_hdmi_ops)
[    6.580187] Registered IR keymap rc-cec
[    6.584380] rc rc1: vc4 as /devices/platform/soc/fef05700.hdmi/rc/rc1
[    6.591386] input: vc4 as /devices/platform/soc/fef05700.hdmi/rc/rc1/input1
[    6.601904] vc4-drm gpu: bound fef05700.hdmi (ops vc4_hdmi_ops)
[    6.608378] vc4-drm gpu: bound fe004000.txp (ops vc4_txp_ops)
[    6.614805] vc4-drm gpu: bound fe206000.pixelvalve (ops vc4_crtc_ops)
[    6.618789] bcm2835_mmal_vchiq: module is from the staging directory, the quality is unknown, you have been warned.
[    6.621627] bcm2835_mmal_vchiq: module is from the staging directory, the quality is unknown, you have been warned.
[    6.621735] vc4-drm gpu: bound fe207000.pixelvalve (ops vc4_crtc_ops)
[    6.621970] vc4-drm gpu: bound fe20a000.pixelvalve (ops vc4_crtc_ops)
[    6.622135] vc4-drm gpu: bound fe216000.pixelvalve (ops vc4_crtc_ops)
[    6.622343] vc4-drm gpu: bound fec12000.pixelvalve (ops vc4_crtc_ops)
[    6.643063] [drm] Initialized vc4 0.0.0 20140616 for gpu on minor 0
[    6.675594] vc4-drm gpu: [drm] Cannot find any crtc or sizes
[    6.687116] bcm2835_isp: module is from the staging directory, the quality is unknown, you have been warned.
[    6.694354] bcm2835_codec: module is from the staging directory, the quality is unknown, you have been warned.
[    6.701781] bcm2835_v4l2: module is from the staging directory, the quality is unknown, you have been warned.
[  OK  ] Mounted /boot.
[    6.722939] bcm2835-codec bcm2835-codec: Device registered as /dev/video10
[    6.730296] bcm2835-codec bcm2835-codec: Loaded V4L2 decode
[    6.738697] bcm2835-codec bcm2835-codec: Device registered as /dev/video11
[    6.745908] bcm2835-codec bcm2835-codec: Loaded V4L2 encode
[    6.754675] bcm2835-isp bcm2835-isp: Device node output[0] registered as /dev/video13
[    6.765508] bcm2835-isp bcm2835-isp: Device node capture[0] registered as /dev/video14
[    6.776093] bcm2835-isp bcm2835-isp: Device node capture[1] registered as /dev/video15
[    6.777884] bcm2835-codec bcm2835-codec: Device registered as /dev/video12
[    6.792915] bcm2835-codec bcm2835-codec: Loaded V4L2 isp
[    6.798548] bcm2835-isp bcm2835-isp: Device node stats[2] registered as /dev/video16
[    6.802966] [drm] Initialized v3d 1.0.0 20180419 for fec00000.v3d on minor 1
[    6.810763] bcm2835-isp bcm2835-isp: Register output node 0 with media controller
[  OK      6.822995] bcm2835-codec bcm2835-codec: Device registered as /dev/video18
0m] Reac[    6.823542] bcm2835-isp bcm2835-isp: Register capture node 1 with media controller
hed targ[    6.830924] bcm2835-codec bcm2835-codec: Loaded V4L2 image_fx
et     6.841425] bcm2835-isp bcm2835-isp: Register capture node 2 with media controller
;39mLoca[    6.852471] cfg80211: Loading compiled-in X.509 certificates for regulatory database
l File S[    6.853759] bcm2835-isp bcm2835-isp: Register capture node 3 with media controller
ystems.
[    6.873712] bcm2835-isp bcm2835-isp: Loaded V4L2 bcm2835-isp
Starting Rebuild Dynamic Linker Cache...
[    6.895219] cfg80211: Loaded X.509 cert 'sforshee: 00b28ddf47aef9cea7'
Starting Create Volatile Files and Directories...
[  OK  ] Finished Create Volatile Files and Directories.
[    6.995252] brcmfmac: brcmf_fw_alloc_request: using brcm/brcmfmac43455-sdio for chip BCM4345/6
[    7.007862] usbcore: registered new interface driver brcmfmac
Starting Rebuild Journal Catalog...
Starting Network Name Resolution...
Starting Network Time Synchronization...
Starting Record System Boot/Shutdown in UTMP...
[  OK  ] Finished Rebuild Journal Catalog.
[  OK  ] Finished Record System Boot/Shutdown in UTMP.
[    7.290634] brcmfmac: brcmf_fw_alloc_request: using brcm/brcmfmac43455-sdio for chip BCM4345/6
[    7.312992] brcmfmac: brcmf_fw_alloc_request: using brcm/brcmfmac43455-sdio for chip BCM4345/6
[  OK  ] Finished Rebuild Dynamic Linker Cache.
Starting Update is Completed...
[    7.355203] brcmfmac: brcmf_c_preinit_dcmds: Firmware: BCM4345/6 wl0: Jan  4 2021 19:56:29 version 7.45.229 (617f1f5 CY) FWID 01-2dbd9d2e
[  OK  ] Finished Update is Completed.
[  OK  ] Listening on Load/Save RF …itch Status /dev/rfkill Watch.
Starting Load/Save RF Kill Switch Status...
Starting Start psplash boot splash screen...
[FAILED] Failed to start Start psplash boot splash screen.
See 'systemctl status psplash-start.service' for details.
[DEPEND] Dependency failed for Star…progress communication helper.
Starting Start psplash boot splash screen...
[FAILED] Failed to start Start psplash boot splash screen.
See 'systemctl status psplash-start.service' for details.
[DEPEND] Dependency failed for Star…progress communication helper.
[  OK  ] Started Load/Save RF Kill Switch Status.
[  OK  ] Started Network Name Resolution.
[  OK  ] Found device /sys/subsystem/net/devices/wlan0.
[    7.821285] random: crng init done
[    7.824757] random: 7 urandom warning(s) missed due to ratelimiting
[    7.828150] brcmfmac: brcmf_cfg80211_set_power_mgmt: power save enabled
[  OK  ] Reached target Host and Network Name Lookups.
[  OK  ] Started Network Time Synchronization.
[  OK  ] Finished Load/Save Random Seed.
[  OK  ] Reached target System Initialization.
[  OK  ] Started Daily Cleanup of Temporary Directories.
[  OK  ] Reached target Boot Completion Check.
[  OK  ] Reached target System Time Set.
[  OK  ] Reached target Timer Units.
[  OK  ] Listening on Avahi mDNS/DNS-SD Stack Activation Socket.
[  OK  ] Listening on D-Bus System Message Bus Socket.
[  OK  ] Listening on dropbear.socket.
[  OK  ] Reached target Socket Units.
[  OK  ] Reached target Basic System.
Starting Save/Restore Sound Card State...
Starting Avahi mDNS/DNS-SD Stack...
[  OK  ] Started Kernel Logging Service.
[  OK  ] Started System Logging Service.
[  OK  ] Started D-Bus System Message Bus.
[  OK  ] Started A minimalistic net…Pv4, rdisc and DHCPv6 support.
Starting Configure Bluetooth Modems connected by UART...
Starting Telephony service...
[    8.291553] 8021q: 802.1Q VLAN Support v1.8
[    8.298806] audit: type=1334 audit(1636549116.971:4): prog-id=7 op=LOAD
[    8.305628] audit: type=1334 audit(1636549116.971:5): prog-id=8 op=LOAD
[    8.313826] uart-pl011 fe201000.serial: no DMA platform data
Starting User Login Management...
Starting Commit a transient machine-id on disk...
[  OK  ] Started WPA supplicant dae…0211 driver-specific version).
Starting WPA supplicant...
[  OK  ] Finished Save/Restore Sound Card State.
[  OK  ] Started Telephony service.
[  OK  ] Started Avahi mDNS/DNS-SD Stack.
[  OK  ] Reached target Sound Card.
[  OK  ] Finished Commit a transient machine-id on disk.
[  OK  ] Started     8.691650] Bluetooth: Core ver 2.22
1;39mWPA[    8.696196] NET: Registered protocol family 31
supplic[    8.701327] Bluetooth: HCI device and connection manager initialized
ant.[    8.708584] Bluetooth: HCI socket layer initialized

[    8.714452] Bluetooth: L2CAP socket layer initialized
[    8.719796] Bluetooth: SCO socket layer initialized
[  OK  ] Reached target Network.
Starting Permit User Sessions...
[  OK  ] Finished Permit User Sessions.
[  OK  ] Started Getty on tty1.
[  OK  ] Started Serial Getty on ttyS0.
[  OK  ] Reached target Login Prompts.
[  OK  ] Started User Login Management.
[   14.115352] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready

OpenEmbedded nodistro.0 raspberrypi4-64 ttyS0

raspberrypi4-64 login: [   15.048478] Bluetooth: HCI UART driver ver 2.3
[   15.053073] Bluetooth: HCI UART protocol H4 registered
[   15.058615] Bluetooth: HCI UART protocol Three-wire (H5) registered
[   15.065454] Bluetooth: HCI UART protocol Broadcom registered
[   15.324220] Bluetooth: BNEP (Ethernet Emulation) ver 1.3
[   15.329743] Bluetooth: BNEP filters: protocol multicast
[   15.335314] Bluetooth: BNEP socket layer initialized
[   15.355534] NET: Registered protocol family 38
[   15.366165] audit: type=1334 audit(1645960582.023:6): prog-id=9 op=LOAD
[   15.373243] audit: type=1334 audit(1645960582.023:7): prog-id=10 op=LOAD
[   15.447440] Bluetooth: RFCOMM TTY layer initialized
[   15.452487] Bluetooth: RFCOMM socket layer initialized
[   15.457947] Bluetooth: RFCOMM ver 1.11
[   49.149033] audit: type=1334 audit(1645960615.807:8): prog-id=10 op=UNLOAD
[   49.156083] audit: type=1334 audit(1645960615.807:9): prog-id=9 op=UNLOAD

And it's stuck here.

And it is also complaning about

[    3.640033] systemd-fstab-generator[107]: Failed to create unit file /run/systemd/generator/boot.mount, as it already exists. Duplicate entry in /etc/fstab?
[    3.699053] systemd[105]: /lib/systemd/system-generators/systemd-fstab-generator failed with exit status 1.

My fstab looks like:

# stock fstab - you probably want to override this with a machine specific one

/dev/root            /                    auto       defaults              1  1
proc                 /proc                proc       defaults              0  0
devpts               /dev/pts             devpts     mode=0620,ptmxmode=0666,gid=5      0  0
tmpfs                /run                 tmpfs      mode=0755,nodev,nosuid,strictatime 0  0
tmpfs                /var/volatile        tmpfs      defaults              0  0

# uncomment this if your device has a SD/MMC/Transflash slot
#/dev/mmcblk0p1       /media/card          auto       defaults,sync,noauto  0  0

/dev/mmcblk0p1  /boot   vfat    defaults        0       0

Can you please let me know what could be the issue here and how to resolve it?

Your help will be much appreciated.

[-- Attachment #2: Type: text/html, Size: 48134 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: [yocto] Building Yocto images for RPi CM4
  2022-02-27 11:42         ` Sourabh Hegde
@ 2022-02-28  2:40           ` Khem Raj
  0 siblings, 0 replies; 7+ messages in thread
From: Khem Raj @ 2022-02-28  2:40 UTC (permalink / raw)
  To: Sourabh Hegde; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 38059 bytes --]

On Sun, Feb 27, 2022 at 3:42 AM Sourabh Hegde <hrsourabh011@gmail.com>
wrote:

> Hello Khem,
>
> I got my hands on Raspberry Pi Compute Module 4 IO Board and also I could
> access serial console now. Below is the log message I got while booting:
>
> [    0.000000] Booting Linux on physical CPU 0x0000000000 [0x410fd083]
> [    0.000000] Linux version 5.10.78-v8 (oe-user@oe-host)
> (aarch64-oe-linux-gcc (GCC) 11.2.0, GNU ld (GNU Binutils) 2.37.20210721) #1
> SMP PREEMPT Tue Feb 22 15:19:24 UTC 2022
> [    0.000000] random: fast init done
> [    0.000000] Machine model: Raspberry Pi Compute Module 4 Rev 1.0
> [    0.000000] efi: UEFI not found.
> [    0.000000] Reserved memory: created CMA memory pool at
> 0x000000001ec00000, size 256 MiB
> [    0.000000] OF: reserved mem: initialized node linux,cma, compatible id
> shared-dma-pool
> [    0.000000] Zone ranges:
> [    0.000000]   DMA      [mem 0x0000000000000000-0x000000003b3fffff]
> [    0.000000]   DMA32    empty
> [    0.000000]   Normal   empty
> [    0.000000] Movable zone start for each node
> [    0.000000] Early memory node ranges
> [    0.000000]   node   0: [mem 0x0000000000000000-0x000000003b3fffff]
> [    0.000000] Initmem setup node 0 [mem
> 0x0000000000000000-0x000000003b3fffff]
> [    0.000000] percpu: Embedded 32 pages/cpu s92312 r8192 d30568 u131072
> [    0.000000] Detected PIPT I-cache on CPU0
> [    0.000000] CPU features: detected: Spectre-v2
> [    0.000000] CPU features: detected: Spectre-v4
> [    0.000000] CPU features: detected: ARM errata 1165522, 1319367, or
> 1530923
> [    0.000000] Built 1 zonelists, mobility grouping on.  Total pages:
> 238896
> [    0.000000] Kernel command line: coherent_pool=1M 8250.nr_uarts=1
> snd_bcm2835.enable_compat_alsa=0 snd_bcm2835.enable_hdmi=1
> smsc95xx.macaddr=E4:5F:01:49:E3:A0 vc_mem.mem_base=0x3ec00000
> vc_mem.mem_size=0x40000000  dwc_otg.lpm_enable=0 console=ttyS0,115200
> root=/dev/mmcblk0p2 rootfstype=ext4 rootwait
> [    0.000000] Dentry cache hash table entries: 131072 (order: 8, 1048576
> bytes, linear)
> [    0.000000] Inode-cache hash table entries: 65536 (order: 7, 524288
> bytes, linear)
> [    0.000000] mem auto-init: stack:off, heap alloc:off, heap free:off
> [    0.000000] Memory: 663720K/970752K available (12416K kernel code,
> 1992K rwdata, 4440K rodata, 3968K init, 1267K bss, 44888K reserved, 262144K
> cma-reserved)
> [    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=4, Nodes=1
> [    0.000000] ftrace: allocating 39462 entries in 155 pages
> [    0.000000] ftrace: allocated 155 pages with 5 groups
> [    0.000000] rcu: Preemptible hierarchical RCU implementation.
> [    0.000000] rcu:     RCU event tracing is enabled.
> [    0.000000] rcu:     RCU restricting CPUs from NR_CPUS=256 to
> nr_cpu_ids=4.
> [    0.000000]  Trampoline variant of Tasks RCU enabled.
> [    0.000000]  Rude variant of Tasks RCU enabled.
> [    0.000000]  Tracing variant of Tasks RCU enabled.
> [    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is
> 25 jiffies.
> [    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=4
> [    0.000000] NR_IRQS: 64, nr_irqs: 64, preallocated irqs: 0
> [    0.000000] GIC: Using split EOI/Deactivate mode
> [    0.000000] irq_brcmstb_l2: registered L2 intc
> (/soc/interrupt-controller@7ef00100, parent irq: 10)
> [    0.000000] random: get_random_bytes called from
> start_kernel+0x3b4/0x574 with crng_init=1
> [    0.000000] arch_timer: cp15 timer(s) running at 54.00MHz (phys).
> [    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff
> max_cycles: 0xc743ce346, max_idle_ns: 440795203123 ns
> [    0.000006] sched_clock: 56 bits at 54MHz, resolution 18ns, wraps every
> 4398046511102ns
> [    0.000246] Console: colour dummy device 80x25
> [    0.000305] Calibrating delay loop (skipped), value calculated using
> timer frequency.. 108.00 BogoMIPS (lpj=216000)
> [    0.000334] pid_max: default: 32768 minimum: 301
> [    0.000480] LSM: Security Framework initializing
> [    0.000658] Mount-cache hash table entries: 2048 (order: 2, 16384
> bytes, linear)
> [    0.000688] Mountpoint-cache hash table entries: 2048 (order: 2, 16384
> bytes, linear)
> [    0.001948] cgroup: Disabling memory control group subsystem
> [    0.004198] rcu: Hierarchical SRCU implementation.
> [    0.005174] EFI services will not be available.
> [    0.005670] smp: Bringing up secondary CPUs ...
> [    0.006642] Detected PIPT I-cache on CPU1
> [    0.006713] CPU1: Booted secondary processor 0x0000000001 [0x410fd083]
> [    0.007803] Detected PIPT I-cache on CPU2
> [    0.007850] CPU2: Booted secondary processor 0x0000000002 [0x410fd083]
> [    0.008988] Detected PIPT I-cache on CPU3
> [    0.009034] CPU3: Booted secondary processor 0x0000000003 [0x410fd083]
> [    0.009215] smp: Brought up 1 node, 4 CPUs
> [    0.009260] SMP: Total of 4 processors activated.
> [    0.009277] CPU features: detected: 32-bit EL0 Support
> [    0.009294] CPU features: detected: CRC32 instructions
> [    0.009311] CPU features: detected: 32-bit EL1 Support
> [    0.044411] CPU: All CPU(s) started at EL2
> [    0.044481] alternatives: patching kernel code
> [    0.045650] devtmpfs: initialized
> [    0.055650] Enabled cp15_barrier support
> [    0.055694] Enabled setend support
> [    0.056029] clocksource: jiffies: mask: 0xffffffff max_cycles:
> 0xffffffff, max_idle_ns: 7645041785100000 ns
> [    0.056097] futex hash table entries: 1024 (order: 4, 65536 bytes,
> linear)
> [    0.063289] pinctrl core: initialized pinctrl subsystem
> [    0.064024] DMI not present or invalid.
> [    0.064444] NET: Registered protocol family 16
> [    0.067843] DMA: preallocated 1024 KiB GFP_KERNEL pool for atomic
> allocations
> [    0.068456] DMA: preallocated 1024 KiB GFP_KERNEL|GFP_DMA pool for
> atomic allocations
> [    0.069414] DMA: preallocated 1024 KiB GFP_KERNEL|GFP_DMA32 pool for
> atomic allocations
> [    0.069523] audit: initializing netlink subsys (disabled)
> [    0.069799] audit: type=2000 audit(0.068:1): state=initialized
> audit_enabled=0 res=1
> [    0.070316] thermal_sys: Registered thermal governor 'step_wise'
> [    0.070532] cpuidle: using governor menu
> [    0.070728] hw-breakpoint: found 6 breakpoint and 4 watchpoint
> registers.
> [    0.070927] ASID allocator initialised with 65536 entries
> [    0.071060] Serial: AMBA PL011 UART driver
> [    0.110080] bcm2835-mbox fe00b880.mailbox: mailbox enabled
> [    0.116379] raspberrypi-firmware soc:firmware: Attached to firmware
> from 2021-09-30T19:21:03, variant start
> [    0.120394] raspberrypi-firmware soc:firmware: Firmware hash is
> 51215b4f6e3966401ecd99652a35cf1c25069113
> [    0.153635] bcm2835-dma fe007000.dma: DMA legacy API manager,
> dmachans=0x1
> [    0.157672] vgaarb: loaded
> [    0.158083] SCSI subsystem initialized
> [    0.158307] usbcore: registered new interface driver usbfs
> [    0.158363] usbcore: registered new interface driver hub
> [    0.158429] usbcore: registered new device driver usb
> [    0.158788] usb_phy_generic phy: supply vcc not found, using dummy
> regulator
> [    0.159737] Advanced Linux Sound Architecture Driver Initialized.
> [    0.160822] clocksource: Switched to clocksource arch_sys_counter
> [    1.180587] VFS: Disk quotas dquot_6.6.0
> [    1.180699] VFS: Dquot-cache hash table entries: 512 (order 0, 4096
> bytes)
> [    1.180878] FS-Cache: Loaded
> [    1.181104] CacheFiles: Loaded
> [    1.191916] NET: Registered protocol family 2
> [    1.192151] IP idents hash table entries: 16384 (order: 5, 131072
> bytes, linear)
> [    1.193473] tcp_listen_portaddr_hash hash table entries: 512 (order: 1,
> 8192 bytes, linear)
> [    1.193507] TCP established hash table entries: 8192 (order: 4, 65536
> bytes, linear)
> [    1.193668] TCP bind hash table entries: 8192 (order: 5, 131072 bytes,
> linear)
> [    1.193793] TCP: Hash tables configured (established 8192 bind 8192)
> [    1.193995] UDP hash table entries: 512 (order: 2, 16384 bytes, linear)
> [    1.194028] UDP-Lite hash table entries: 512 (order: 2, 16384 bytes,
> linear)
> [    1.194293] NET: Registered protocol family 1
> [    1.195120] RPC: Registered named UNIX socket transport module.
> [    1.195137] RPC: Registered udp transport module.
> [    1.195152] RPC: Registered tcp transport module.
> [    1.195166] RPC: Registered tcp NFSv4.1 backchannel transport module.
> [    1.195189] PCI: CLS 0 bytes, default 64
> [    1.197342] hw perfevents: enabled with armv8_cortex_a72 PMU driver, 7
> counters available
> [    1.197623] kvm [1]: IPA Size Limit: 44 bits
> [    1.198801] kvm [1]: vgic interrupt IRQ9
> [    1.199075] kvm [1]: Hyp mode initialized successfully
> [    1.201677] Initialise system trusted keyrings
> [    1.202005] workingset: timestamp_bits=46 max_order=18 bucket_order=0
> [    1.208121] zbud: loaded
> [    1.209754] squashfs: version 4.0 (2009/01/31) Phillip Lougher
> [    1.210008] FS-Cache: Netfs 'nfs' registered for caching
> [    1.210671] NFS: Registering the id_resolver key type
> [    1.210716] Key type id_resolver registered
> [    1.210732] Key type id_legacy registered
> [    1.210855] nfs4filelayout_init: NFSv4 File Layout Driver Registering...
> [    1.210872] nfs4flexfilelayout_init: NFSv4 Flexfile Layout Driver
> Registering...
> [    1.211950] Key type asymmetric registered
> [    1.211969] Asymmetric key parser 'x509' registered
> [    1.212019] Block layer SCSI generic (bsg) driver version 0.4 loaded
> (major 247)
> [    1.212271] io scheduler mq-deadline registered
> [    1.212289] io scheduler kyber registered
> [    1.216591] gpio-507 (ant1): hogged as output/high
> [    1.217956] gpio-511 (ant2): hogged as output/low
> [    1.219110] brcm-pcie fd500000.pcie: host bridge /scb/pcie@7d500000
> ranges:
> [    1.219142] brcm-pcie fd500000.pcie:   No bus range found for
> /scb/pcie@7d500000, using [bus 00-ff]
> [    1.219215] brcm-pcie fd500000.pcie:      MEM
> 0x0600000000..0x063fffffff -> 0x00c0000000
> [    1.219295] brcm-pcie fd500000.pcie:   IB MEM
> 0x0000000000..0x003fffffff -> 0x0400000000
> [    1.536845] brcm-pcie fd500000.pcie: link down
> [    1.542588] Serial: 8250/16550 driver, 1 ports, IRQ sharing enabled
> [    1.543460] bcm2835-aux-uart fe215040.serial: there is not valid maps
> for state default
> [    1.545765] iproc-rng200 fe104000.rng: hwrng registered
> [    1.546149] vc-mem: phys_addr:0x00000000 mem_base=0x3ec00000
> mem_size:0x40000000(1024 MiB)
> [    1.547472] gpiomem-bcm2835 fe200000.gpiomem: Initialised: Registers at
> 0xfe200000
> [    1.557763] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    1.558622] cacheinfo: Unable to detect cache hierarchy for CPU 0
> [    1.569652] brd: module loaded
> [    1.581572] loop: module loaded
> [    1.583327] Loading iSCSI transport class v2.0-870.
> [    1.586751] libphy: Fixed MDIO Bus: probed
> [    1.588364] bcmgenet fd580000.ethernet: GENET 5.0 EPHY: 0x0000
> [    1.600865] libphy: bcmgenet MII bus: probed
> [    1.648957] unimac-mdio unimac-mdio.-19: Broadcom UniMAC MDIO bus
> [    1.650027] usbcore: registered new interface driver r8152
> [    1.650094] usbcore: registered new interface driver lan78xx
> [    1.650149] usbcore: registered new interface driver smsc95xx
> [    1.650714] dwc_otg: version 3.00a 10-AUG-2012 (platform bus)
> [    1.651548] usbcore: registered new interface driver uas
> [    1.651609] usbcore: registered new interface driver usb-storage
> [    1.651837] mousedev: PS/2 mouse device common for all mice
> [    1.651886] i2c /dev entries driver
> [    1.652742] Driver for 1-wire Dallas network protocol.
> [    1.655022] bcm2835-wdt bcm2835-wdt: Broadcom BCM2835 watchdog timer
> [    1.658246] sdhci: Secure Digital Host Controller Interface driver
> [    1.658264] sdhci: Copyright(c) Pierre Ossman
> [    1.659020] mmc-bcm2835 fe300000.mmcnr: could not get clk, deferring
> probe
> [    1.661482] sdhci-pltfm: SDHCI platform and OF driver helper
> [    1.664363] ledtrig-cpu: registered to indicate activity on CPUs
> [    1.664701] hid: raw HID events driver (C) Jiri Kosina
> [    1.664947] usbcore: registered new interface driver usbhid
> [    1.664963] usbhid: USB HID core driver
> [    1.665261] ashmem: initialized
> [    1.674480] Initializing XFRM netlink socket
> [    1.674534] NET: Registered protocol family 17
> [    1.674650] Key type dns_resolver registered
> [    1.675067] registered taskstats version 1
> [    1.675096] Loading compiled-in X.509 certificates
> [    1.675717] Key type ._fscrypt registered
> [    1.675736] Key type .fscrypt registered
> [    1.675751] Key type fscrypt-provisioning registered
> [    1.686689] uart-pl011 fe201000.serial: there is not valid maps for
> state default
> [    1.686966] uart-pl011 fe201000.serial: cts_event_workaround enabled
> [    1.687068] fe201000.serial: ttyAMA0 at MMIO 0xfe201000 (irq = 23,
> base_baud = 0) is a PL011 rev2
> [    1.693178] bcm2835-aux-uart fe215040.serial: there is not valid maps
> for state default
> [    1.693806] printk: console [ttyS0] disabled
> [    1.693923] fe215040.serial: ttyS0 at MMIO 0xfe215040 (irq = 24,
> base_baud = 62500000) is a 16550
> [    2.811548] printk: console [ttyS0] enabled
> [    2.820987] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    2.827771] bcm2835-power bcm2835-power: Broadcom BCM2835 power domains
> driver
> [    2.837670] mmc-bcm2835 fe300000.mmcnr: mmc_debug:0 mmc_debug2:0
> [    2.843863] mmc-bcm2835 fe300000.mmcnr: DMA channel allocated
> [    2.880304] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    2.891380] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    2.900692] of_cfs_init
> [    2.903346] of_cfs_init: OK
> [    2.906233] mmc1: queuing unknown CIS tuple 0x80 (2 bytes)
> [    2.913529] mmc1: queuing unknown CIS tuple 0x80 (3 bytes)
> [    2.914316] mmc0: SDHCI controller on fe340000.mmc [fe340000.mmc] using
> ADMA
> [    2.920774] mmc1: queuing unknown CIS tuple 0x80 (3 bytes)
> [    2.927726] ALSA device list:
> [    2.931646] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    2.934870] mmc1: queuing unknown CIS tuple 0x80 (7 bytes)
> [    2.934914]   No soundcards found.
> [    2.942397] mmc1: queuing unknown CIS tuple 0x80 (3 bytes)
> [    2.956053] Waiting for root device /dev/mmcblk0p2...
> [    3.019902] mmc1: new high speed SDIO card at address 0001
> [    3.027907] mmc0: new ultra high speed DDR50 SDHC card at address aaaa
> [    3.035470] mmcblk0: mmc0:aaaa SC16G 14.8 GiB
> [    3.046464]  mmcblk0: p1 p2
> [    3.055549] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    3.083634] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data
> mode. Opts: (null)
> [    3.092049] VFS: Mounted root (ext4 filesystem) readonly on device
> 179:2.
> [    3.102781] devtmpfs: mounted
> [    3.113385] Freeing unused kernel memory: 3968K
> [    3.118193] Run /sbin/init as init process
> [    3.327246] systemd[1]: System time before build time, advancing clock.
> [    3.408332] NET: Registered protocol family 10
> [    3.414333] Segment Routing with IPv6
> [    3.456287] systemd[1]: systemd 249.7+ running in system mode (+PAM
> -AUDIT -SELINUX -APPARMOR +IMA -SMACK +SECCOMP -GCRYPT -GNUTLS -OPENSSL
> +ACL +BLKID -CURL -ELFUTILS -FIDO2 -IDN2 -IDN -IPTC +KMOD -LIBCRYPTSETUP
> +LIBFDISK -PCRE2 -PWQUALITY -P11KIT -QRENCODE -BZIP2 -LZ4 -XZ -ZLIB +ZSTD
> +XKBCOMMON +UTMP +SYSVINIT default-hierarchy=hybrid)
> [    3.487567] systemd[1]: Detected architecture arm64.
>
> Welcome to OpenEmbedded nodistro.0!
>
> [    3.540979] systemd[1]: Hostname set to <raspberrypi4-64>.
> [    3.552504] random: systemd: uninitialized urandom read (16 bytes read)
> [    3.559368] systemd[1]: Initializing machine ID from random generator.
> [    3.566376] systemd[1]: Installed transient /etc/machine-id file.
> [    3.640033] systemd-fstab-generator[107]: Failed to create unit file
> /run/systemd/generator/boot.mount, as it already exists. Duplicate entry in
> /etc/fstab?
> [    3.699053] systemd[105]:
> /lib/systemd/system-generators/systemd-fstab-generator failed with exit
> status 1.
> [    4.074995] systemd[1]: Queued start job for default target Multi-User
> System.
> [    4.083709] random: systemd: uninitialized urandom read (16 bytes read)
> [    4.137482] systemd[1]: Created slice Slice /system/getty.
> [  OK  ] Created slice Slice /system/getty.
> [    4.161062] random: systemd: uninitialized urandom read (16 bytes read)
> [    4.169819] systemd[1]: Created slice Slice /system/modprobe.
> [  OK  ] Created slice Slice /system/modprobe.
> [    4.194908] systemd[1]: Created slice Slice /system/serial-getty.
> [  OK  ] Created slice Slice /system/serial-getty.
> [    4.218857] systemd[1]: Created slice Slice
> /system/wpa_supplicant-nl80211.
> [  OK  ] Created slice Slice /system/wpa_supplicant-nl80211.
> [    4.246570] systemd[1]: Created slice User and Session Slice.
> [  OK  ] Created slice User and Session Slice.
> [    4.269477] systemd[1]: Started Dispatch Password Requests to Console
> Directory Watch.
> [  OK  ] Started Dispatch Password …ts to Console Directory Watch.
> [    4.297403] systemd[1]: Started Forward Password Requests to Wall
> Directory Watch.
> [  OK  ] Started Forward Password R…uests to Wall Directory Watch.
> [    4.325329] systemd[1]: Reached target Path Units.
> [  OK  ] Reached target Path Units.
> [    4.345071] systemd[1]: Reached target Remote File Systems.
> [  OK  ] Reached target Remote File Systems.
> [    4.365050] systemd[1]: Reached target Slice Units.
> [  OK  ] Reached target Slice Units.
> [    4.385058] systemd[1]: Reached target Swaps.
> [  OK  ] Reached target Swaps.
> [    4.433090] systemd[1]: Listening on RPCbind Server Activation Socket.
> [  OK  ] Listening on RPCbind Server Activation Socket.
> [    4.457275] systemd[1]: Reached target RPC Port Mapper.
> [  OK  ] Reached target RPC Port Mapper.
> [    4.477987] systemd[1]: Listening on Syslog Socket.
> [  OK  ] Listening on Syslog Socket.
> [    4.497387] systemd[1]: Listening on initctl Compatibility Named Pipe.
> [  OK  ] Listening on initctl Compatibility Named Pipe.
> [    4.522088] systemd[1]: Listening on Journal Audit Socket.
> [  OK  ] Listening on Journal Audit Socket.
> [    4.545647] systemd[1]: Listening on Journal Socket (/dev/log).
> [  OK  ] Listening on Journal Socket (/dev/log).
> [    4.569877] systemd[1]: Listening on Journal Socket.
> [  OK  ] Listening on Journal Socket.
> [    4.589940] systemd[1]: Listening on Network Service Netlink Socket.
> [  OK  ] Listening on Network Service Netlink Socket.
> [    4.613846] systemd[1]: Listening on udev Control Socket.
> [  OK  ] Listening on udev Control Socket.
> [    4.637603] systemd[1]: Listening on udev Kernel Socket.
> [  OK  ] Listening on udev Kernel Socket.
> [    4.661623] systemd[1]: Listening on User Database Manager Socket.
> [  OK  ] Listening on User Database Manager Socket.
> [    4.685838] systemd[1]: Condition check resulted in Huge Pages File
> System being skipped.
> [    4.698792] systemd[1]: Mounting POSIX Message Queue File System...
>          Mounting POSIX Message Queue File System...
> [    4.725788] systemd[1]: Mounting Kernel Debug File System...
>          Mounting Kernel Debug File System...
> [    4.757718] systemd[1]: Mounting Kernel Trace File System...
>          Mounting Kernel Trace File System...
> [    4.789511] systemd[1]: Mounting Temporary Directory /tmp...
>          Mounting Temporary Directory /tmp...
> [    4.814515] systemd[1]: Starting Create List of Static Device Nodes...
>          Starting Create List of Static Device Nodes...
> [    4.841861] systemd[1]: Starting Load Kernel Module configfs...
>          Starting Load Kernel Module configfs...
> [    4.869773] systemd[1]: Starting Load Kernel Module drm...
>          Starting Load Kernel Module drm...
> [    4.893853] systemd[1]: Starting Load Kernel Module fuse...
>          Starting Load Kernel Module fuse...
> [    4.920607] fuse: init (API version 7.32)
> [    4.922212] systemd[1]: Starting Start psplash boot splash screen...
>          Starting Start psplash boot splash screen...
> [    4.954277] systemd[1]: Starting RPC Bind...
>          Starting RPC Bind...
> [    4.978095] systemd[1]: Starting File System Check on Root Device...
>          Starting File System Check on Root Device...
> [    5.009819] systemd[1]: Starting Journal Service...
>          Starting Journal Service..[    5.018672] systemd[1]: Condition
> check resulted in Load Kernel Modules being skipped.
> .
> [    5.033667] systemd[1]: Starting Apply Kernel Variables...
>          Starting Apply Kernel Variables...
> [    5.045884] systemd[1]: Starting Coldplug All udev Devices...
>          Starting Coldplug All udev Devices...
> [    5.065621] systemd[1]: Started RPC Bind.
> [  OK      5.070888] systemd[1]: Mounted POSIX Message Queue File System.
> 0m] Started     5.078603] systemd[1]: Mounted Kernel Debug File System.
> 1;39mRPC Bind.
> [    5.085789] systemd[1]: Mounted Kernel Trace File System.
> ;32m  OK  ] Mounted [    5.093484] systemd[1]: Mounted Temporary Directory
> /tmp.
> POSIX Message Queue File System.
> [[    5.103087] systemd[1]: Finished Create List of Static Device Nodes.
>   OK  ] Mounted     5.112765] systemd[1]: modprobe@configfs.service:
> Deactivated successfully.
> ;39mKernel Debug File System[    5.122750] systemd[1]: Finished Load
> Kernel Module configfs.
> .
> [  OK  ] Mounted  systemd[1]: modprobe@drm.service: Deactivated
> successfully.
> [0;1;39mKernel Trace File System[    5.141000] systemd[1]: Finished Load
> Kernel Module drm.
> .
> [  OK  ] Mount[    5.149229] systemd[1]: modprobe@fuse.service:
> Deactivated successfully.
> ed Temporary Directory [    5.158928] systemd[1]: Finished Load Kernel
> Module fuse.
> /tmp.
> [  OK [    5.166274] systemd[1]: psplash-start.service: Main process
> exited, code=exited, status=255/EXCEPTION
>  ] Finished [    5.177531] systemd[1]: psplash-start.service: Failed with
> result 'exit-code'.
> Create List of Static Device No[    5.188088] systemd[1]: Failed to start
> Start psplash boot splash screen.
> des.
> [    5.196215] systemd[1]: Dependency failed for Start psplash-systemd
> progress communication helper.
> 2m  OK  [    5.206502] systemd[1]: psplash-systemd.service: Job
> psplash-systemd.service/start failed with result 'dependency'.
> ] Finished Load Kernel Module confi[    5.220887] systemd[1]: Finished
> Apply Kernel Variables.
> gfs.
> [  OK  ] Finished Load Kernel Module drm.
> [  O[    5.234289] systemd[1]: Mounting FUSE Control File System...
> K  ] Finished Load Kernel Module fuse.
> [FAILE[    5.246549] systemd[1]: Mounting Kernel Configuration File
> System...
> D] Failed to start Start psplash boot splash screen.
> See 'systemctl status psplash-start.service' for details.
> [DEPEND] Dependency failed for Star…progress communication helper.
> [  OK  ] Finished Apply Kernel Variables.
>          Mounting FUSE Control File System...
>          Mounting Kernel Configuration File System...
> [    5.313974] systemd[1]: Started Journal Service.
> [  OK  ] Started Journal Service.
> [  OK  ] Finished File System Check on Root Device.
> [  OK  ] Mounted FUSE Control File System.
> [  OK  ] Mounted Kernel Configuration File System.
>          Starting Remount Root and Kernel File Systems...
> [    5.445206] EXT4-fs (mmcblk0p2): re-mounted. Opts: (null)
> [  OK  ] Finished Remount Root and Kernel File Systems.
>          Starting Flush Journal to Persistent Storage...
>          Starting Create System[    5.510241] systemd-journald[135]:
> Received client request to flush runtime journal.
>  Users...
> [  OK  ] Finished Flush Journal to Persistent Storage.
> [  OK  ] Finished Coldplug All udev Devices.
> [  OK  ] Finished Create System Users.
>          Starting Create Static Device Nodes in /dev...
> [  OK  ] Finished Create Static Device Nodes in /dev.
> [  OK  ] Reached target Preparation for Local File Systems.
>          Mounting /var/volatile...
> [    5.802376] audit: type=1334 audit(1636549114.475:2): prog-id=5 op=LOAD
> [    5.809177] audit: type=1334 audit(1636549114.475:3): prog-id=6 op=LOAD
>          Starting Rule-based Manage…for Device Events and Files...
> [  OK  ] Mounted /var/volatile.
>          Starting Load/Save Random Seed...
> [  OK  ] Started Rule-based Manager for Device Events and Files.
>          Starting Network Configuration...
> [    6.215697] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    6.261009] rpivid-mem feb00000.hevc-decoder: rpivid-hevcmem
> initialised: Registers at 0xfeb00000 length 0x00010000
> [    6.294000] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    6.305014] rpivid-mem feb10000.rpivid-local-intc: rpivid-intcmem
> initialised: Registers at 0xfeb10000 length 0x00001000
> [    6.330846] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    6.332704] rpivid-mem feb20000.h264-decoder: rpivid-h264mem
> initialised: Registers at 0xfeb20000 length 0x00010000
> [    6.353703] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    6.369615] rpivid-mem feb30000.vp9-decoder: rpivid-vp9mem initialised:
> Registers at 0xfeb30000 length 0x00010000
> [  OK  ] Found device[    6.387710] vc_sm_cma: module is from the staging
> directory, the quality is unknown, you have been warned.
>      6.393632] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> 9m/dev/mmcblk0p1.
> [    6.412765] mc: Linux media interface: v0.10
>          Mounting /boot...
> [  OK  ] Star[    6.431869] bcm2835_vc_sm_cma_probe: Videocore shared
> memory driver
> ted     6.433163] bcmgenet fd580000.ethernet: configuring instance for
> external RGMII (RX delay)
> 1;39mNetwork Configuration.
> [    6.451339] bcmgenet fd580000.ethernet eth0: Link is Down
> [    6.457389] [vc_sm_connected_init]: start
>          Starting Wait for Network to be Configured...
> [    6.477747] [vc_sm_connected_init]: installed successfully
> [    6.489525] videodev: Linux video capture interface: v2.00
> [    6.496669] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    6.520255] brcmstb-i2c fef04500.i2c:  @97500hz registered in polling
> mode
> [    6.533854] vc4-drm gpu: bound fe400000.hvs (ops vc4_hvs_ops)
> [    6.541493] brcmstb-i2c fef09500.i2c:  @97500hz registered in polling
> mode
> [    6.549647] Registered IR keymap rc-cec
> [    6.553818] rc rc0: vc4 as /devices/platform/soc/fef00700.hdmi/rc/rc0
> [    6.560663] input: vc4 as
> /devices/platform/soc/fef00700.hdmi/rc/rc0/input0
> [    6.572121] vc4-drm gpu: bound fef00700.hdmi (ops vc4_hdmi_ops)
> [    6.580187] Registered IR keymap rc-cec
> [    6.584380] rc rc1: vc4 as /devices/platform/soc/fef05700.hdmi/rc/rc1
> [    6.591386] input: vc4 as
> /devices/platform/soc/fef05700.hdmi/rc/rc1/input1
> [    6.601904] vc4-drm gpu: bound fef05700.hdmi (ops vc4_hdmi_ops)
> [    6.608378] vc4-drm gpu: bound fe004000.txp (ops vc4_txp_ops)
> [    6.614805] vc4-drm gpu: bound fe206000.pixelvalve (ops vc4_crtc_ops)
> [    6.618789] bcm2835_mmal_vchiq: module is from the staging directory,
> the quality is unknown, you have been warned.
> [    6.621627] bcm2835_mmal_vchiq: module is from the staging directory,
> the quality is unknown, you have been warned.
> [    6.621735] vc4-drm gpu: bound fe207000.pixelvalve (ops vc4_crtc_ops)
> [    6.621970] vc4-drm gpu: bound fe20a000.pixelvalve (ops vc4_crtc_ops)
> [    6.622135] vc4-drm gpu: bound fe216000.pixelvalve (ops vc4_crtc_ops)
> [    6.622343] vc4-drm gpu: bound fec12000.pixelvalve (ops vc4_crtc_ops)
> [    6.643063] [drm] Initialized vc4 0.0.0 20140616 for gpu on minor 0
> [    6.675594] vc4-drm gpu: [drm] Cannot find any crtc or sizes
> [    6.687116] bcm2835_isp: module is from the staging directory, the
> quality is unknown, you have been warned.
> [    6.694354] bcm2835_codec: module is from the staging directory, the
> quality is unknown, you have been warned.
> [    6.701781] bcm2835_v4l2: module is from the staging directory, the
> quality is unknown, you have been warned.
> [  OK  ] Mounted /boot.
> [    6.722939] bcm2835-codec bcm2835-codec: Device registered as
> /dev/video10
> [    6.730296] bcm2835-codec bcm2835-codec: Loaded V4L2 decode
> [    6.738697] bcm2835-codec bcm2835-codec: Device registered as
> /dev/video11
> [    6.745908] bcm2835-codec bcm2835-codec: Loaded V4L2 encode
> [    6.754675] bcm2835-isp bcm2835-isp: Device node output[0] registered
> as /dev/video13
> [    6.765508] bcm2835-isp bcm2835-isp: Device node capture[0] registered
> as /dev/video14
> [    6.776093] bcm2835-isp bcm2835-isp: Device node capture[1] registered
> as /dev/video15
> [    6.777884] bcm2835-codec bcm2835-codec: Device registered as
> /dev/video12
> [    6.792915] bcm2835-codec bcm2835-codec: Loaded V4L2 isp
> [    6.798548] bcm2835-isp bcm2835-isp: Device node stats[2] registered as
> /dev/video16
> [    6.802966] [drm] Initialized v3d 1.0.0 20180419 for fec00000.v3d on
> minor 1
> [    6.810763] bcm2835-isp bcm2835-isp: Register output node 0 with media
> controller
> [  OK      6.822995] bcm2835-codec bcm2835-codec: Device registered as
> /dev/video18
> 0m] Reac[    6.823542] bcm2835-isp bcm2835-isp: Register capture node 1
> with media controller
> hed targ[    6.830924] bcm2835-codec bcm2835-codec: Loaded V4L2 image_fx
> et     6.841425] bcm2835-isp bcm2835-isp: Register capture node 2 with
> media controller
> ;39mLoca[    6.852471] cfg80211: Loading compiled-in X.509 certificates
> for regulatory database
> l File S[    6.853759] bcm2835-isp bcm2835-isp: Register capture node 3
> with media controller
> ystems.
> [    6.873712] bcm2835-isp bcm2835-isp: Loaded V4L2 bcm2835-isp
>          Starting Rebuild Dynamic Linker Cache...
> [    6.895219] cfg80211: Loaded X.509 cert 'sforshee: 00b28ddf47aef9cea7'
>          Starting Create Volatile Files and Directories...
> [  OK  ] Finished Create Volatile Files and Directories.
> [    6.995252] brcmfmac: brcmf_fw_alloc_request: using
> brcm/brcmfmac43455-sdio for chip BCM4345/6
> [    7.007862] usbcore: registered new interface driver brcmfmac
>          Starting Rebuild Journal Catalog...
>          Starting Network Name Resolution...
>          Starting Network Time Synchronization...
>          Starting Record System Boot/Shutdown in UTMP...
> [  OK  ] Finished Rebuild Journal Catalog.
> [  OK  ] Finished Record System Boot/Shutdown in UTMP.
> [    7.290634] brcmfmac: brcmf_fw_alloc_request: using
> brcm/brcmfmac43455-sdio for chip BCM4345/6
> [    7.312992] brcmfmac: brcmf_fw_alloc_request: using
> brcm/brcmfmac43455-sdio for chip BCM4345/6
> [  OK  ] Finished Rebuild Dynamic Linker Cache.
>          Starting Update is Completed...
> [    7.355203] brcmfmac: brcmf_c_preinit_dcmds: Firmware: BCM4345/6 wl0:
> Jan  4 2021 19:56:29 version 7.45.229 (617f1f5 CY) FWID 01-2dbd9d2e
> [  OK  ] Finished Update is Completed.
> [  OK  ] Listening on Load/Save RF …itch Status /dev/rfkill Watch.
>          Starting Load/Save RF Kill Switch Status...
>          Starting Start psplash boot splash screen...
> [FAILED] Failed to start Start psplash boot splash screen.
> See 'systemctl status psplash-start.service' for details.
> [DEPEND] Dependency failed for Star…progress communication helper.
>          Starting Start psplash boot splash screen...
> [FAILED] Failed to start Start psplash boot splash screen.
> See 'systemctl status psplash-start.service' for details.
> [DEPEND] Dependency failed for Star…progress communication helper.
> [  OK  ] Started Load/Save RF Kill Switch Status.
> [  OK  ] Started Network Name Resolution.
> [  OK  ] Found device /sys/subsystem/net/devices/wlan0.
> [    7.821285] random: crng init done
> [    7.824757] random: 7 urandom warning(s) missed due to ratelimiting
> [    7.828150] brcmfmac: brcmf_cfg80211_set_power_mgmt: power save enabled
> [  OK  ] Reached target Host and Network Name Lookups.
> [  OK  ] Started Network Time Synchronization.
> [  OK  ] Finished Load/Save Random Seed.
> [  OK  ] Reached target System Initialization.
> [  OK  ] Started Daily Cleanup of Temporary Directories.
> [  OK  ] Reached target Boot Completion Check.
> [  OK  ] Reached target System Time Set.
> [  OK  ] Reached target Timer Units.
> [  OK  ] Listening on Avahi mDNS/DNS-SD Stack Activation Socket.
> [  OK  ] Listening on D-Bus System Message Bus Socket.
> [  OK  ] Listening on dropbear.socket.
> [  OK  ] Reached target Socket Units.
> [  OK  ] Reached target Basic System.
>          Starting Save/Restore Sound Card State...
>          Starting Avahi mDNS/DNS-SD Stack...
> [  OK  ] Started Kernel Logging Service.
> [  OK  ] Started System Logging Service.
> [  OK  ] Started D-Bus System Message Bus.
> [  OK  ] Started A minimalistic net…Pv4, rdisc and DHCPv6 support.
>          Starting Configure Bluetooth Modems connected by UART...
>          Starting Telephony service...
> [    8.291553] 8021q: 802.1Q VLAN Support v1.8
> [    8.298806] audit: type=1334 audit(1636549116.971:4): prog-id=7 op=LOAD
> [    8.305628] audit: type=1334 audit(1636549116.971:5): prog-id=8 op=LOAD
>         [    8.313826] uart-pl011 fe201000.serial: no DMA platform data
>  Starting User Login Management...
>          Starting Commit a transient machine-id on disk...
> [  OK  ] Started WPA supplicant dae…0211 driver-specific version).
>          Starting WPA supplicant...
> [  OK  ] Finished Save/Restore Sound Card State.
> [  OK  ] Started Telephony service.
> [  OK  ] Started Avahi mDNS/DNS-SD Stack.
> [  OK  ] Reached target Sound Card.
> [  OK  ] Finished Commit a transient machine-id on disk.
> [  OK  ] Started     8.691650] Bluetooth: Core ver 2.22
> 1;39mWPA[    8.696196] NET: Registered protocol family 31
>  supplic[    8.701327] Bluetooth: HCI device and connection manager
> initialized
> ant.[    8.708584] Bluetooth: HCI socket layer initialized
>
> [    8.714452] Bluetooth: L2CAP socket layer initialized
> [    8.719796] Bluetooth: SCO socket layer initialized
> [  OK  ] Reached target Network.
>          Starting Permit User Sessions...
> [  OK  ] Finished Permit User Sessions.
> [  OK  ] Started Getty on tty1.
> [  OK  ] Started Serial Getty on ttyS0.
> [  OK  ] Reached target Login Prompts.
> [  OK  ] Started User Login Management.
> [   14.115352] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
>
> OpenEmbedded nodistro.0 raspberrypi4-64 ttyS0
>
> raspberrypi4-64 login: [   15.048478] Bluetooth: HCI UART driver ver 2.3
> [   15.053073] Bluetooth: HCI UART protocol H4 registered
> [   15.058615] Bluetooth: HCI UART protocol Three-wire (H5) registered
> [   15.065454] Bluetooth: HCI UART protocol Broadcom registered
> [   15.324220] Bluetooth: BNEP (Ethernet Emulation) ver 1.3
> [   15.329743] Bluetooth: BNEP filters: protocol multicast
> [   15.335314] Bluetooth: BNEP socket layer initialized
> [   15.355534] NET: Registered protocol family 38
> [   15.366165] audit: type=1334 audit(1645960582.023:6): prog-id=9 op=LOAD
> [   15.373243] audit: type=1334 audit(1645960582.023:7): prog-id=10 op=LOAD
> [   15.447440] Bluetooth: RFCOMM TTY layer initialized
> [   15.452487] Bluetooth: RFCOMM socket layer initialized
> [   15.457947] Bluetooth: RFCOMM ver 1.11
> [   49.149033] audit: type=1334 audit(1645960615.807:8): prog-id=10
> op=UNLOAD
> [   49.156083] audit: type=1334 audit(1645960615.807:9): prog-id=9
> op=UNLOAD
>
>
> And it's stuck here.
>
> And it is also complaning about
>
> [    3.640033] systemd-fstab-generator[107]: Failed to create unit file
> /run/systemd/generator/boot.mount, as it already exists. Duplicate entry in
> /etc/fstab?
> [    3.699053] systemd[105]:
> /lib/systemd/system-generators/systemd-fstab-generator failed with exit
> status 1.
>
>
> My fstab looks like:
>
> # stock fstab - you probably want to override this with a machine specific
> one
>
> /dev/root            /                    auto       defaults
> 1  1
> proc                 /proc                proc       defaults
> 0  0
> devpts               /dev/pts             devpts
> mode=0620,ptmxmode=0666,gid=5      0  0
> tmpfs                /run                 tmpfs
> mode=0755,nodev,nosuid,strictatime 0  0
> tmpfs                /var/volatile        tmpfs      defaults
> 0  0
>
> # uncomment this if your device has a SD/MMC/Transflash slot
> #/dev/mmcblk0p1       /media/card          auto
> defaults,sync,noauto  0  0
>
> /dev/mmcblk0p1  /boot   vfat    defaults        0       0
>
>
>
> Can you please let me know what could be the issue here and how to resolve
> it?
>

You can press bunch of carriage returns and try to login on this series
console with the username password you have that will get you further and
can check if ssh service is running and network is up or not using ifconfig
-a

>
>
> Your help will be much appreciated.
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> You automatically follow any topics you start or reply to.
> View/Reply Online (#56298):
> https://lists.yoctoproject.org/g/yocto/message/56298
> Unfollow This Topic: https://lists.yoctoproject.org/unft/89328890/1997914
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [
> raj.khem@gmail.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>
>

[-- Attachment #2: Type: text/html, Size: 40810 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
end of thread, other threads:[~2022-02-28  2:41 UTC | newest]

Thread overview: 7+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2022-02-22 22:35 Building Yocto images for RPi CM4 Sourabh Hegde
2022-02-22 22:46 ` [yocto] " Khem Raj
2022-02-23  7:07   ` Sourabh Hegde
2022-02-23 17:47     ` [yocto] " Khem Raj
2022-02-23 20:18       ` Sourabh Hegde
2022-02-27 11:42         ` Sourabh Hegde
2022-02-28  2:40           ` [yocto] " Khem Raj

