* [meta-zephyr][PATCH v2 1/5] zephyr-kernel-src: add support for v3.2.0
@ 2022-11-10  7:09 Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 2/5] zephyr-kernel-src: drop support for v2.7.3 Naveen Saini
                   ` (3 more replies)
  0 siblings, 4 replies; 5+ messages in thread
From: Naveen Saini @ 2022-11-10  7:09 UTC (permalink / raw)
  To: yocto

https://github.com/zephyrproject-rtos/zephyr/releases/tag/v3.2.0

Signed-off-by: Naveen Saini <naveen.kumar.saini@intel.com>
---
 .../zephyr-kernel/zephyr-kernel-src-3.2.0.inc | 239 ++++++++++++++++++
 .../zephyr-kernel/zephyr-kernel-src.inc       |   2 +-
 2 files changed, 240 insertions(+), 1 deletion(-)
 create mode 100644 meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-3.2.0.inc

diff --git a/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-3.2.0.inc b/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-3.2.0.inc
new file mode 100644
index 0000000..5d8ddfa
--- /dev/null
+++ b/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-3.2.0.inc
@@ -0,0 +1,239 @@
+# Auto-generated from zephyr-kernel-src.inc.jinja
+
+SRCREV_FORMAT = "default"
+
+SRCREV_default = "4b58ae97f30338dd343f110fef068b21b94b6555"
+SRCREV_canopennode = "53d3415c14d60f8f4bfca54bfbc5d5a667d7e724"
+SRCREV_chre = "ef76d3456db07e4959df555047d6962279528c8d"
+SRCREV_cmsis = "093de61c2a7d12dc9253daf8692f61f793a9254a"
+SRCREV_edtt = "1ea61a390d2bfcf3b2ecdba8f8b0b98dfdffbd11"
+SRCREV_fatfs = "a30531af3a95a9a3ea7d771ea8a578ebfed45514"
+SRCREV_fff = "6ce5ba26486e93d5b7696a3e23f0585932c14b16"
+SRCREV_hal_altera = "0d225ddd314379b32355a00fb669eacf911e750d"
+SRCREV_hal_atmel = "1d237f2e2f262751975b6da6e03af569b2b49b2b"
+SRCREV_hal_espressif = "2cb20ac6c5b25f3c91b35e7997451db47030b7cb"
+SRCREV_hal_gigadevice = "dd0e0322474462b58059e6fedaf1d67d2a0864d0"
+SRCREV_hal_infineon = "4af06965f57ba1e7d170e6a97d24c33785543a8c"
+SRCREV_hal_microchip = "5d079f1683a00b801373bbbbf5d181d4e33b30d5"
+SRCREV_hal_nordic = "249199ec5a5c31d170659921048764e96d05cc0e"
+SRCREV_hal_nuvoton = "b4d31f33238713a568e23618845702fadd67386f"
+SRCREV_hal_nxp = "708c95825b0d5279620935a1356299fff5dfbc6e"
+SRCREV_hal_openisa = "40d049f69c50b58ea20473bee14cf93f518bf262"
+SRCREV_hal_quicklogic = "b3a66fe6d04d87fd1533a5c8de51d0599fcd08d0"
+SRCREV_hal_renesas = "468d3f2146d18c7f86a4640fc641cc1d20a4a100"
+SRCREV_hal_rpi_pico = "a094c060e0c2d43c7f9d8f5c06cc0665117e0c18"
+SRCREV_hal_silabs = "1ec8dd99aa4ac3e8632d2aa28a7438049bb27102"
+SRCREV_hal_st = "cccbc24c14decfd3f93959f7b14514536af973c7"
+SRCREV_hal_stm32 = "642e199c59828137dc6b1c7044a289d4269886d1"
+SRCREV_hal_telink = "38573af589173259801ae6c2b34b7d4c9e626746"
+SRCREV_hal_ti = "000b944a788b6005d7776198e1348f5c8a657259"
+SRCREV_hal_wurthelektronik = "24ca9873c3d608fad1fea0431836bc8f144c132e"
+SRCREV_hal_xtensa = "63f655362423aa49507da7977a2d37142e8debeb"
+SRCREV_libmetal = "2f586b4f1276fb075ee145421bdf6cbe5403aa41"
+SRCREV_liblc3 = "448f3de31f49a838988a162ef1e23a89ddf2d2ed"
+SRCREV_littlefs = "ca583fd297ceb48bced3c2548600dc615d67af24"
+SRCREV_loramac-node = "ce57712f3e426bbbb13acaec97b45369f716f43a"
+SRCREV_lvgl = "af95bdfcf6784edd958ea08139c713e2d3dee7af"
+SRCREV_lz4 = "8e303c264fc21c2116dc612658003a22e933124d"
+SRCREV_mbedtls = "7fed49c9b9f983ad6416986661ef637459723bcb"
+SRCREV_mcuboot = "13f63976bca672ee018f9d55f1e31f02f4135b64"
+SRCREV_mipi-sys-t = "0d521d8055f3b2b4842f728b0365d3f0ece9c37f"
+SRCREV_nanopb = "dc4deed54fd4c7e1935e3b6387eedf21bb45dc38"
+SRCREV_net-tools = "e0828aa9629b533644dc96ff6d1295c939bd713c"
+SRCREV_nrf_hw_models = "65bc5305d432c08e24a3f343006d1e7deaff4908"
+SRCREV_open-amp = "8d53544871e1f300c478224faca6be8384ab0d04"
+SRCREV_openthread = "b21e99b4b3d823f71c902b9174ff62b964c124f0"
+SRCREV_picolibc = "04ada5951cbaf8e7b17f8226ce31cb6837c28ba7"
+SRCREV_segger = "d4e568a920b4bd087886170a5624c167b2d0665e"
+SRCREV_sof = "fed466c264ad078c66f7bff9218ba1d3fa0eb201"
+SRCREV_tflite-micro = "9156d050927012da87079064db59d07f03b8baf6"
+SRCREV_tinycbor = "9e1f34bc08123aaad7666d3652aaa839e8178b3b"
+SRCREV_tinycrypt = "3e9a49d2672ec01435ffbf0d788db6d95ef28de0"
+SRCREV_TraceRecorderSource = "9893bf1cf649a2c4ee2e27293f887994f3d0da5b"
+SRCREV_trusted-firmware-m = "231235f26f5295ac4faf8c5617dbb9779869d821"
+SRCREV_trusted-firmware-a = "d29cddecde614d81cbec1fb0086cdaebd77d3575"
+SRCREV_tf-m-tests = "c99a86b295c4887520da9d8402566d7f225c974e"
+SRCREV_psa-arch-tests = "f4fc2442b8e29e2a03d9899e46e5a3ea3df8c2c9"
+SRCREV_uoscore-uedhoc = "e8920192b66db4f909eb9cd3f155d5245c1ae825"
+SRCREV_zcbor = "a0d6981f14d4001d6f0d608d1a427f9bc6bb6d02"
+SRCREV_zscilib = "ca070ddabdaf67175a2da901d0bd62e8899371c5"
+
+SRC_URI_ZEPHYR ?= "git://github.com/zephyrproject-rtos/zephyr.git;protocol=https"
+SRC_URI_CANOPENNODE ?= "git://github.com/zephyrproject-rtos/canopennode;protocol=https"
+SRC_URI_CHRE ?= "git://github.com/zephyrproject-rtos/chre;protocol=https"
+SRC_URI_CMSIS ?= "git://github.com/zephyrproject-rtos/cmsis;protocol=https"
+SRC_URI_EDTT ?= "git://github.com/zephyrproject-rtos/edtt;protocol=https"
+SRC_URI_FATFS ?= "git://github.com/zephyrproject-rtos/fatfs;protocol=https"
+SRC_URI_FFF ?= "git://github.com/zephyrproject-rtos/fff;protocol=https"
+SRC_URI_HAL_ALTERA ?= "git://github.com/zephyrproject-rtos/hal_altera;protocol=https"
+SRC_URI_HAL_ATMEL ?= "git://github.com/zephyrproject-rtos/hal_atmel;protocol=https"
+SRC_URI_HAL_ESPRESSIF ?= "git://github.com/zephyrproject-rtos/hal_espressif;protocol=https"
+SRC_URI_HAL_GIGADEVICE ?= "git://github.com/zephyrproject-rtos/hal_gigadevice;protocol=https"
+SRC_URI_HAL_INFINEON ?= "git://github.com/zephyrproject-rtos/hal_infineon;protocol=https"
+SRC_URI_HAL_MICROCHIP ?= "git://github.com/zephyrproject-rtos/hal_microchip;protocol=https"
+SRC_URI_HAL_NORDIC ?= "git://github.com/zephyrproject-rtos/hal_nordic;protocol=https"
+SRC_URI_HAL_NUVOTON ?= "git://github.com/zephyrproject-rtos/hal_nuvoton;protocol=https"
+SRC_URI_HAL_NXP ?= "git://github.com/zephyrproject-rtos/hal_nxp;protocol=https"
+SRC_URI_HAL_OPENISA ?= "git://github.com/zephyrproject-rtos/hal_openisa;protocol=https"
+SRC_URI_HAL_QUICKLOGIC ?= "git://github.com/zephyrproject-rtos/hal_quicklogic;protocol=https"
+SRC_URI_HAL_RENESAS ?= "git://github.com/zephyrproject-rtos/hal_renesas;protocol=https"
+SRC_URI_HAL_RPI_PICO ?= "git://github.com/zephyrproject-rtos/hal_rpi_pico;protocol=https"
+SRC_URI_HAL_SILABS ?= "git://github.com/zephyrproject-rtos/hal_silabs;protocol=https"
+SRC_URI_HAL_ST ?= "git://github.com/zephyrproject-rtos/hal_st;protocol=https"
+SRC_URI_HAL_STM32 ?= "git://github.com/zephyrproject-rtos/hal_stm32;protocol=https"
+SRC_URI_HAL_TELINK ?= "git://github.com/zephyrproject-rtos/hal_telink;protocol=https"
+SRC_URI_HAL_TI ?= "git://github.com/zephyrproject-rtos/hal_ti;protocol=https"
+SRC_URI_HAL_WURTHELEKTRONIK ?= "git://github.com/zephyrproject-rtos/hal_wurthelektronik;protocol=https"
+SRC_URI_HAL_XTENSA ?= "git://github.com/zephyrproject-rtos/hal_xtensa;protocol=https"
+SRC_URI_LIBMETAL ?= "git://github.com/zephyrproject-rtos/libmetal;protocol=https"
+SRC_URI_LIBLC3 ?= "git://github.com/zephyrproject-rtos/liblc3;protocol=https"
+SRC_URI_LITTLEFS ?= "git://github.com/zephyrproject-rtos/littlefs;protocol=https"
+SRC_URI_LORAMAC_NODE ?= "git://github.com/zephyrproject-rtos/loramac-node;protocol=https"
+SRC_URI_LVGL ?= "git://github.com/zephyrproject-rtos/lvgl;protocol=https"
+SRC_URI_LZ4 ?= "git://github.com/zephyrproject-rtos/lz4;protocol=https"
+SRC_URI_MBEDTLS ?= "git://github.com/zephyrproject-rtos/mbedtls;protocol=https"
+SRC_URI_MCUBOOT ?= "git://github.com/zephyrproject-rtos/mcuboot;protocol=https"
+SRC_URI_MIPI_SYS_T ?= "git://github.com/zephyrproject-rtos/mipi-sys-t;protocol=https"
+SRC_URI_NANOPB ?= "git://github.com/zephyrproject-rtos/nanopb;protocol=https"
+SRC_URI_NET_TOOLS ?= "git://github.com/zephyrproject-rtos/net-tools;protocol=https"
+SRC_URI_NRF_HW_MODELS ?= "git://github.com/zephyrproject-rtos/nrf_hw_models;protocol=https"
+SRC_URI_OPEN_AMP ?= "git://github.com/zephyrproject-rtos/open-amp;protocol=https"
+SRC_URI_OPENTHREAD ?= "git://github.com/zephyrproject-rtos/openthread;protocol=https"
+SRC_URI_PICOLIBC ?= "git://github.com/zephyrproject-rtos/picolibc;protocol=https"
+SRC_URI_SEGGER ?= "git://github.com/zephyrproject-rtos/segger;protocol=https"
+SRC_URI_SOF ?= "git://github.com/zephyrproject-rtos/sof;protocol=https"
+SRC_URI_TFLITE_MICRO ?= "git://github.com/zephyrproject-rtos/tflite-micro;protocol=https"
+SRC_URI_TINYCBOR ?= "git://github.com/zephyrproject-rtos/tinycbor;protocol=https"
+SRC_URI_TINYCRYPT ?= "git://github.com/zephyrproject-rtos/tinycrypt;protocol=https"
+SRC_URI_TRACERECORDERSOURCE ?= "git://github.com/zephyrproject-rtos/TraceRecorderSource;protocol=https"
+SRC_URI_TRUSTED_FIRMWARE_M ?= "git://github.com/zephyrproject-rtos/trusted-firmware-m;protocol=https"
+SRC_URI_TRUSTED_FIRMWARE_A ?= "git://github.com/zephyrproject-rtos/trusted-firmware-a;protocol=https"
+SRC_URI_TF_M_TESTS ?= "git://github.com/zephyrproject-rtos/tf-m-tests;protocol=https"
+SRC_URI_PSA_ARCH_TESTS ?= "git://github.com/zephyrproject-rtos/psa-arch-tests;protocol=https"
+SRC_URI_UOSCORE_UEDHOC ?= "git://github.com/zephyrproject-rtos/uoscore-uedhoc;protocol=https"
+SRC_URI_ZCBOR ?= "git://github.com/zephyrproject-rtos/zcbor;protocol=https"
+SRC_URI_ZSCILIB ?= "git://github.com/zephyrproject-rtos/zscilib;protocol=https"
+
+SRC_URI_PATCHES ?= "\
+    file://0001-3.1-cmake-add-yocto-toolchain.patch;patchdir=zephyr \
+    file://0001-3.1-x86-fix-efi-binary-generation-issue-in-cross-compila.patch;patchdir=zephyr \
+"
+
+SRC_URI = "\
+    ${SRC_URI_ZEPHYR};branch=${ZEPHYR_BRANCH};name=default;destsuffix=git/zephyr \
+    ${SRC_URI_CANOPENNODE};name=canopennode;nobranch=1;destsuffix=git/modules/lib/canopennode \
+    ${SRC_URI_CHRE};name=chre;nobranch=1;destsuffix=git/modules/lib/chre \
+    ${SRC_URI_CMSIS};name=cmsis;nobranch=1;destsuffix=git/modules/hal/cmsis \
+    ${SRC_URI_EDTT};name=edtt;nobranch=1;destsuffix=git/tools/edtt \
+    ${SRC_URI_FATFS};name=fatfs;nobranch=1;destsuffix=git/modules/fs/fatfs \
+    ${SRC_URI_FFF};name=fff;nobranch=1;destsuffix=git/modules/lib/fff \
+    ${SRC_URI_HAL_ALTERA};name=hal_altera;nobranch=1;destsuffix=git/modules/hal/altera \
+    ${SRC_URI_HAL_ATMEL};name=hal_atmel;nobranch=1;destsuffix=git/modules/hal/atmel \
+    ${SRC_URI_HAL_ESPRESSIF};name=hal_espressif;nobranch=1;destsuffix=git/modules/hal/espressif \
+    ${SRC_URI_HAL_GIGADEVICE};name=hal_gigadevice;nobranch=1;destsuffix=git/modules/hal/gigadevice \
+    ${SRC_URI_HAL_INFINEON};name=hal_infineon;nobranch=1;destsuffix=git/modules/hal/infineon \
+    ${SRC_URI_HAL_MICROCHIP};name=hal_microchip;nobranch=1;destsuffix=git/modules/hal/microchip \
+    ${SRC_URI_HAL_NORDIC};name=hal_nordic;nobranch=1;destsuffix=git/modules/hal/nordic \
+    ${SRC_URI_HAL_NUVOTON};name=hal_nuvoton;nobranch=1;destsuffix=git/modules/hal/nuvoton \
+    ${SRC_URI_HAL_NXP};name=hal_nxp;nobranch=1;destsuffix=git/modules/hal/nxp \
+    ${SRC_URI_HAL_OPENISA};name=hal_openisa;nobranch=1;destsuffix=git/modules/hal/openisa \
+    ${SRC_URI_HAL_QUICKLOGIC};name=hal_quicklogic;nobranch=1;destsuffix=git/modules/hal/quicklogic \
+    ${SRC_URI_HAL_RENESAS};name=hal_renesas;nobranch=1;destsuffix=git/modules/hal/renesas \
+    ${SRC_URI_HAL_RPI_PICO};name=hal_rpi_pico;nobranch=1;destsuffix=git/modules/hal/rpi_pico \
+    ${SRC_URI_HAL_SILABS};name=hal_silabs;nobranch=1;destsuffix=git/modules/hal/silabs \
+    ${SRC_URI_HAL_ST};name=hal_st;nobranch=1;destsuffix=git/modules/hal/st \
+    ${SRC_URI_HAL_STM32};name=hal_stm32;nobranch=1;destsuffix=git/modules/hal/stm32 \
+    ${SRC_URI_HAL_TELINK};name=hal_telink;nobranch=1;destsuffix=git/modules/hal/telink \
+    ${SRC_URI_HAL_TI};name=hal_ti;nobranch=1;destsuffix=git/modules/hal/ti \
+    ${SRC_URI_HAL_WURTHELEKTRONIK};name=hal_wurthelektronik;nobranch=1;destsuffix=git/modules/hal/wurthelektronik \
+    ${SRC_URI_HAL_XTENSA};name=hal_xtensa;nobranch=1;destsuffix=git/modules/hal/xtensa \
+    ${SRC_URI_LIBMETAL};name=libmetal;nobranch=1;destsuffix=git/modules/hal/libmetal \
+    ${SRC_URI_LIBLC3};name=liblc3;nobranch=1;destsuffix=git/modules/lib/liblc3 \
+    ${SRC_URI_LITTLEFS};name=littlefs;nobranch=1;destsuffix=git/modules/fs/littlefs \
+    ${SRC_URI_LORAMAC_NODE};name=loramac-node;nobranch=1;destsuffix=git/modules/lib/loramac-node \
+    ${SRC_URI_LVGL};name=lvgl;nobranch=1;destsuffix=git/modules/lib/gui/lvgl \
+    ${SRC_URI_LZ4};name=lz4;nobranch=1;destsuffix=git/modules/lib/lz4 \
+    ${SRC_URI_MBEDTLS};name=mbedtls;nobranch=1;destsuffix=git/modules/crypto/mbedtls \
+    ${SRC_URI_MCUBOOT};name=mcuboot;nobranch=1;destsuffix=git/bootloader/mcuboot \
+    ${SRC_URI_MIPI_SYS_T};name=mipi-sys-t;nobranch=1;destsuffix=git/modules/debug/mipi-sys-t \
+    ${SRC_URI_NANOPB};name=nanopb;nobranch=1;destsuffix=git/modules/lib/nanopb \
+    ${SRC_URI_NET_TOOLS};name=net-tools;nobranch=1;destsuffix=git/tools/net-tools \
+    ${SRC_URI_NRF_HW_MODELS};name=nrf_hw_models;nobranch=1;destsuffix=git/modules/bsim_hw_models/nrf_hw_models \
+    ${SRC_URI_OPEN_AMP};name=open-amp;nobranch=1;destsuffix=git/modules/lib/open-amp \
+    ${SRC_URI_OPENTHREAD};name=openthread;nobranch=1;destsuffix=git/modules/lib/openthread \
+    ${SRC_URI_PICOLIBC};name=picolibc;nobranch=1;destsuffix=git/modules/lib/picolibc \
+    ${SRC_URI_SEGGER};name=segger;nobranch=1;destsuffix=git/modules/debug/segger \
+    ${SRC_URI_SOF};name=sof;nobranch=1;destsuffix=git/modules/audio/sof \
+    ${SRC_URI_TFLITE_MICRO};name=tflite-micro;nobranch=1;destsuffix=git/modules/lib/tflite-micro \
+    ${SRC_URI_TINYCBOR};name=tinycbor;nobranch=1;destsuffix=git/modules/lib/tinycbor \
+    ${SRC_URI_TINYCRYPT};name=tinycrypt;nobranch=1;destsuffix=git/modules/crypto/tinycrypt \
+    ${SRC_URI_TRACERECORDERSOURCE};name=TraceRecorderSource;nobranch=1;destsuffix=git/modules/debug/TraceRecorder \
+    ${SRC_URI_TRUSTED_FIRMWARE_M};name=trusted-firmware-m;nobranch=1;destsuffix=git/modules/tee/tf-m/trusted-firmware-m \
+    ${SRC_URI_TRUSTED_FIRMWARE_A};name=trusted-firmware-a;nobranch=1;destsuffix=git/modules/tee/tf-a/trusted-firmware-a \
+    ${SRC_URI_TF_M_TESTS};name=tf-m-tests;nobranch=1;destsuffix=git/modules/tee/tf-m/tf-m-tests \
+    ${SRC_URI_PSA_ARCH_TESTS};name=psa-arch-tests;nobranch=1;destsuffix=git/modules/tee/tf-m/psa-arch-tests \
+    ${SRC_URI_UOSCORE_UEDHOC};name=uoscore-uedhoc;nobranch=1;destsuffix=git/modules/lib/uoscore-uedhoc \
+    ${SRC_URI_ZCBOR};name=zcbor;nobranch=1;destsuffix=git/modules/lib/zcbor \
+    ${SRC_URI_ZSCILIB};name=zscilib;nobranch=1;destsuffix=git/modules/lib/zscilib \
+    ${SRC_URI_PATCHES} \
+"
+
+ZEPHYR_MODULES = "\
+${S}/modules/lib/canopennode\;\
+${S}/modules/lib/chre\;\
+${S}/modules/hal/cmsis\;\
+${S}/tools/edtt\;\
+${S}/modules/fs/fatfs\;\
+${S}/modules/lib/fff\;\
+${S}/modules/hal/altera\;\
+${S}/modules/hal/atmel\;\
+${S}/modules/hal/espressif\;\
+${S}/modules/hal/gigadevice\;\
+${S}/modules/hal/infineon\;\
+${S}/modules/hal/microchip\;\
+${S}/modules/hal/nordic\;\
+${S}/modules/hal/nuvoton\;\
+${S}/modules/hal/nxp\;\
+${S}/modules/hal/openisa\;\
+${S}/modules/hal/quicklogic\;\
+${S}/modules/hal/renesas\;\
+${S}/modules/hal/rpi_pico\;\
+${S}/modules/hal/silabs\;\
+${S}/modules/hal/st\;\
+${S}/modules/hal/stm32\;\
+${S}/modules/hal/telink\;\
+${S}/modules/hal/ti\;\
+${S}/modules/hal/wurthelektronik\;\
+${S}/modules/hal/xtensa\;\
+${S}/modules/hal/libmetal\;\
+${S}/modules/lib/liblc3\;\
+${S}/modules/fs/littlefs\;\
+${S}/modules/lib/loramac-node\;\
+${S}/modules/lib/gui/lvgl\;\
+${S}/modules/lib/lz4\;\
+${S}/modules/crypto/mbedtls\;\
+${S}/bootloader/mcuboot\;\
+${S}/modules/debug/mipi-sys-t\;\
+${S}/modules/lib/nanopb\;\
+${S}/tools/net-tools\;\
+${S}/modules/bsim_hw_models/nrf_hw_models\;\
+${S}/modules/lib/open-amp\;\
+${S}/modules/lib/openthread\;\
+${S}/modules/lib/picolibc\;\
+${S}/modules/debug/segger\;\
+${S}/modules/audio/sof\;\
+${S}/modules/lib/tflite-micro\;\
+${S}/modules/lib/tinycbor\;\
+${S}/modules/crypto/tinycrypt\;\
+${S}/modules/debug/TraceRecorder\;\
+${S}/modules/tee/tf-m/trusted-firmware-m\;\
+${S}/modules/tee/tf-a/trusted-firmware-a\;\
+${S}/modules/tee/tf-m/tf-m-tests\;\
+${S}/modules/tee/tf-m/psa-arch-tests\;\
+${S}/modules/lib/uoscore-uedhoc\;\
+${S}/modules/lib/zcbor\;\
+${S}/modules/lib/zscilib\;\
+"
+
+ZEPHYR_BRANCH = "v3.2-branch"
+PV = "3.2.0+git${SRCPV}"
diff --git a/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src.inc b/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src.inc
index f28d1d4..aa299e0 100644
--- a/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src.inc
+++ b/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src.inc
@@ -12,5 +12,5 @@ FILESEXTRAPATHS:prepend := "${THISDIR}/files:"
 S = "${WORKDIR}/git"
 
 # Default to a stable version
-PREFERRED_VERSION_zephyr-kernel ??= "3.1.0"
+PREFERRED_VERSION_zephyr-kernel ??= "3.2.0"
 include zephyr-kernel-src-${PREFERRED_VERSION_zephyr-kernel}.inc
-- 
2.25.1



^ permalink raw reply related	[flat|nested] 5+ messages in thread
* [meta-zephyr][PATCH v2 2/5] zephyr-kernel-src: drop support for v2.7.3
  2022-11-10  7:09 [meta-zephyr][PATCH v2 1/5] zephyr-kernel-src: add support for v3.2.0 Naveen Saini
@ 2022-11-10  7:09 ` Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 3/5] zephyr-sdk: upgrade 0.14.2 -> 0.15.1 Naveen Saini
                   ` (2 subsequent siblings)
  3 siblings, 0 replies; 5+ messages in thread
From: Naveen Saini @ 2022-11-10  7:09 UTC (permalink / raw)
  To: yocto

Support for zephyr v3.2.0 is already being added. So time to drop it.

Signed-off-by: Naveen Saini <naveen.kumar.saini@intel.com>
---
 .../0001-2.7-cmake-add-yocto-toolchain.patch  |  63 ------
 ...ry-generation-issue-in-cross-compila.patch |  80 -------
 .../zephyr-kernel/files/dtc.patch             |  43 ----
 .../zephyr-kernel/zephyr-kernel-src-2.7.3.inc | 196 ------------------
 4 files changed, 382 deletions(-)
 delete mode 100644 meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-cmake-add-yocto-toolchain.patch
 delete mode 100644 meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-x86-fix-efi-binary-generation-issue-in-cross-compila.patch
 delete mode 100644 meta-zephyr-core/recipes-kernel/zephyr-kernel/files/dtc.patch
 delete mode 100644 meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-2.7.3.inc

diff --git a/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-cmake-add-yocto-toolchain.patch b/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-cmake-add-yocto-toolchain.patch
deleted file mode 100644
index 563af7d..0000000
--- a/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-cmake-add-yocto-toolchain.patch
+++ /dev/null
@@ -1,63 +0,0 @@
-From bfab268c870548e3e7a24ea67ebed2a0513b2307 Mon Sep 17 00:00:00 2001
-From: Naveen Saini <naveen.kumar.saini@intel.com>
-Date: Wed, 7 Jul 2021 13:53:05 +0800
-Subject: [PATCH] cmake: add yocto toolchain
-
-Upstream status: inappropriate [OE specific]
-
-Signed-off-by: Naveen Saini <naveen.kumar.saini@intel.com>
----
- cmake/compiler/gcc/target.cmake     |  7 -------
- cmake/toolchain/yocto/generic.cmake | 13 +++++++++++++
- cmake/toolchain/yocto/target.cmake  |  1 +
- 3 files changed, 14 insertions(+), 7 deletions(-)
- create mode 100644 cmake/toolchain/yocto/generic.cmake
- create mode 100644 cmake/toolchain/yocto/target.cmake
-
-diff --git a/cmake/compiler/gcc/target.cmake b/cmake/compiler/gcc/target.cmake
-index 2b90c5d2ef..b6f28b2f87 100644
---- a/cmake/compiler/gcc/target.cmake
-+++ b/cmake/compiler/gcc/target.cmake
-@@ -68,13 +68,6 @@ execute_process(
-   OUTPUT_STRIP_TRAILING_WHITESPACE
-   )
- 
--assert_exists(LIBGCC_FILE_NAME)
--
--get_filename_component(LIBGCC_DIR ${LIBGCC_FILE_NAME} DIRECTORY)
--
--assert_exists(LIBGCC_DIR)
--
--LIST(APPEND LIB_INCLUDE_DIR "-L\"${LIBGCC_DIR}\"")
- LIST(APPEND TOOLCHAIN_LIBS gcc)
- 
- if(SYSROOT_DIR)
-diff --git a/cmake/toolchain/yocto/generic.cmake b/cmake/toolchain/yocto/generic.cmake
-new file mode 100644
-index 0000000000..45e5777e2a
---- /dev/null
-+++ b/cmake/toolchain/yocto/generic.cmake
-@@ -0,0 +1,13 @@
-+set(COMPILER gcc)
-+set(LINKER ld)
-+set(BINTOOLS gnu)
-+
-+set(ZEPHYR_SYSROOT ${ZEPHYR_SYSROOT})
-+set(SYSROOT_DIR ${ZEPHYR_SYSROOT})
-+set(LIBC_LIBRARY_DIR "\"${SYSROOT_DIR}\"/")
-+set(LIBC_INCLUDE_DIR ${SYSROOT_DIR}/include)
-+LIST(APPEND TOOLCHAIN_LIBS gcc)
-+
-+LIST(APPEND LIB_INCLUDE_DIR "-L\"${STAGING_LIBDIR}\"")
-+
-+set(TOOLCHAIN_LIBS gcc)
-diff --git a/cmake/toolchain/yocto/target.cmake b/cmake/toolchain/yocto/target.cmake
-new file mode 100644
-index 0000000000..9881313609
---- /dev/null
-+++ b/cmake/toolchain/yocto/target.cmake
-@@ -0,0 +1 @@
-+# SPDX-License-Identifier: Apache-2.0
--- 
-2.17.1
-
diff --git a/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-x86-fix-efi-binary-generation-issue-in-cross-compila.patch b/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-x86-fix-efi-binary-generation-issue-in-cross-compila.patch
deleted file mode 100644
index fd6fc6b..0000000
--- a/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/0001-2.7-x86-fix-efi-binary-generation-issue-in-cross-compila.patch
+++ /dev/null
@@ -1,80 +0,0 @@
-From cfde3b1018c3151b6cc1fbe3e9e163d0aaf16954 Mon Sep 17 00:00:00 2001
-From: Naveen Saini <naveen.kumar.saini@intel.com>
-Date: Tue, 11 May 2021 13:46:39 +0800
-Subject: [PATCH] x86: fix efi binary generation issue in cross compilation env
-
-Set root directory for headers.
-
-Upstream-Status: Inappropriate [Cross-compilation specific]
-
-Signed-off-by: Naveen Saini <naveen.kumar.saini@intel.com>
----
- arch/x86/zefi/zefi.py                | 6 +++++-
- boards/x86/ehl_crb/CMakeLists.txt    | 1 +
- boards/x86/qemu_x86/CMakeLists.txt   | 1 +
- boards/x86/up_squared/CMakeLists.txt | 1 +
- 4 files changed, 8 insertions(+), 1 deletion(-)
-
-diff --git a/arch/x86/zefi/zefi.py b/arch/x86/zefi/zefi.py
-index d3514391a8..b9eccbfa10 100755
---- a/arch/x86/zefi/zefi.py
-+++ b/arch/x86/zefi/zefi.py
-@@ -106,7 +106,10 @@ def build_elf(elf_file):
-     #  + We need pic to enforce that the linker adds no relocations
-     #  + UEFI can take interrupts on our stack, so no red zone
-     #  + UEFI API assumes 16-bit wchar_t
--    cmd = [args.compiler, "-shared", "-Wall", "-Werror", "-I.",
-+
-+    #  Pass --sysroot path for cross compilation
-+    sysrootarg = "--sysroot=" + args.sysroot
-+    cmd = [args.compiler, "-shared", "-Wall", "-Werror", "-I.", sysrootarg,
-         "-fno-stack-protector", "-fpic", "-mno-red-zone", "-fshort-wchar",
-         "-Wl,-nostdlib", "-T", ldscript, "-o", "zefi.elf", cfile]
-     verbose(" ".join(cmd))
-@@ -145,6 +148,7 @@ def parse_args():
-     parser.add_argument("-o", "--objcopy", required=True, help="objcopy to be used")
-     parser.add_argument("-f", "--elf-file", required=True, help="Input file")
-     parser.add_argument("-v", "--verbose", action="store_true", help="Verbose output")
-+    parser.add_argument("-s", "--sysroot", required=True, help="Cross compilation --sysroot=path")
- 
-     return parser.parse_args()
- 
-diff --git a/boards/x86/ehl_crb/CMakeLists.txt b/boards/x86/ehl_crb/CMakeLists.txt
-index 0d572eff30..6a228107dc 100644
---- a/boards/x86/ehl_crb/CMakeLists.txt
-+++ b/boards/x86/ehl_crb/CMakeLists.txt
-@@ -5,6 +5,7 @@ set_property(GLOBAL APPEND PROPERTY extra_post_build_commands
-   -c ${CMAKE_C_COMPILER}
-   -o ${CMAKE_OBJCOPY}
-   -f ${PROJECT_BINARY_DIR}/${CONFIG_KERNEL_BIN_NAME}.elf
-+  -s ${SYSROOT_DIR}
-   $<$<BOOL:${CMAKE_VERBOSE_MAKEFILE}>:--verbose>
-   WORKING_DIRECTORY ${PROJECT_BINARY_DIR}
- )
-diff --git a/boards/x86/qemu_x86/CMakeLists.txt b/boards/x86/qemu_x86/CMakeLists.txt
-index 1131a5c7ce..489f17192b 100644
---- a/boards/x86/qemu_x86/CMakeLists.txt
-+++ b/boards/x86/qemu_x86/CMakeLists.txt
-@@ -4,6 +4,7 @@ set_property(GLOBAL APPEND PROPERTY extra_post_build_commands
-   -c ${CMAKE_C_COMPILER}
-   -o ${CMAKE_OBJCOPY}
-   -f ${PROJECT_BINARY_DIR}/${CONFIG_KERNEL_BIN_NAME}.elf
-+  -s ${SYSROOT_DIR}
-   $<$<BOOL:${CMAKE_VERBOSE_MAKEFILE}>:--verbose>
-   WORKING_DIRECTORY ${PROJECT_BINARY_DIR}
- )
-diff --git a/boards/x86/up_squared/CMakeLists.txt b/boards/x86/up_squared/CMakeLists.txt
-index 0eaa9753fc..2e8ce7cfbc 100644
---- a/boards/x86/up_squared/CMakeLists.txt
-+++ b/boards/x86/up_squared/CMakeLists.txt
-@@ -5,6 +5,7 @@ set_property(GLOBAL APPEND PROPERTY extra_post_build_commands
-   -c ${CMAKE_C_COMPILER}
-   -o ${CMAKE_OBJCOPY}
-   -f ${PROJECT_BINARY_DIR}/${CONFIG_KERNEL_BIN_NAME}.elf
-+  -s ${SYSROOT_DIR}
-   $<$<BOOL:${CMAKE_VERBOSE_MAKEFILE}>:--verbose>
-   WORKING_DIRECTORY ${PROJECT_BINARY_DIR}
- )
--- 
-2.17.1
-
diff --git a/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/dtc.patch b/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/dtc.patch
deleted file mode 100644
index 971995b..0000000
--- a/meta-zephyr-core/recipes-kernel/zephyr-kernel/files/dtc.patch
+++ /dev/null
@@ -1,43 +0,0 @@
-Upstream-Status: Backport [https://github.com/zephyrproject-rtos/zephyr/commit/a4da64033dac55108215857659831b7d027513de]
-Signed-off-by: Ross Burton <ross.burton@arm.com>
-
-From deb6e9b29d77f0d86eb188fb3c5fc6f470277d3d Mon Sep 17 00:00:00 2001
-From: Ross Burton <ross.burton@arm.com>
-Date: Mon, 15 Nov 2021 14:01:47 +0000
-Subject: [PATCH] cmake: expand DTC version regex
-
-DTC can be built with both traditional Makefiles or Meson. When built
-with Makefiles the --version output looks like 'Version: DTC
-1.6.1-dirty' but when built with Meson the output is 'Version: DTC
-v1.6.1+.
-
-This fails to match the version regex and the cmake then fails:
-
-CMake Error at cmake/host-tools.cmake:28 (if):
-  if given arguments:
-    "VERSION_GREATER" "1.4.6"
-  Unknown arguments specified
-
-Expanding the regex with an optional 'v' covers both cases and the build
-succeeds.
-
-Signed-off-by: Ross Burton <ross.burton@arm.com>
----
- cmake/host-tools.cmake | 2 +-
- 1 file changed, 1 insertion(+), 1 deletion(-)
-
-diff --git a/cmake/host-tools.cmake b/cmake/host-tools.cmake
-index cb7bf2e281..93d33d6390 100644
---- a/cmake/host-tools.cmake
-+++ b/cmake/host-tools.cmake
-@@ -20,7 +20,7 @@ if(DTC)
-     )
- 
-   if(${dtc_status} EQUAL 0)
--    string(REGEX MATCH "Version: DTC ([0-9]+[.][0-9]+[.][0-9]+).*" out_var ${dtc_version_output})
-+    string(REGEX MATCH "Version: DTC v?([0-9]+[.][0-9]+[.][0-9]+).*" out_var ${dtc_version_output})
- 
-     # Since it is optional, an outdated version is not an error. If an
-     # outdated version is discovered, print a warning and proceed as if
--- 
-2.25.1
diff --git a/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-2.7.3.inc b/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-2.7.3.inc
deleted file mode 100644
index 2d20888..0000000
--- a/meta-zephyr-core/recipes-kernel/zephyr-kernel/zephyr-kernel-src-2.7.3.inc
+++ /dev/null
@@ -1,196 +0,0 @@
-# Auto-generated from zephyr-kernel-src.inc.jinja
-
-SRCREV_FORMAT = "default"
-
-SRCREV_default = "003de78ce0dd213a1c7b3d159b967fb19a12aa45"
-SRCREV_canopennode = "f167efe85c8c7de886f1bc47f9173cfb8a346bb5"
-SRCREV_civetweb = "094aeb41bb93e9199d24d665ee43e9e05d6d7b1c"
-SRCREV_cmsis = "b0612c97c1401feeb4160add6462c3627fe90fc7"
-SRCREV_edtt = "31badfbbd04f2948e3df6ebf329f930317550961"
-SRCREV_fatfs = "94fcd6bfb3801ac0a5e12ea2f52187e0a688b90e"
-SRCREV_hal_altera = "23c1c1dd7a0c1cc9a399509d1819375847c95b97"
-SRCREV_hal_atmel = "9f78f520f6cbb997e5b44fe8ab17dd5bf2448095"
-SRCREV_hal_cypress = "81a059f21435bc7e315bccd720da5a9b615bbb50"
-SRCREV_hal_espressif = "3400257534944d3a6a4194d1dbf8f0cd1670d64e"
-SRCREV_hal_infineon = "f1fa8241f8786198ba41155413243de36ed878a5"
-SRCREV_hal_microchip = "870d05e6a64ea9548da6b907058b03c8c9420826"
-SRCREV_hal_nordic = "a6e5299041f152da5ae0ab17b2e44e088bb96d6d"
-SRCREV_hal_nuvoton = "b4d31f33238713a568e23618845702fadd67386f"
-SRCREV_hal_nxp = "78efc4ba7c1057c1cf2bf06e3e27ed7cc33e1da7"
-SRCREV_hal_openisa = "40d049f69c50b58ea20473bee14cf93f518bf262"
-SRCREV_hal_quicklogic = "b3a66fe6d04d87fd1533a5c8de51d0599fcd08d0"
-SRCREV_hal_silabs = "be39d4eebeddac6e18e9c0c3ba1b31ad1e82eaed"
-SRCREV_hal_st = "575de9d461aa6f430cf62c58a053675377e700f3"
-SRCREV_hal_stm32 = "5c8275071ec1cf160bfe8c18bbd9330a7d714dc8"
-SRCREV_hal_telink = "ffcfd6282aa213f1dc0848dbca6279b098f6b143"
-SRCREV_hal_ti = "1992a4c536554c4f409c36896eda6abdc414d277"
-SRCREV_hal_xtensa = "6e1cf3c483e87df4888e87c5396b4534570f01af"
-SRCREV_libmetal = "39d049d4ae68e6f6d595fce7de1dcfc1024fb4eb"
-SRCREV_littlefs = "9e4498d1c73009acd84bb36036ee5e2869112a6c"
-SRCREV_loramac-node = "12019623bbad9eb54fe51066847a7cbd4b4eac57"
-SRCREV_lvgl = "783c1f78c8e39751fe89d0883c8bce7336f55e94"
-SRCREV_lz4 = "8e303c264fc21c2116dc612658003a22e933124d"
-SRCREV_mbedtls = "5765cb7f75a9973ae9232d438e361a9d7bbc49e7"
-SRCREV_mcuboot = "70bfbd21cdf5f6d1402bc8d0031e197222ed2ec0"
-SRCREV_mcumgr = "9ffebd5e92d9d069667b9af2a3a028f4a033cfd3"
-SRCREV_mipi-sys-t = "75e671550ac1acb502f315fe4952514dc73f7bfb"
-SRCREV_nanopb = "d148bd26718e4c10414f07a7eb1bd24c62e56c5d"
-SRCREV_net-tools = "f49bd1354616fae4093bf36e5eaee43c51a55127"
-SRCREV_nrf_hw_models = "a47e326ca772ddd14cc3b9d4ca30a9ab44ecca16"
-SRCREV_open-amp = "6010f0523cbc75f551d9256cf782f173177acdef"
-SRCREV_openthread = "5d706547ebcb0a85e11412bcd88e80e2af98c74d"
-SRCREV_segger = "3a52ab222133193802d3c3b4d21730b9b1f1d2f6"
-SRCREV_sof = "76feb11d1b8f425021b5691668af2250fee444ac"
-SRCREV_tflite-micro = "9156d050927012da87079064db59d07f03b8baf6"
-SRCREV_tinycbor = "40daca97b478989884bffb5226e9ab73ca54b8c4"
-SRCREV_tinycrypt = "3e9a49d2672ec01435ffbf0d788db6d95ef28de0"
-SRCREV_TraceRecorderSource = "36c577727642457b0db7274298a4b96558374832"
-SRCREV_trusted-firmware-m = "c74be3890c9d975976fde1b1a3b2f5742bec34c0"
-
-SRC_URI_ZEPHYR ?= "git://github.com/zephyrproject-rtos/zephyr.git;protocol=https"
-SRC_URI_CANOPENNODE ?= "git://github.com/zephyrproject-rtos/canopennode;protocol=https"
-SRC_URI_CIVETWEB ?= "git://github.com/zephyrproject-rtos/civetweb;protocol=https"
-SRC_URI_CMSIS ?= "git://github.com/zephyrproject-rtos/cmsis;protocol=https"
-SRC_URI_EDTT ?= "git://github.com/zephyrproject-rtos/edtt;protocol=https"
-SRC_URI_FATFS ?= "git://github.com/zephyrproject-rtos/fatfs;protocol=https"
-SRC_URI_HAL_ALTERA ?= "git://github.com/zephyrproject-rtos/hal_altera;protocol=https"
-SRC_URI_HAL_ATMEL ?= "git://github.com/zephyrproject-rtos/hal_atmel;protocol=https"
-SRC_URI_HAL_CYPRESS ?= "git://github.com/zephyrproject-rtos/hal_cypress;protocol=https"
-SRC_URI_HAL_ESPRESSIF ?= "git://github.com/zephyrproject-rtos/hal_espressif;protocol=https"
-SRC_URI_HAL_INFINEON ?= "git://github.com/zephyrproject-rtos/hal_infineon;protocol=https"
-SRC_URI_HAL_MICROCHIP ?= "git://github.com/zephyrproject-rtos/hal_microchip;protocol=https"
-SRC_URI_HAL_NORDIC ?= "git://github.com/zephyrproject-rtos/hal_nordic;protocol=https"
-SRC_URI_HAL_NUVOTON ?= "git://github.com/zephyrproject-rtos/hal_nuvoton;protocol=https"
-SRC_URI_HAL_NXP ?= "git://github.com/zephyrproject-rtos/hal_nxp;protocol=https"
-SRC_URI_HAL_OPENISA ?= "git://github.com/zephyrproject-rtos/hal_openisa;protocol=https"
-SRC_URI_HAL_QUICKLOGIC ?= "git://github.com/zephyrproject-rtos/hal_quicklogic;protocol=https"
-SRC_URI_HAL_SILABS ?= "git://github.com/zephyrproject-rtos/hal_silabs;protocol=https"
-SRC_URI_HAL_ST ?= "git://github.com/zephyrproject-rtos/hal_st;protocol=https"
-SRC_URI_HAL_STM32 ?= "git://github.com/zephyrproject-rtos/hal_stm32;protocol=https"
-SRC_URI_HAL_TELINK ?= "git://github.com/zephyrproject-rtos/hal_telink;protocol=https"
-SRC_URI_HAL_TI ?= "git://github.com/zephyrproject-rtos/hal_ti;protocol=https"
-SRC_URI_HAL_XTENSA ?= "git://github.com/zephyrproject-rtos/hal_xtensa;protocol=https"
-SRC_URI_LIBMETAL ?= "git://github.com/zephyrproject-rtos/libmetal;protocol=https"
-SRC_URI_LITTLEFS ?= "git://github.com/zephyrproject-rtos/littlefs;protocol=https"
-SRC_URI_LORAMAC_NODE ?= "git://github.com/zephyrproject-rtos/loramac-node;protocol=https"
-SRC_URI_LVGL ?= "git://github.com/zephyrproject-rtos/lvgl;protocol=https"
-SRC_URI_LZ4 ?= "git://github.com/zephyrproject-rtos/lz4;protocol=https"
-SRC_URI_MBEDTLS ?= "git://github.com/zephyrproject-rtos/mbedtls;protocol=https"
-SRC_URI_MCUBOOT ?= "git://github.com/zephyrproject-rtos/mcuboot;protocol=https"
-SRC_URI_MCUMGR ?= "git://github.com/zephyrproject-rtos/mcumgr;protocol=https"
-SRC_URI_MIPI_SYS_T ?= "git://github.com/zephyrproject-rtos/mipi-sys-t;protocol=https"
-SRC_URI_NANOPB ?= "git://github.com/zephyrproject-rtos/nanopb;protocol=https"
-SRC_URI_NET_TOOLS ?= "git://github.com/zephyrproject-rtos/net-tools;protocol=https"
-SRC_URI_NRF_HW_MODELS ?= "git://github.com/zephyrproject-rtos/nrf_hw_models;protocol=https"
-SRC_URI_OPEN_AMP ?= "git://github.com/zephyrproject-rtos/open-amp;protocol=https"
-SRC_URI_OPENTHREAD ?= "git://github.com/zephyrproject-rtos/openthread;protocol=https"
-SRC_URI_SEGGER ?= "git://github.com/zephyrproject-rtos/segger;protocol=https"
-SRC_URI_SOF ?= "git://github.com/zephyrproject-rtos/sof;protocol=https"
-SRC_URI_TFLITE_MICRO ?= "git://github.com/zephyrproject-rtos/tflite-micro;protocol=https"
-SRC_URI_TINYCBOR ?= "git://github.com/zephyrproject-rtos/tinycbor;protocol=https"
-SRC_URI_TINYCRYPT ?= "git://github.com/zephyrproject-rtos/tinycrypt;protocol=https"
-SRC_URI_TRACERECORDERSOURCE ?= "git://github.com/zephyrproject-rtos/TraceRecorderSource;protocol=https"
-SRC_URI_TRUSTED_FIRMWARE_M ?= "git://github.com/zephyrproject-rtos/trusted-firmware-m;protocol=https"
-
-SRC_URI_PATCHES ?= "\
-    file://dtc.patch;patchdir=zephyr \
-    file://0001-2.7-cmake-add-yocto-toolchain.patch;patchdir=zephyr \
-    file://0001-2.7-x86-fix-efi-binary-generation-issue-in-cross-compila.patch;patchdir=zephyr \
-"
-
-SRC_URI = "\
-    ${SRC_URI_ZEPHYR};branch=${ZEPHYR_BRANCH};name=default;destsuffix=git/zephyr \
-    ${SRC_URI_CANOPENNODE};name=canopennode;nobranch=1;destsuffix=git/modules/lib/canopennode \
-    ${SRC_URI_CIVETWEB};name=civetweb;nobranch=1;destsuffix=git/modules/lib/civetweb \
-    ${SRC_URI_CMSIS};name=cmsis;nobranch=1;destsuffix=git/modules/hal/cmsis \
-    ${SRC_URI_EDTT};name=edtt;nobranch=1;destsuffix=git/tools/edtt \
-    ${SRC_URI_FATFS};name=fatfs;nobranch=1;destsuffix=git/modules/fs/fatfs \
-    ${SRC_URI_HAL_ALTERA};name=hal_altera;nobranch=1;destsuffix=git/modules/hal/altera \
-    ${SRC_URI_HAL_ATMEL};name=hal_atmel;nobranch=1;destsuffix=git/modules/hal/atmel \
-    ${SRC_URI_HAL_CYPRESS};name=hal_cypress;nobranch=1;destsuffix=git/modules/hal/cypress \
-    ${SRC_URI_HAL_ESPRESSIF};name=hal_espressif;nobranch=1;destsuffix=git/modules/hal/espressif \
-    ${SRC_URI_HAL_INFINEON};name=hal_infineon;nobranch=1;destsuffix=git/modules/hal/infineon \
-    ${SRC_URI_HAL_MICROCHIP};name=hal_microchip;nobranch=1;destsuffix=git/modules/hal/microchip \
-    ${SRC_URI_HAL_NORDIC};name=hal_nordic;nobranch=1;destsuffix=git/modules/hal/nordic \
-    ${SRC_URI_HAL_NUVOTON};name=hal_nuvoton;nobranch=1;destsuffix=git/modules/hal/nuvoton \
-    ${SRC_URI_HAL_NXP};name=hal_nxp;nobranch=1;destsuffix=git/modules/hal/nxp \
-    ${SRC_URI_HAL_OPENISA};name=hal_openisa;nobranch=1;destsuffix=git/modules/hal/openisa \
-    ${SRC_URI_HAL_QUICKLOGIC};name=hal_quicklogic;nobranch=1;destsuffix=git/modules/hal/quicklogic \
-    ${SRC_URI_HAL_SILABS};name=hal_silabs;nobranch=1;destsuffix=git/modules/hal/silabs \
-    ${SRC_URI_HAL_ST};name=hal_st;nobranch=1;destsuffix=git/modules/hal/st \
-    ${SRC_URI_HAL_STM32};name=hal_stm32;nobranch=1;destsuffix=git/modules/hal/stm32 \
-    ${SRC_URI_HAL_TELINK};name=hal_telink;nobranch=1;destsuffix=git/modules/hal/telink \
-    ${SRC_URI_HAL_TI};name=hal_ti;nobranch=1;destsuffix=git/modules/hal/ti \
-    ${SRC_URI_HAL_XTENSA};name=hal_xtensa;nobranch=1;destsuffix=git/modules/hal/xtensa \
-    ${SRC_URI_LIBMETAL};name=libmetal;nobranch=1;destsuffix=git/modules/hal/libmetal \
-    ${SRC_URI_LITTLEFS};name=littlefs;nobranch=1;destsuffix=git/modules/fs/littlefs \
-    ${SRC_URI_LORAMAC_NODE};name=loramac-node;nobranch=1;destsuffix=git/modules/lib/loramac-node \
-    ${SRC_URI_LVGL};name=lvgl;nobranch=1;destsuffix=git/modules/lib/gui/lvgl \
-    ${SRC_URI_LZ4};name=lz4;nobranch=1;destsuffix=git/modules/lib/lz4 \
-    ${SRC_URI_MBEDTLS};name=mbedtls;nobranch=1;destsuffix=git/modules/crypto/mbedtls \
-    ${SRC_URI_MCUBOOT};name=mcuboot;nobranch=1;destsuffix=git/bootloader/mcuboot \
-    ${SRC_URI_MCUMGR};name=mcumgr;nobranch=1;destsuffix=git/modules/lib/mcumgr \
-    ${SRC_URI_MIPI_SYS_T};name=mipi-sys-t;nobranch=1;destsuffix=git/modules/debug/mipi-sys-t \
-    ${SRC_URI_NANOPB};name=nanopb;nobranch=1;destsuffix=git/modules/lib/nanopb \
-    ${SRC_URI_NET_TOOLS};name=net-tools;nobranch=1;destsuffix=git/tools/net-tools \
-    ${SRC_URI_NRF_HW_MODELS};name=nrf_hw_models;nobranch=1;destsuffix=git/modules/bsim_hw_models/nrf_hw_models \
-    ${SRC_URI_OPEN_AMP};name=open-amp;nobranch=1;destsuffix=git/modules/lib/open-amp \
-    ${SRC_URI_OPENTHREAD};name=openthread;nobranch=1;destsuffix=git/modules/lib/openthread \
-    ${SRC_URI_SEGGER};name=segger;nobranch=1;destsuffix=git/modules/debug/segger \
-    ${SRC_URI_SOF};name=sof;nobranch=1;destsuffix=git/modules/audio/sof \
-    ${SRC_URI_TFLITE_MICRO};name=tflite-micro;nobranch=1;destsuffix=git/modules/lib/tflite-micro \
-    ${SRC_URI_TINYCBOR};name=tinycbor;nobranch=1;destsuffix=git/modules/lib/tinycbor \
-    ${SRC_URI_TINYCRYPT};name=tinycrypt;nobranch=1;destsuffix=git/modules/crypto/tinycrypt \
-    ${SRC_URI_TRACERECORDERSOURCE};name=TraceRecorderSource;nobranch=1;destsuffix=git/modules/debug/TraceRecorder \
-    ${SRC_URI_TRUSTED_FIRMWARE_M};name=trusted-firmware-m;nobranch=1;destsuffix=git/modules/tee/tfm \
-    ${SRC_URI_PATCHES} \
-"
-
-ZEPHYR_MODULES = "\
-${S}/modules/lib/canopennode\;\
-${S}/modules/lib/civetweb\;\
-${S}/modules/hal/cmsis\;\
-${S}/tools/edtt\;\
-${S}/modules/fs/fatfs\;\
-${S}/modules/hal/altera\;\
-${S}/modules/hal/atmel\;\
-${S}/modules/hal/cypress\;\
-${S}/modules/hal/espressif\;\
-${S}/modules/hal/infineon\;\
-${S}/modules/hal/microchip\;\
-${S}/modules/hal/nordic\;\
-${S}/modules/hal/nuvoton\;\
-${S}/modules/hal/nxp\;\
-${S}/modules/hal/openisa\;\
-${S}/modules/hal/quicklogic\;\
-${S}/modules/hal/silabs\;\
-${S}/modules/hal/st\;\
-${S}/modules/hal/stm32\;\
-${S}/modules/hal/telink\;\
-${S}/modules/hal/ti\;\
-${S}/modules/hal/xtensa\;\
-${S}/modules/hal/libmetal\;\
-${S}/modules/fs/littlefs\;\
-${S}/modules/lib/loramac-node\;\
-${S}/modules/lib/gui/lvgl\;\
-${S}/modules/lib/lz4\;\
-${S}/modules/crypto/mbedtls\;\
-${S}/bootloader/mcuboot\;\
-${S}/modules/lib/mcumgr\;\
-${S}/modules/debug/mipi-sys-t\;\
-${S}/modules/lib/nanopb\;\
-${S}/tools/net-tools\;\
-${S}/modules/bsim_hw_models/nrf_hw_models\;\
-${S}/modules/lib/open-amp\;\
-${S}/modules/lib/openthread\;\
-${S}/modules/debug/segger\;\
-${S}/modules/audio/sof\;\
-${S}/modules/lib/tflite-micro\;\
-${S}/modules/lib/tinycbor\;\
-${S}/modules/crypto/tinycrypt\;\
-${S}/modules/debug/TraceRecorder\;\
-${S}/modules/tee/tfm\;\
-"
-
-ZEPHYR_BRANCH = "v2.7-branch"
-PV = "2.7.3+git${SRCPV}"
-- 
2.25.1



^ permalink raw reply related	[flat|nested] 5+ messages in thread
* [meta-zephyr][PATCH v2 3/5] zephyr-sdk: upgrade 0.14.2 -> 0.15.1
  2022-11-10  7:09 [meta-zephyr][PATCH v2 1/5] zephyr-kernel-src: add support for v3.2.0 Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 2/5] zephyr-kernel-src: drop support for v2.7.3 Naveen Saini
@ 2022-11-10  7:09 ` Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 4/5] arc: drop obsolete recipes and bbappends Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 5/5] newlib: add bbappend Naveen Saini
  3 siblings, 0 replies; 5+ messages in thread
From: Naveen Saini @ 2022-11-10  7:09 UTC (permalink / raw)
  To: yocto

https://github.com/zephyrproject-rtos/sdk-ng/releases/tag/v0.15.1

Signed-off-by: Naveen Saini <naveen.kumar.saini@intel.com>
---
 .../zephyr-sdk/{zephyr-sdk_0.14.2.bb => zephyr-sdk_0.15.1.bb} | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)
 rename meta-zephyr-core/recipes-devtools/zephyr-sdk/{zephyr-sdk_0.14.2.bb => zephyr-sdk_0.15.1.bb} (83%)

diff --git a/meta-zephyr-core/recipes-devtools/zephyr-sdk/zephyr-sdk_0.14.2.bb b/meta-zephyr-core/recipes-devtools/zephyr-sdk/zephyr-sdk_0.15.1.bb
similarity index 83%
rename from meta-zephyr-core/recipes-devtools/zephyr-sdk/zephyr-sdk_0.14.2.bb
rename to meta-zephyr-core/recipes-devtools/zephyr-sdk/zephyr-sdk_0.15.1.bb
index c893652..f5a9466 100644
--- a/meta-zephyr-core/recipes-devtools/zephyr-sdk/zephyr-sdk_0.14.2.bb
+++ b/meta-zephyr-core/recipes-devtools/zephyr-sdk/zephyr-sdk_0.15.1.bb
@@ -14,8 +14,8 @@ SDK_ARCHIVE = "zephyr-sdk-${PV}_linux-${BUILD_ARCH}.tar.gz"
 SDK_NAME = "${BUILD_ARCH}"
 SRC_URI = "https://github.com/zephyrproject-rtos/sdk-ng/releases/download/v${PV}/${SDK_ARCHIVE};subdir=${S};name=${SDK_NAME}"
 
-SRC_URI[x86_64.sha256sum] = "2ff0e4d79bffe1468247a3e1958aa9183a0252225ab721cf1c37188bd4b649a2"
-SRC_URI[aarch64.sha256sum] = "cbb616a50e940388ea737788d48dcea3624a85bb3ee04d9aae105496a21ae75e"
+SRC_URI[x86_64.sha256sum] = "0a7406045102197b9edc759b242499941814a1c6df29dd9fbd479ad50eb0fba9"
+SRC_URI[aarch64.sha256sum] = "d2c5de994376a287e8bf12e5776ab8f5105eafa14826608df085142fd01b7f84"
 
 do_configure[noexec] = "1"
 do_compile[noexec] = "1"
-- 
2.25.1



^ permalink raw reply related	[flat|nested] 5+ messages in thread
* [meta-zephyr][PATCH v2 4/5] arc: drop obsolete recipes and bbappends
  2022-11-10  7:09 [meta-zephyr][PATCH v2 1/5] zephyr-kernel-src: add support for v3.2.0 Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 2/5] zephyr-kernel-src: drop support for v2.7.3 Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 3/5] zephyr-sdk: upgrade 0.14.2 -> 0.15.1 Naveen Saini
@ 2022-11-10  7:09 ` Naveen Saini
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 5/5] newlib: add bbappend Naveen Saini
  3 siblings, 0 replies; 5+ messages in thread
From: Naveen Saini @ 2022-11-10  7:09 UTC (permalink / raw)
  To: yocto

Remove recipes and bbappends which are not being used.

Signed-off-by: Naveen Saini <naveen.kumar.saini@intel.com>
---
 .../classes/siteinfo-zephyr.bbclass           | 14 ---
 .../recipes-core/newlib/newlib_%.bbappend     | 22 -----
 .../binutils/binutils-2.26arc.inc             | 37 --------
 .../binutils-cross-canadian_2.26arc.bb        |  7 --
 .../binutils/binutils-cross_2.26arc.bb        |  8 --
 ...e54244cd02bdcf4f1057be3ce96631f35ac3.patch | 83 ------------------
 .../recipes-devtools-arc/gcc/gcc-6.x.arc.inc  | 85 -------------------
 .../gcc/gcc-cross-canadian_6.x.arc.bb         |  8 --
 .../gcc/gcc-cross_6.x.arc .bb                 | 11 ---
 .../gcc/gcc-source_6.x.arc.bb                 |  2 -
 .../gcc/libgcc_6.x.arc.bb                     | 14 ---
 .../gcc/gcc-cross_6.%.bbappend                |  1 -
 .../recipes-devtools/gcc/libgcc_6.%.bbappend  |  3 -
 13 files changed, 295 deletions(-)
 delete mode 100644 meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/binutils/binutils-2.26arc.inc
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross-canadian_2.26arc.bb
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross_2.26arc.bb
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/gcc/files/cbd8e54244cd02bdcf4f1057be3ce96631f35ac3.patch
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/gcc/gcc-6.x.arc.inc
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross-canadian_6.x.arc.bb
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross_6.x.arc .bb
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/gcc/gcc-source_6.x.arc.bb
 delete mode 100644 meta-zephyr-core/recipes-devtools-arc/gcc/libgcc_6.x.arc.bb
 delete mode 100644 meta-zephyr-core/recipes-devtools/gcc/gcc-cross_6.%.bbappend
 delete mode 100644 meta-zephyr-core/recipes-devtools/gcc/libgcc_6.%.bbappend

diff --git a/meta-zephyr-core/classes/siteinfo-zephyr.bbclass b/meta-zephyr-core/classes/siteinfo-zephyr.bbclass
index b84a9b2..fc883e0 100644
--- a/meta-zephyr-core/classes/siteinfo-zephyr.bbclass
+++ b/meta-zephyr-core/classes/siteinfo-zephyr.bbclass
@@ -1,17 +1,3 @@
-def arc_siteinfo_setfunc(archinfo, osinfo, targetinfo, d):
-    archinfo['arc'] = "endian-little bit-32 "
-    osinfo['linux'] = "common-linux common-glibc"
-    targetinfo['arc-linux'] = "arc-linux"
-    return archinfo, osinfo, targetinfo
-
-SITEINFO_EXTRA_DATAFUNCS += "arc_siteinfo_setfunc"
-
-def arc_machdata_setfunc(machdata, d):
-    machdata["elf"]["arc"] = (195, 0, 0, True, 32)
-    return machdata
-
-PACKAGEQA_EXTRA_MACHDEFFUNCS += "arc_machdata_setfunc"
-
 def iamcu_siteinfo_setfunc(archinfo, osinfo, targetinfo, d):
     archinfo['iamcu'] = "endian-little bit-32 "
     osinfo['linux'] = "common-linux common-glibc"
diff --git a/meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend b/meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend
deleted file mode 100644
index dfecb99..0000000
--- a/meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend
+++ /dev/null
@@ -1,22 +0,0 @@
-########################################################################
-#
-# ARC specific
-#
-########################################################################
-LIC_FILES_CHKSUM:arc = "file://COPYING;md5=59530bdf33659b29e73d4adb9f9f6552 \
-                    file://COPYING3.LIB;md5=6a6a8e020838b23406c81b19c1d46df6 \
-                    file://COPYING3;md5=d32239bcb673463ab874e80d47fae504 \
-                    file://COPYING.LIB;md5=9f604d8a4f8e74f4f5140845a21b6674 \
-                    file://COPYING.NEWLIB;md5=fced02ba02d66f274d4847d27e80af74 \
-                    file://newlib/libc/posix/COPYRIGHT;md5=103468ff1982be840fdf4ee9f8b51bbf \
-                    file://newlib/libc/sys/linux/linuxthreads/LICENSE;md5=73640207fbc79b198c7ffd4ad4d97aa0"
-
-#Tag arc-2016.03
-SRCREV:arc = "e4da0f88abe8dd2a0b947bcf7cb8b3736ab94f33"
-SRC_URI:arc = "git://github.com/foss-for-synopsys-dwc-arc-processors/newlib.git;branch=arc-2.3"
-S:arc  = "${WORKDIR}/git"
-
-# ERROR: QA Issue: Architecture did not match (195 to 93)
-INSANE_SKIP:${PN}:arc += " arch "
-
-
diff --git a/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-2.26arc.inc b/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-2.26arc.inc
deleted file mode 100644
index bfe0960..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-2.26arc.inc
+++ /dev/null
@@ -1,37 +0,0 @@
-LIC_FILES_CHKSUM="\
-    file://COPYING;md5=59530bdf33659b29e73d4adb9f9f6552\
-    file://COPYING.LIB;md5=9f604d8a4f8e74f4f5140845a21b6674\
-    file://COPYING3;md5=d32239bcb673463ab874e80d47fae504\
-    file://COPYING3.LIB;md5=6a6a8e020838b23406c81b19c1d46df6\
-    file://gas/COPYING;md5=d32239bcb673463ab874e80d47fae504\
-    file://include/COPYING;md5=59530bdf33659b29e73d4adb9f9f6552\
-    file://include/COPYING3;md5=d32239bcb673463ab874e80d47fae504\
-    file://libiberty/COPYING.LIB;md5=a916467b91076e631dd8edb7424769c7\
-    file://bfd/COPYING;md5=d32239bcb673463ab874e80d47fae504\
-    "
-
-def binutils_branch_version(d):
-    pvsplit = d.getVar('PV', True).split('.')
-    return pvsplit[0] + "_" + pvsplit[1]
-
-BINUPV = "${@binutils_branch_version(d)}"
-
-PV = "2.26+gitarc"
-
-#SRCREV = "bcbe0bfce780e426f2e3b78013cb49326ee76824"
-SRCREV="3bfd1155a7f0ff9e10c5ba91f089ae0bb5bfbde1"
-SRC_URI = "\
-     git://github.com/foss-for-synopsys-dwc-arc-processors/binutils-gdb.git;branch=arc-2.26-dev \
-     "
-
-S  = "${WORKDIR}/git"
-
-do_configure:prepend () {
-        rm -rf ${S}/gdb ${S}/libdecnumber ${S}/readline ${S}/sim
-}
-
-CONFIG_SHELL = "/bin/bash"
-
-sysroot_stage_all:append() {
-	sysroot_stage_dir ${D}${exec_prefix}/extlib ${SYSROOT_DESTDIR}${exec_prefix}/extlib
-}
diff --git a/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross-canadian_2.26arc.bb b/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross-canadian_2.26arc.bb
deleted file mode 100644
index 88f0ad7..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross-canadian_2.26arc.bb
+++ /dev/null
@@ -1,7 +0,0 @@
-require recipes-devtools/binutils/binutils.inc
-require recipes-devtools-arc/binutils/binutils-2.26arc.inc
-require recipes-devtools/binutils/binutils-cross-canadian.inc
-
-do_install:append () {
-	rm -f ${D}/${libdir}/../lib/libiberty*
-}
diff --git a/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross_2.26arc.bb b/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross_2.26arc.bb
deleted file mode 100644
index 3d94fea..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/binutils/binutils-cross_2.26arc.bb
+++ /dev/null
@@ -1,8 +0,0 @@
-require recipes-devtools/binutils/binutils.inc
-require binutils-2.26arc.inc
-require recipes-devtools/binutils/binutils-cross.inc
-
-SRC_URI:remove = "file://no-tooldirpaths.patch"
-SRC_URI:remove = "file://0002-binutils-cross-Do-not-generate-linker-script-directo.patch"
-
-#COMPATIBLE_MACHINE = "arc"
diff --git a/meta-zephyr-core/recipes-devtools-arc/gcc/files/cbd8e54244cd02bdcf4f1057be3ce96631f35ac3.patch b/meta-zephyr-core/recipes-devtools-arc/gcc/files/cbd8e54244cd02bdcf4f1057be3ce96631f35ac3.patch
deleted file mode 100644
index d709cd0..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/gcc/files/cbd8e54244cd02bdcf4f1057be3ce96631f35ac3.patch
+++ /dev/null
@@ -1,83 +0,0 @@
-From cbd8e54244cd02bdcf4f1057be3ce96631f35ac3 Mon Sep 17 00:00:00 2001
-From: Claudiu Zissulescu <claziss@gmail.com>
-Date: Tue, 3 Jan 2017 12:06:28 -0500
-Subject: [PATCH] [ARC] Prevent moving stores to the frame before the stack
- adjustment.
-
-If the stack pointer is needed, emit a special barrier that will prevent
-the scheduler from moving stores to the frame before the stack adjustment.
-
-2017-01-03  Claudiu Zissulescu  <claziss@synopsys.com>
-
-	* config/arc/arc.c (arc_expand_prologue): Emit a special barrier
-	to prevent store reordering.
-	* config/arc/arc.md (UNSPEC_ARC_STKTIE): Define.
-	(type): Add block type.
-	(stack_tie): Define special instruction to be used in
-	expand_prologue.
----
- gcc/config/arc/arc.c  | 10 +++++++++-
- gcc/config/arc/arc.md | 15 ++++++++++++++-
- 2 files changed, 23 insertions(+), 2 deletions(-)
-
-diff --git a/gcc/config/arc/arc.c b/gcc/config/arc/arc.c
-index 6f21fc3..110556c 100644
---- a/gcc/config/arc/arc.c
-+++ b/gcc/config/arc/arc.c
-@@ -3101,7 +3101,15 @@ arc_expand_prologue (void)
-   frame_size_to_allocate -= first_offset;
-   /* Allocate the stack frame.  */
-   if (frame_size_to_allocate > 0)
--    frame_stack_add ((HOST_WIDE_INT) 0 - frame_size_to_allocate);
-+    {
-+      frame_stack_add ((HOST_WIDE_INT) 0 - frame_size_to_allocate);
-+      /* If the frame pointer is needed, emit a special barrier that
-+	 will prevent the scheduler from moving stores to the frame
-+	 before the stack adjustment.  */
-+      if (arc_frame_pointer_needed ())
-+	emit_insn (gen_stack_tie (stack_pointer_rtx,
-+				  hard_frame_pointer_rtx));
-+    }
- 
-   /* Setup the gp register, if needed.  */
-   if (crtl->uses_pic_offset_table)
-diff --git a/gcc/config/arc/arc.md b/gcc/config/arc/arc.md
-index 16f71b3..448157c 100644
---- a/gcc/config/arc/arc.md
-+++ b/gcc/config/arc/arc.md
-@@ -135,6 +135,7 @@
-   UNSPEC_ARC_VMAC2HU
-   UNSPEC_ARC_VMPY2H
-   UNSPEC_ARC_VMPY2HU
-+  UNSPEC_ARC_STKTIE
-   ])
- 
- (define_c_enum "vunspec" [
-@@ -204,7 +205,7 @@
-    simd_vcompare, simd_vpermute, simd_vpack, simd_vpack_with_acc,
-    simd_valign, simd_valign_with_acc, simd_vcontrol,
-    simd_vspecial_3cycle, simd_vspecial_4cycle, simd_dma, mul16_em, div_rem,
--   fpu"
-+   fpu, block"
-   (cond [(eq_attr "is_sfunc" "yes")
- 	 (cond [(match_test "!TARGET_LONG_CALLS_SET && (!TARGET_MEDIUM_CALLS || GET_CODE (PATTERN (insn)) != COND_EXEC)") (const_string "call")
- 		(match_test "flag_pic") (const_string "sfunc")]
-@@ -6480,6 +6481,18 @@
-   (set_attr "predicable" "yes,no,no,yes,no")
-   (set_attr "cond" "canuse,nocond,nocond,canuse_limm,nocond")])
- 
-+(define_insn "stack_tie"
-+  [(set (mem:BLK (scratch))
-+	(unspec:BLK [(match_operand:SI 0 "register_operand" "rb")
-+		     (match_operand:SI 1 "register_operand" "rb")]
-+		    UNSPEC_ARC_STKTIE))]
-+  ""
-+  ""
-+  [(set_attr "length" "0")
-+   (set_attr "iscompact" "false")
-+   (set_attr "type" "block")]
-+  )
-+
- ;; include the arc-FPX instructions
- (include "fpx.md")
- 
diff --git a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-6.x.arc.inc b/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-6.x.arc.inc
deleted file mode 100644
index 5b3772e..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-6.x.arc.inc
+++ /dev/null
@@ -1,85 +0,0 @@
-require recipes-devtools/gcc/gcc-common.inc
-
-# Third digit in PV should be incremented after a minor release
-
-PV = "6.x.arc"
-
-# BINV should be incremented to a revision after a minor gcc release
-
-BINV = "6.3.0"
-
-FILESEXTRAPATHS =. "${FILE_DIRNAME}/gcc:${COREBASE}/meta/recipes-devtools/gcc/gcc-6.2:"
-
-DEPENDS =+ "mpfr gmp libmpc zlib"
-NATIVEDEPS = "mpfr-native gmp-native libmpc-native zlib-native"
-
-LICENSE = "GPL-3.0-with-GCC-exception & GPLv3"
-
-LIC_FILES_CHKSUM = "\
-    file://COPYING;md5=59530bdf33659b29e73d4adb9f9f6552 \
-    file://COPYING3;md5=d32239bcb673463ab874e80d47fae504 \
-    file://COPYING3.LIB;md5=6a6a8e020838b23406c81b19c1d46df6 \
-    file://COPYING.LIB;md5=2d5025d4aa3495befef8f17206a5b0a1 \
-    file://COPYING.RUNTIME;md5=fe60d87048567d4fe8c8a0ed2448bcc8 \
-"
-
-# tag arc-2017.03-eng009
-SRCREV = "7fe9c76c79cd9d263b839b4c8bd701943150e059"
-
-SRC_URI = "\
-    git://github.com/foss-for-synopsys-dwc-arc-processors/gcc.git;protocol=https;branch=arc-2017.03 \
-"
-
-S = "${TMPDIR}/work-shared/gcc-${PV}-${PR}/git"
-B = "${WORKDIR}/gcc-${PV}/build.${HOST_SYS}.${TARGET_SYS}"
-
-# Language Overrides
-FORTRAN = ""
-JAVA = ""
-
-LTO = "--enable-lto"
-
-EXTRA_OECONF_BASE = "\
-    ${LTO} \
-    --enable-libssp \
-    --disable-bootstrap \
-    --disable-libmudflap \
-    --with-system-zlib \
-    --enable-linker-build-id \
-    --with-ppl=no \
-    --with-cloog=no \
-    --enable-checking=release \
-    --enable-cheaders=c_global \
-"
-
-EXTRA_OECONF_INITIAL = "\
-    --disable-libmudflap \
-    --disable-libgomp \
-    --disable-libssp \
-    --disable-libquadmath \
-    --with-system-zlib \
-    --disable-lto \
-    --disable-plugin \
-    --enable-decimal-float=no \
-"
-
-EXTRA_OECONF_INTERMEDIATE = "\
-    --disable-libmudflap \
-    --disable-libgomp \
-    --disable-libquadmath \
-    --with-system-zlib \
-    --disable-lto \
-    --disable-plugin \
-    --disable-libssp \
-"
-
-EXTRA_OECONF:append:libc-uclibc = " --disable-decimal-float "
-
-EXTRA_OECONF:append:arc = ' --with-pkgversion="ARCompact/ARCv2 ISA elf32 toolchain ${SRCREV}"'
-
-EXTRA_OECONF_PATHS = "\
-    --with-gxx-include-dir=${STAGING_DIR_TARGET}${target_includedir}/c++/${BINV} \
-    --with-sysroot=${STAGING_DIR_TARGET} \
-    --with-build-sysroot=${STAGING_DIR_TARGET} \
-"
-
diff --git a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross-canadian_6.x.arc.bb b/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross-canadian_6.x.arc.bb
deleted file mode 100644
index bc4a3b3..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross-canadian_6.x.arc.bb
+++ /dev/null
@@ -1,8 +0,0 @@
-require recipes-devtools-arc/gcc/gcc-${PV}.inc
-require recipes-devtools/gcc/gcc-cross-canadian.inc
-
-EXTRA_OECONF:append:libc-baremetal = " --without-headers"
-EXTRA_OECONF:remove:libc-baremetal = "--with-sysroot=/not/exist"
-EXTRA_OECONF:remove:libc-baremetal = "--with-build-sysroot=${STAGING_DIR_TARGET}"
-EXTRA_OECONF:append:libc-baremetal = " --enable-plugin "
-
diff --git a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross_6.x.arc .bb b/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross_6.x.arc .bb
deleted file mode 100644
index 6cf71c6..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-cross_6.x.arc .bb	
+++ /dev/null
@@ -1,11 +0,0 @@
-require recipes-devtools-arc/gcc/gcc-6.x.arc.inc
-require recipes-devtools/gcc/gcc-cross.inc
-
-DEPENDS:remove:libc-baremetal := "virtual/${TARGET_PREFIX}libc-for-gcc"
-EXTRA_OECONF:append:libc-baremetal = " --without-headers"
-EXTRA_OECONF:remove:libc-baremetal = "--with-sysroot=/not/exist"
-EXTRA_OECONF:remove:libc-baremetal = "--enable-threads=posix"
-
-#COMPATIBLE_MACHINE = "arc"
-
-BBCLASSEXTEND = "nativesdk"
diff --git a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-source_6.x.arc.bb b/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-source_6.x.arc.bb
deleted file mode 100644
index 6272f7d..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/gcc/gcc-source_6.x.arc.bb
+++ /dev/null
@@ -1,2 +0,0 @@
-require recipes-devtools-arc/gcc/gcc-6.x.arc.inc
-require recipes-devtools/gcc/gcc-source.inc
diff --git a/meta-zephyr-core/recipes-devtools-arc/gcc/libgcc_6.x.arc.bb b/meta-zephyr-core/recipes-devtools-arc/gcc/libgcc_6.x.arc.bb
deleted file mode 100644
index 2ad8d34..0000000
--- a/meta-zephyr-core/recipes-devtools-arc/gcc/libgcc_6.x.arc.bb
+++ /dev/null
@@ -1,14 +0,0 @@
-require recipes-devtools-arc/gcc/gcc-6.x.arc.inc
-require recipes-devtools/gcc/libgcc.inc
-
-INHIBIT_PACKAGE_DEBUG_SPLIT = "1"
-#COMPATIBLE_MACHINE = "arc"
-
-EXTRA_OECONF:append:arc = " --disable-multilib"
-#EXTRA_OECONF_append_arc = " --enable-multilib"
-
-# ERROR: QA Issue: Architecture did not match (195 to 93) 
-INSANE_SKIP:${PN}-dev += "arch"
-
-# ERROR: QA Issue: non -staticdev package contains static .a library
-INSANE_SKIP:${PN}-dev += "staticdev"
diff --git a/meta-zephyr-core/recipes-devtools/gcc/gcc-cross_6.%.bbappend b/meta-zephyr-core/recipes-devtools/gcc/gcc-cross_6.%.bbappend
deleted file mode 100644
index 2b2c713..0000000
--- a/meta-zephyr-core/recipes-devtools/gcc/gcc-cross_6.%.bbappend
+++ /dev/null
@@ -1 +0,0 @@
-EXTRA_OECONF:append:armv7m = " --with-arch=armv7-m --with-mode=thumb "
diff --git a/meta-zephyr-core/recipes-devtools/gcc/libgcc_6.%.bbappend b/meta-zephyr-core/recipes-devtools/gcc/libgcc_6.%.bbappend
deleted file mode 100644
index 80bb46c..0000000
--- a/meta-zephyr-core/recipes-devtools/gcc/libgcc_6.%.bbappend
+++ /dev/null
@@ -1,3 +0,0 @@
-EXTRA_OECONF:remove =   "--enable_multilib"
-EXTRA_OECONF:append =   " --disable-multilib"
-
-- 
2.25.1



^ permalink raw reply related	[flat|nested] 5+ messages in thread
* [meta-zephyr][PATCH v2 5/5] newlib: add bbappend
  2022-11-10  7:09 [meta-zephyr][PATCH v2 1/5] zephyr-kernel-src: add support for v3.2.0 Naveen Saini
                   ` (2 preceding siblings ...)
  2022-11-10  7:09 ` [meta-zephyr][PATCH v2 4/5] arc: drop obsolete recipes and bbappends Naveen Saini
@ 2022-11-10  7:09 ` Naveen Saini
  3 siblings, 0 replies; 5+ messages in thread
From: Naveen Saini @ 2022-11-10  7:09 UTC (permalink / raw)
  To: yocto

Build newlib library to be thread-safe in multithreaded environment.

https://github.com/zephyrproject-rtos/zephyr/pull/21518
https://github.com/zephyrproject-rtos/zephyr/issues/21519
https://github.com/zephyrproject-rtos/zephyr/pull/36201

https://sourceware.org/legacy-ml/newlib/2016/msg01165.html
https://sourceware.org/git/?p=newlib-cygwin.git;a=commit;h=bd54749095ee45d7136b6e7c8a1e5218749c87b6

Error log:
newlib/libc-hooks.c:310:1: note: in expansion of macro 'BUILD_ASSERT'
BUILD_ASSERT(IS_ENABLED(_RETARGETABLE_LOCKING), "Retargetable locking must be enabled");

Signed-off-by: Naveen Saini <naveen.kumar.saini@intel.com>
---
 meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend

diff --git a/meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend b/meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend
new file mode 100644
index 0000000..1a20b06
--- /dev/null
+++ b/meta-zephyr-core/recipes-core/newlib/newlib_%.bbappend
@@ -0,0 +1,5 @@
+# BUILD_ASSERT(IS_ENABLED(_RETARGETABLE_LOCKING), "Retargetable locking must be enabled");
+
+EXTRA_OECONF:append = " \
+        --enable-newlib-retargetable-locking \
+        "
-- 
2.25.1



^ permalink raw reply related	[flat|nested] 5+ messages in thread
end of thread, other threads:[~2022-11-10  6:49 UTC | newest]

Thread overview: 5+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2022-11-10  7:09 [meta-zephyr][PATCH v2 1/5] zephyr-kernel-src: add support for v3.2.0 Naveen Saini
2022-11-10  7:09 ` [meta-zephyr][PATCH v2 2/5] zephyr-kernel-src: drop support for v2.7.3 Naveen Saini
2022-11-10  7:09 ` [meta-zephyr][PATCH v2 3/5] zephyr-sdk: upgrade 0.14.2 -> 0.15.1 Naveen Saini
2022-11-10  7:09 ` [meta-zephyr][PATCH v2 4/5] arc: drop obsolete recipes and bbappends Naveen Saini
2022-11-10  7:09 ` [meta-zephyr][PATCH v2 5/5] newlib: add bbappend Naveen Saini

