* runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
@ 2022-03-16 11:45 Edgar Mobile
  2022-03-16 14:51 ` [yocto] " Alexander Kanavin
  0 siblings, 1 reply; 12+ messages in thread
From: Edgar Mobile @ 2022-03-16 11:45 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 413 bytes --]

Greetings,

I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual

https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html

I then try to run

runqemu sdl gl

But it always aborts with

runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

What can I do?

Regards

[-- Attachment #2: Type: text/html, Size: 2583 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-16 11:45 runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available Edgar Mobile
@ 2022-03-16 14:51 ` Alexander Kanavin
  2022-03-17  9:33   ` Edgar Mobile
  0 siblings, 1 reply; 12+ messages in thread
From: Alexander Kanavin @ 2022-03-16 14:51 UTC (permalink / raw)
  To: Edgar Mobile; +Cc: yocto

This configuration is not tested. If you want accelerated gl, build
for the qemux86-64 target.

Alex

On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> Greetings,
>
> I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
>
> https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
>
> I then try to run
>
> runqemu sdl gl
>
> But it always aborts with
>
> runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> What can I do?
>
> Regards
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>


^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-16 14:51 ` [yocto] " Alexander Kanavin
@ 2022-03-17  9:33   ` Edgar Mobile
  2022-03-17 10:33     ` Alexander Kanavin
  0 siblings, 1 reply; 12+ messages in thread
From: Edgar Mobile @ 2022-03-17  9:33 UTC (permalink / raw)
  To: Alexander Kanavin; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 2323 bytes --]

Sorry, but I need an Aarch64 guest.

Ok, using a newer qemu I now encounter the following problem:

root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
EGL client extensions string:
    EGL_EXT_client_extensions EGL_EXT_device_base
    EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
    EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
    EGL_EXT_platform_device EGL_EXT_platform_wayland
    EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
    EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
    EGL_MESA_platform_surfaceless

GBM platform:
pci id for fd 3: 1234:1111, driver (null)
MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
failed to load driver: bochs-drm
...


What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?

________________________________
From: Alexander Kanavin <alex.kanavin@gmail.com>
Sent: Wednesday, March 16, 2022 2:51 PM
To: Edgar Mobile <heideggm@hotmail.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

This configuration is not tested. If you want accelerated gl, build
for the qemux86-64 target.

Alex

On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> Greetings,
>
> I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
>
> https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
>
> I then try to run
>
> runqemu sdl gl
>
> But it always aborts with
>
> runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> What can I do?
>
> Regards
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>

[-- Attachment #2: Type: text/html, Size: 6577 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-17  9:33   ` Edgar Mobile
@ 2022-03-17 10:33     ` Alexander Kanavin
  2022-03-17 10:40       ` Edgar Mobile
  0 siblings, 1 reply; 12+ messages in thread
From: Alexander Kanavin @ 2022-03-17 10:33 UTC (permalink / raw)
  To: Edgar Mobile; +Cc: yocto

If you want an aarch guest on x86, then drop the gl option from
runqemu. This will fall back to software rendering.

Alex

On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> Sorry, but I need an Aarch64 guest.
>
> Ok, using a newer qemu I now encounter the following problem:
>
> root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> EGL client extensions string:
>     EGL_EXT_client_extensions EGL_EXT_device_base
>     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
>     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
>     EGL_EXT_platform_device EGL_EXT_platform_wayland
>     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
>     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
>     EGL_MESA_platform_surfaceless
>
> GBM platform:
> pci id for fd 3: 1234:1111, driver (null)
> MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> failed to load driver: bochs-drm
> ...
>
>
> What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com>
> Sent: Wednesday, March 16, 2022 2:51 PM
> To: Edgar Mobile <heideggm@hotmail.com>
> Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> This configuration is not tested. If you want accelerated gl, build
> for the qemux86-64 target.
>
> Alex
>
> On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > Greetings,
> >
> > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> >
> > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> >
> > I then try to run
> >
> > runqemu sdl gl
> >
> > But it always aborts with
> >
> > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > What can I do?
> >
> > Regards
> >
> > -=-=-=-=-=-=-=-=-=-=-=-
> > Links: You receive all messages sent to this group.
> > View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> > Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> > Group Owner: yocto+owner@lists.yoctoproject.org
> > Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> > -=-=-=-=-=-=-=-=-=-=-=-
> >


^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-17 10:33     ` Alexander Kanavin
@ 2022-03-17 10:40       ` Edgar Mobile
  2022-03-17 11:26         ` Alexander Kanavin
  0 siblings, 1 reply; 12+ messages in thread
From: Edgar Mobile @ 2022-03-17 10:40 UTC (permalink / raw)
  To: Alexander Kanavin; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 3124 bytes --]

I tried that first and it was horribly slow. That's why I try hardware acceleration now.

Do you _know_ it doesn't work? If yes, why?

________________________________
From: Alexander Kanavin <alex.kanavin@gmail.com>
Sent: Thursday, March 17, 2022 10:33 AM
To: Edgar Mobile <heideggm@hotmail.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

If you want an aarch guest on x86, then drop the gl option from
runqemu. This will fall back to software rendering.

Alex

On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> Sorry, but I need an Aarch64 guest.
>
> Ok, using a newer qemu I now encounter the following problem:
>
> root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> EGL client extensions string:
>     EGL_EXT_client_extensions EGL_EXT_device_base
>     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
>     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
>     EGL_EXT_platform_device EGL_EXT_platform_wayland
>     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
>     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
>     EGL_MESA_platform_surfaceless
>
> GBM platform:
> pci id for fd 3: 1234:1111, driver (null)
> MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> failed to load driver: bochs-drm
> ...
>
>
> What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com>
> Sent: Wednesday, March 16, 2022 2:51 PM
> To: Edgar Mobile <heideggm@hotmail.com>
> Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> This configuration is not tested. If you want accelerated gl, build
> for the qemux86-64 target.
>
> Alex
>
> On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > Greetings,
> >
> > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> >
> > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> >
> > I then try to run
> >
> > runqemu sdl gl
> >
> > But it always aborts with
> >
> > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > What can I do?
> >
> > Regards
> >
> > -=-=-=-=-=-=-=-=-=-=-=-
> > Links: You receive all messages sent to this group.
> > View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> > Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> > Group Owner: yocto+owner@lists.yoctoproject.org
> > Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> > -=-=-=-=-=-=-=-=-=-=-=-
> >

[-- Attachment #2: Type: text/html, Size: 5185 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-17 10:40       ` Edgar Mobile
@ 2022-03-17 11:26         ` Alexander Kanavin
  2022-03-17 13:02           ` Edgar Mobile
  0 siblings, 1 reply; 12+ messages in thread
From: Alexander Kanavin @ 2022-03-17 11:26 UTC (permalink / raw)
  To: Edgar Mobile; +Cc: yocto

As I told you, we do not support or test this combination. Which means
that figuring out what the error messages mean and how to fix them is
on you - patches welcome.

Alex

On Thu, 17 Mar 2022 at 11:41, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> I tried that first and it was horribly slow. That's why I try hardware acceleration now.
>
> Do you _know_ it doesn't work? If yes, why?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com>
> Sent: Thursday, March 17, 2022 10:33 AM
> To: Edgar Mobile <heideggm@hotmail.com>
> Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> If you want an aarch guest on x86, then drop the gl option from
> runqemu. This will fall back to software rendering.
>
> Alex
>
> On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > Sorry, but I need an Aarch64 guest.
> >
> > Ok, using a newer qemu I now encounter the following problem:
> >
> > root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> > EGL client extensions string:
> >     EGL_EXT_client_extensions EGL_EXT_device_base
> >     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
> >     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
> >     EGL_EXT_platform_device EGL_EXT_platform_wayland
> >     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
> >     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
> >     EGL_MESA_platform_surfaceless
> >
> > GBM platform:
> > pci id for fd 3: 1234:1111, driver (null)
> > MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> > failed to load driver: bochs-drm
> > ...
> >
> >
> > What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
> >
> > ________________________________
> > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > Sent: Wednesday, March 16, 2022 2:51 PM
> > To: Edgar Mobile <heideggm@hotmail.com>
> > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > This configuration is not tested. If you want accelerated gl, build
> > for the qemux86-64 target.
> >
> > Alex
> >
> > On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
> > >
> > > Greetings,
> > >
> > > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> > >
> > > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> > >
> > > I then try to run
> > >
> > > runqemu sdl gl
> > >
> > > But it always aborts with
> > >
> > > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > >
> > > What can I do?
> > >
> > > Regards
> > >
> > > -=-=-=-=-=-=-=-=-=-=-=-
> > > Links: You receive all messages sent to this group.
> > > View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> > > Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> > > Group Owner: yocto+owner@lists.yoctoproject.org
> > > Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> > > -=-=-=-=-=-=-=-=-=-=-=-
> > >


^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-17 11:26         ` Alexander Kanavin
@ 2022-03-17 13:02           ` Edgar Mobile
  2022-03-17 13:51             ` Alexander Kanavin
  0 siblings, 1 reply; 12+ messages in thread
From: Edgar Mobile @ 2022-03-17 13:02 UTC (permalink / raw)
  To: Alexander Kanavin; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 3955 bytes --]

Do you know if bochs driver is available and active for yocto 3.4 or 3.5?

________________________________
From: Alexander Kanavin <alex.kanavin@gmail.com>
Sent: Thursday, March 17, 2022 11:26 AM
To: Edgar Mobile <heideggm@hotmail.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

As I told you, we do not support or test this combination. Which means
that figuring out what the error messages mean and how to fix them is
on you - patches welcome.

Alex

On Thu, 17 Mar 2022 at 11:41, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> I tried that first and it was horribly slow. That's why I try hardware acceleration now.
>
> Do you _know_ it doesn't work? If yes, why?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com>
> Sent: Thursday, March 17, 2022 10:33 AM
> To: Edgar Mobile <heideggm@hotmail.com>
> Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> If you want an aarch guest on x86, then drop the gl option from
> runqemu. This will fall back to software rendering.
>
> Alex
>
> On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > Sorry, but I need an Aarch64 guest.
> >
> > Ok, using a newer qemu I now encounter the following problem:
> >
> > root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> > EGL client extensions string:
> >     EGL_EXT_client_extensions EGL_EXT_device_base
> >     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
> >     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
> >     EGL_EXT_platform_device EGL_EXT_platform_wayland
> >     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
> >     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
> >     EGL_MESA_platform_surfaceless
> >
> > GBM platform:
> > pci id for fd 3: 1234:1111, driver (null)
> > MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> > failed to load driver: bochs-drm
> > ...
> >
> >
> > What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
> >
> > ________________________________
> > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > Sent: Wednesday, March 16, 2022 2:51 PM
> > To: Edgar Mobile <heideggm@hotmail.com>
> > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > This configuration is not tested. If you want accelerated gl, build
> > for the qemux86-64 target.
> >
> > Alex
> >
> > On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
> > >
> > > Greetings,
> > >
> > > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> > >
> > > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> > >
> > > I then try to run
> > >
> > > runqemu sdl gl
> > >
> > > But it always aborts with
> > >
> > > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > >
> > > What can I do?
> > >
> > > Regards
> > >
> > > -=-=-=-=-=-=-=-=-=-=-=-
> > > Links: You receive all messages sent to this group.
> > > View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> > > Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> > > Group Owner: yocto+owner@lists.yoctoproject.org
> > > Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> > > -=-=-=-=-=-=-=-=-=-=-=-
> > >

[-- Attachment #2: Type: text/html, Size: 6148 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-17 13:02           ` Edgar Mobile
@ 2022-03-17 13:51             ` Alexander Kanavin
  2022-03-17 14:00               ` Edgar Mobile
       [not found]               ` <16DD2FD3E4D1257B.29979@lists.yoctoproject.org>
  0 siblings, 2 replies; 12+ messages in thread
From: Alexander Kanavin @ 2022-03-17 13:51 UTC (permalink / raw)
  To: Edgar Mobile; +Cc: yocto

There is no hardware acceleration with bochs at all, if you want it,
you need to make virtio/virgl driver work.

Alex

On Thu, 17 Mar 2022 at 14:02, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> Do you know if bochs driver is available and active for yocto 3.4 or 3.5?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com>
> Sent: Thursday, March 17, 2022 11:26 AM
> To: Edgar Mobile <heideggm@hotmail.com>
> Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> As I told you, we do not support or test this combination. Which means
> that figuring out what the error messages mean and how to fix them is
> on you - patches welcome.
>
> Alex
>
> On Thu, 17 Mar 2022 at 11:41, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > I tried that first and it was horribly slow. That's why I try hardware acceleration now.
> >
> > Do you _know_ it doesn't work? If yes, why?
> >
> > ________________________________
> > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > Sent: Thursday, March 17, 2022 10:33 AM
> > To: Edgar Mobile <heideggm@hotmail.com>
> > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > If you want an aarch guest on x86, then drop the gl option from
> > runqemu. This will fall back to software rendering.
> >
> > Alex
> >
> > On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com> wrote:
> > >
> > > Sorry, but I need an Aarch64 guest.
> > >
> > > Ok, using a newer qemu I now encounter the following problem:
> > >
> > > root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> > > EGL client extensions string:
> > >     EGL_EXT_client_extensions EGL_EXT_device_base
> > >     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
> > >     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
> > >     EGL_EXT_platform_device EGL_EXT_platform_wayland
> > >     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
> > >     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
> > >     EGL_MESA_platform_surfaceless
> > >
> > > GBM platform:
> > > pci id for fd 3: 1234:1111, driver (null)
> > > MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> > > failed to load driver: bochs-drm
> > > ...
> > >
> > >
> > > What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
> > >
> > > ________________________________
> > > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > > Sent: Wednesday, March 16, 2022 2:51 PM
> > > To: Edgar Mobile <heideggm@hotmail.com>
> > > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > >
> > > This configuration is not tested. If you want accelerated gl, build
> > > for the qemux86-64 target.
> > >
> > > Alex
> > >
> > > On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
> > > >
> > > > Greetings,
> > > >
> > > > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> > > >
> > > > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> > > >
> > > > I then try to run
> > > >
> > > > runqemu sdl gl
> > > >
> > > > But it always aborts with
> > > >
> > > > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > > >
> > > > What can I do?
> > > >
> > > > Regards
> > > >
> > > > -=-=-=-=-=-=-=-=-=-=-=-
> > > > Links: You receive all messages sent to this group.
> > > > View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> > > > Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> > > > Group Owner: yocto+owner@lists.yoctoproject.org
> > > > Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> > > > -=-=-=-=-=-=-=-=-=-=-=-
> > > >


^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-17 13:51             ` Alexander Kanavin
@ 2022-03-17 14:00               ` Edgar Mobile
       [not found]               ` <16DD2FD3E4D1257B.29979@lists.yoctoproject.org>
  1 sibling, 0 replies; 12+ messages in thread
From: Edgar Mobile @ 2022-03-17 14:00 UTC (permalink / raw)
  To: Alexander Kanavin; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 4936 bytes --]

Ah, that's an interesting information.
The dmesg log gives the impression that virgl starts correctly and in the normal shell the examples work flawlessly. The problems start once I tell weston to use the ivi-shell instead of the desktop shell.

________________________________
From: Alexander Kanavin <alex.kanavin@gmail.com>
Sent: Thursday, March 17, 2022 1:51 PM
To: Edgar Mobile <heideggm@hotmail.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

There is no hardware acceleration with bochs at all, if you want it,
you need to make virtio/virgl driver work.

Alex

On Thu, 17 Mar 2022 at 14:02, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> Do you know if bochs driver is available and active for yocto 3.4 or 3.5?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com>
> Sent: Thursday, March 17, 2022 11:26 AM
> To: Edgar Mobile <heideggm@hotmail.com>
> Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> As I told you, we do not support or test this combination. Which means
> that figuring out what the error messages mean and how to fix them is
> on you - patches welcome.
>
> Alex
>
> On Thu, 17 Mar 2022 at 11:41, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > I tried that first and it was horribly slow. That's why I try hardware acceleration now.
> >
> > Do you _know_ it doesn't work? If yes, why?
> >
> > ________________________________
> > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > Sent: Thursday, March 17, 2022 10:33 AM
> > To: Edgar Mobile <heideggm@hotmail.com>
> > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > If you want an aarch guest on x86, then drop the gl option from
> > runqemu. This will fall back to software rendering.
> >
> > Alex
> >
> > On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com> wrote:
> > >
> > > Sorry, but I need an Aarch64 guest.
> > >
> > > Ok, using a newer qemu I now encounter the following problem:
> > >
> > > root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> > > EGL client extensions string:
> > >     EGL_EXT_client_extensions EGL_EXT_device_base
> > >     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
> > >     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
> > >     EGL_EXT_platform_device EGL_EXT_platform_wayland
> > >     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
> > >     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
> > >     EGL_MESA_platform_surfaceless
> > >
> > > GBM platform:
> > > pci id for fd 3: 1234:1111, driver (null)
> > > MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> > > failed to load driver: bochs-drm
> > > ...
> > >
> > >
> > > What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
> > >
> > > ________________________________
> > > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > > Sent: Wednesday, March 16, 2022 2:51 PM
> > > To: Edgar Mobile <heideggm@hotmail.com>
> > > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > >
> > > This configuration is not tested. If you want accelerated gl, build
> > > for the qemux86-64 target.
> > >
> > > Alex
> > >
> > > On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
> > > >
> > > > Greetings,
> > > >
> > > > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> > > >
> > > > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> > > >
> > > > I then try to run
> > > >
> > > > runqemu sdl gl
> > > >
> > > > But it always aborts with
> > > >
> > > > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > > >
> > > > What can I do?
> > > >
> > > > Regards
> > > >
> > > > -=-=-=-=-=-=-=-=-=-=-=-
> > > > Links: You receive all messages sent to this group.
> > > > View/Reply Online (#56467): https://lists.yoctoproject.org/g/yocto/message/56467
> > > > Mute This Topic: https://lists.yoctoproject.org/mt/89819473/1686489
> > > > Group Owner: yocto+owner@lists.yoctoproject.org
> > > > Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [alex.kanavin@gmail.com]
> > > > -=-=-=-=-=-=-=-=-=-=-=-
> > > >

[-- Attachment #2: Type: text/html, Size: 7618 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
       [not found]               ` <16DD2FD3E4D1257B.29979@lists.yoctoproject.org>
@ 2022-03-18 19:26                 ` Edgar Mobile
  2022-03-18 19:28                   ` Alexander Kanavin
  0 siblings, 1 reply; 12+ messages in thread
From: Edgar Mobile @ 2022-03-18 19:26 UTC (permalink / raw)
  To: Alexander Kanavin; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 5558 bytes --]


Okay, I finally got it running. What I did:


  *   Upgraded all my host packages from this ppa: https://launchpad.net/~savoury1/+archive/ubuntu/display
  *   Built fresh Yocto 3.4, core-image-weston with virgl
  *   Built 6.2 qemu separately and used that. Added -device virtio-gpu-gl-pci

Now I have a comfy Gles 3.2 context!

Tx

Display - various (Xenial & newer) : Rob Savoury<https://launchpad.net/~savoury1/+archive/ubuntu/display>
Display PPA (drm 2.4.109, mesa 21.3.3, xserver 1.20.13) Xenial & newer. *** Please always check https:/ /launchpad. net/~savoury1 first for general updates about this ...
launchpad.net


________________________________
From: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org> on behalf of Edgar Mobile <heideggm@hotmail.com>
Sent: Thursday, March 17, 2022 2:00 PM
To: Alexander Kanavin <alex.kanavin@gmail.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

Ah, that's an interesting information.
The dmesg log gives the impression that virgl starts correctly and in the normal shell the examples work flawlessly. The problems start once I tell weston to use the ivi-shell instead of the desktop shell.

________________________________
From: Alexander Kanavin <alex.kanavin@gmail.com>
Sent: Thursday, March 17, 2022 1:51 PM
To: Edgar Mobile <heideggm@hotmail.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

There is no hardware acceleration with bochs at all, if you want it,
you need to make virtio/virgl driver work.

Alex

On Thu, 17 Mar 2022 at 14:02, Edgar Mobile <heideggm@hotmail.com> wrote:
>
> Do you know if bochs driver is available and active for yocto 3.4 or 3.5?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com>
> Sent: Thursday, March 17, 2022 11:26 AM
> To: Edgar Mobile <heideggm@hotmail.com>
> Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> As I told you, we do not support or test this combination. Which means
> that figuring out what the error messages mean and how to fix them is
> on you - patches welcome.
>
> Alex
>
> On Thu, 17 Mar 2022 at 11:41, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > I tried that first and it was horribly slow. That's why I try hardware acceleration now.
> >
> > Do you _know_ it doesn't work? If yes, why?
> >
> > ________________________________
> > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > Sent: Thursday, March 17, 2022 10:33 AM
> > To: Edgar Mobile <heideggm@hotmail.com>
> > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > If you want an aarch guest on x86, then drop the gl option from
> > runqemu. This will fall back to software rendering.
> >
> > Alex
> >
> > On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com> wrote:
> > >
> > > Sorry, but I need an Aarch64 guest.
> > >
> > > Ok, using a newer qemu I now encounter the following problem:
> > >
> > > root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> > > EGL client extensions string:
> > >     EGL_EXT_client_extensions EGL_EXT_device_base
> > >     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
> > >     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
> > >     EGL_EXT_platform_device EGL_EXT_platform_wayland
> > >     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
> > >     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
> > >     EGL_MESA_platform_surfaceless
> > >
> > > GBM platform:
> > > pci id for fd 3: 1234:1111, driver (null)
> > > MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> > > failed to load driver: bochs-drm
> > > ...
> > >
> > >
> > > What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
> > >
> > > ________________________________
> > > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > > Sent: Wednesday, March 16, 2022 2:51 PM
> > > To: Edgar Mobile <heideggm@hotmail.com>
> > > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > >
> > > This configuration is not tested. If you want accelerated gl, build
> > > for the qemux86-64 target.
> > >
> > > Alex
> > >
> > > On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com> wrote:
> > > >
> > > > Greetings,
> > > >
> > > > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> > > >
> > > > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> > > >
> > > > I then try to run
> > > >
> > > > runqemu sdl gl
> > > >
> > > > But it always aborts with
> > > >
> > > > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > > >
> > > > What can I do?
> > > >
> > > > Regards
> > > >
> > > >
> > > >

[-- Attachment #2: Type: text/html, Size: 10399 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-18 19:26                 ` Edgar Mobile
@ 2022-03-18 19:28                   ` Alexander Kanavin
  2022-03-18 19:35                     ` Edgar Mobile
  0 siblings, 1 reply; 12+ messages in thread
From: Alexander Kanavin @ 2022-03-18 19:28 UTC (permalink / raw)
  To: Edgar Mobile; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 5921 bytes --]

Cheers :) Just wondering what GPU and driver are you using on the host?

Alex

On Fri, 18 Mar 2022 at 20:26, Edgar Mobile <heideggm@hotmail.com> wrote:

>
> Okay, I finally got it running. What I did:
>
>
>    - Upgraded all my host packages from this ppa:
>    https://launchpad.net/~savoury1/+archive/ubuntu/display
>    - Built fresh Yocto 3.4, core-image-weston with virgl
>    - Built 6.2 qemu separately and used that. Added -device
>    virtio-gpu-gl-pci
>
> Now I have a comfy Gles 3.2 context!
>
> Tx
>
>    Display - various (Xenial & newer) : Rob Savoury
>    <https://launchpad.net/~savoury1/+archive/ubuntu/display>
>    Display PPA (drm 2.4.109, mesa 21.3.3, xserver 1.20.13) Xenial &
>    newer. *** Please always check https:/ /launchpad. net/~savoury1 first for
>    general updates about this ...
>    launchpad.net
>
>
>
> ------------------------------
> *From:* yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org> on
> behalf of Edgar Mobile <heideggm@hotmail.com>
> *Sent:* Thursday, March 17, 2022 2:00 PM
> *To:* Alexander Kanavin <alex.kanavin@gmail.com>
> *Cc:* yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> *Subject:* Re: [yocto] runqemu - ERROR - Failed to run qemu:
> qemu-system-aarch64: Virtio VGA not available.
>
> Ah, that's an interesting information.
> The dmesg log gives the impression that virgl starts correctly and in the
> normal shell the examples work flawlessly. The problems start once I tell
> weston to use the ivi-shell instead of the desktop shell.
>
> ------------------------------
> *From:* Alexander Kanavin <alex.kanavin@gmail.com>
> *Sent:* Thursday, March 17, 2022 1:51 PM
> *To:* Edgar Mobile <heideggm@hotmail.com>
> *Cc:* yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> *Subject:* Re: [yocto] runqemu - ERROR - Failed to run qemu:
> qemu-system-aarch64: Virtio VGA not available.
>
> There is no hardware acceleration with bochs at all, if you want it,
> you need to make virtio/virgl driver work.
>
> Alex
>
> On Thu, 17 Mar 2022 at 14:02, Edgar Mobile <heideggm@hotmail.com> wrote:
> >
> > Do you know if bochs driver is available and active for yocto 3.4 or 3.5?
> >
> > ________________________________
> > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > Sent: Thursday, March 17, 2022 11:26 AM
> > To: Edgar Mobile <heideggm@hotmail.com>
> > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu:
> qemu-system-aarch64: Virtio VGA not available.
> >
> > As I told you, we do not support or test this combination. Which means
> > that figuring out what the error messages mean and how to fix them is
> > on you - patches welcome.
> >
> > Alex
> >
> > On Thu, 17 Mar 2022 at 11:41, Edgar Mobile <heideggm@hotmail.com> wrote:
> > >
> > > I tried that first and it was horribly slow. That's why I try hardware
> acceleration now.
> > >
> > > Do you _know_ it doesn't work? If yes, why?
> > >
> > > ________________________________
> > > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > > Sent: Thursday, March 17, 2022 10:33 AM
> > > To: Edgar Mobile <heideggm@hotmail.com>
> > > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu:
> qemu-system-aarch64: Virtio VGA not available.
> > >
> > > If you want an aarch guest on x86, then drop the gl option from
> > > runqemu. This will fall back to software rendering.
> > >
> > > Alex
> > >
> > > On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com>
> wrote:
> > > >
> > > > Sorry, but I need an Aarch64 guest.
> > > >
> > > > Ok, using a newer qemu I now encounter the following problem:
> > > >
> > > > root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> > > > EGL client extensions string:
> > > >     EGL_EXT_client_extensions EGL_EXT_device_base
> > > >     EGL_EXT_device_enumeration EGL_EXT_device_query
> EGL_EXT_platform_base
> > > >     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
> > > >     EGL_EXT_platform_device EGL_EXT_platform_wayland
> > > >     EGL_KHR_platform_wayland EGL_EXT_platform_x11
> EGL_KHR_platform_x11
> > > >     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
> > > >     EGL_MESA_platform_surfaceless
> > > >
> > > > GBM platform:
> > > > pci id for fd 3: 1234:1111, driver (null)
> > > > MESA-LOADER: failed to open bochs-drm:
> /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file
> or directory (search paths /usr/lib/dri)
> > > > failed to load driver: bochs-drm
> > > > ...
> > > >
> > > >
> > > > What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto
> provide it?
> > > >
> > > > ________________________________
> > > > From: Alexander Kanavin <alex.kanavin@gmail.com>
> > > > Sent: Wednesday, March 16, 2022 2:51 PM
> > > > To: Edgar Mobile <heideggm@hotmail.com>
> > > > Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> > > > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu:
> qemu-system-aarch64: Virtio VGA not available.
> > > >
> > > > This configuration is not tested. If you want accelerated gl, build
> > > > for the qemux86-64 target.
> > > >
> > > > Alex
> > > >
> > > > On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com>
> wrote:
> > > > >
> > > > > Greetings,
> > > > >
> > > > > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that
> purpose, I built core-image-weston from Hardknott following the manual
> > > > >
> > > > >
> https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> > > > >
> > > > > I then try to run
> > > > >
> > > > > runqemu sdl gl
> > > > >
> > > > > But it always aborts with
> > > > >
> > > > > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio
> VGA not available.
> > > > >
> > > > > What can I do?
> > > > >
> > > > > Regards
> > > > >
> > > > >
> > > > >
>

[-- Attachment #2: Type: text/html, Size: 12186 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
* Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
  2022-03-18 19:28                   ` Alexander Kanavin
@ 2022-03-18 19:35                     ` Edgar Mobile
  0 siblings, 0 replies; 12+ messages in thread
From: Edgar Mobile @ 2022-03-18 19:35 UTC (permalink / raw)
  To: Alexander Kanavin; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 7063 bytes --]

It's a mobile Nvidia Quadro M1000M with an official driver. Driver version...uuuh 495 something.

________________________________
From: Alexander Kanavin <alex.kanavin@gmail.com>
Sent: Friday, March 18, 2022 7:28 PM
To: Edgar Mobile <heideggm@hotmail.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

Cheers :) Just wondering what GPU and driver are you using on the host?

Alex

On Fri, 18 Mar 2022 at 20:26, Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>> wrote:

Okay, I finally got it running. What I did:


  *   Upgraded all my host packages from this ppa: https://launchpad.net/~savoury1/+archive/ubuntu/display
  *   Built fresh Yocto 3.4, core-image-weston with virgl
  *   Built 6.2 qemu separately and used that. Added -device virtio-gpu-gl-pci

Now I have a comfy Gles 3.2 context!

Tx

Display - various (Xenial & newer) : Rob Savoury<https://launchpad.net/~savoury1/+archive/ubuntu/display>
Display PPA (drm 2.4.109, mesa 21.3.3, xserver 1.20.13) Xenial & newer. *** Please always check https:/ /launchpad. net/~savoury1 first for general updates about this ...
launchpad.net<http://launchpad.net>


________________________________
From: yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org> <yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org>> on behalf of Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>>
Sent: Thursday, March 17, 2022 2:00 PM
To: Alexander Kanavin <alex.kanavin@gmail.com<mailto:alex.kanavin@gmail.com>>
Cc: yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org> <yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org>>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

Ah, that's an interesting information.
The dmesg log gives the impression that virgl starts correctly and in the normal shell the examples work flawlessly. The problems start once I tell weston to use the ivi-shell instead of the desktop shell.

________________________________
From: Alexander Kanavin <alex.kanavin@gmail.com<mailto:alex.kanavin@gmail.com>>
Sent: Thursday, March 17, 2022 1:51 PM
To: Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>>
Cc: yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org> <yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org>>
Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.

There is no hardware acceleration with bochs at all, if you want it,
you need to make virtio/virgl driver work.

Alex

On Thu, 17 Mar 2022 at 14:02, Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>> wrote:
>
> Do you know if bochs driver is available and active for yocto 3.4 or 3.5?
>
> ________________________________
> From: Alexander Kanavin <alex.kanavin@gmail.com<mailto:alex.kanavin@gmail.com>>
> Sent: Thursday, March 17, 2022 11:26 AM
> To: Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>>
> Cc: yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org> <yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org>>
> Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
>
> As I told you, we do not support or test this combination. Which means
> that figuring out what the error messages mean and how to fix them is
> on you - patches welcome.
>
> Alex
>
> On Thu, 17 Mar 2022 at 11:41, Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>> wrote:
> >
> > I tried that first and it was horribly slow. That's why I try hardware acceleration now.
> >
> > Do you _know_ it doesn't work? If yes, why?
> >
> > ________________________________
> > From: Alexander Kanavin <alex.kanavin@gmail.com<mailto:alex.kanavin@gmail.com>>
> > Sent: Thursday, March 17, 2022 10:33 AM
> > To: Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>>
> > Cc: yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org> <yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org>>
> > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> >
> > If you want an aarch guest on x86, then drop the gl option from
> > runqemu. This will fall back to software rendering.
> >
> > Alex
> >
> > On Thu, 17 Mar 2022 at 10:33, Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>> wrote:
> > >
> > > Sorry, but I need an Aarch64 guest.
> > >
> > > Ok, using a newer qemu I now encounter the following problem:
> > >
> > > root@qemuarm64:/usr/bin# XDG_RUNTIME_DIR=/run/user/0 ./eglinfo
> > > EGL client extensions string:
> > >     EGL_EXT_client_extensions EGL_EXT_device_base
> > >     EGL_EXT_device_enumeration EGL_EXT_device_query EGL_EXT_platform_base
> > >     EGL_KHR_client_get_all_proc_addresses EGL_KHR_debug
> > >     EGL_EXT_platform_device EGL_EXT_platform_wayland
> > >     EGL_KHR_platform_wayland EGL_EXT_platform_x11 EGL_KHR_platform_x11
> > >     EGL_MESA_platform_xcb EGL_MESA_platform_gbm EGL_KHR_platform_gbm
> > >     EGL_MESA_platform_surfaceless
> > >
> > > GBM platform:
> > > pci id for fd 3: 1234:1111, driver (null)
> > > MESA-LOADER: failed to open bochs-drm: /usr/lib/dri/bochs-drm_dri.so: cannot open shared object file: No such file or directory (search paths /usr/lib/dri)
> > > failed to load driver: bochs-drm
> > > ...
> > >
> > >
> > > What is this bochs-drm_dri.so and does Yocto / the Mesa in Yocto provide it?
> > >
> > > ________________________________
> > > From: Alexander Kanavin <alex.kanavin@gmail.com<mailto:alex.kanavin@gmail.com>>
> > > Sent: Wednesday, March 16, 2022 2:51 PM
> > > To: Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>>
> > > Cc: yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org> <yocto@lists.yoctoproject.org<mailto:yocto@lists.yoctoproject.org>>
> > > Subject: Re: [yocto] runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > >
> > > This configuration is not tested. If you want accelerated gl, build
> > > for the qemux86-64 target.
> > >
> > > Alex
> > >
> > > On Wed, 16 Mar 2022 at 12:46, Edgar Mobile <heideggm@hotmail.com<mailto:heideggm@hotmail.com>> wrote:
> > > >
> > > > Greetings,
> > > >
> > > > I tried to run an Aarch64 Yocto with qemu on amd 64 Host. For that purpose, I built core-image-weston from Hardknott following the manual
> > > >
> > > > https://www.mail-archive.com/yocto@lists.yoctoproject.org/msg07306.html
> > > >
> > > > I then try to run
> > > >
> > > > runqemu sdl gl
> > > >
> > > > But it always aborts with
> > > >
> > > > runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available.
> > > >
> > > > What can I do?
> > > >
> > > > Regards
> > > >
> > > >
> > > >

[-- Attachment #2: Type: text/html, Size: 13543 bytes --]

^ permalink raw reply	[flat|nested] 12+ messages in thread
end of thread, other threads:[~2022-03-18 19:35 UTC | newest]

Thread overview: 12+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2022-03-16 11:45 runqemu - ERROR - Failed to run qemu: qemu-system-aarch64: Virtio VGA not available Edgar Mobile
2022-03-16 14:51 ` [yocto] " Alexander Kanavin
2022-03-17  9:33   ` Edgar Mobile
2022-03-17 10:33     ` Alexander Kanavin
2022-03-17 10:40       ` Edgar Mobile
2022-03-17 11:26         ` Alexander Kanavin
2022-03-17 13:02           ` Edgar Mobile
2022-03-17 13:51             ` Alexander Kanavin
2022-03-17 14:00               ` Edgar Mobile
     [not found]               ` <16DD2FD3E4D1257B.29979@lists.yoctoproject.org>
2022-03-18 19:26                 ` Edgar Mobile
2022-03-18 19:28                   ` Alexander Kanavin
2022-03-18 19:35                     ` Edgar Mobile

