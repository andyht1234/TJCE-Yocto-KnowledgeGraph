* [PATCH][master nanbield 1/4] libxml2: ignore disputed CVE-2023-45322
@ 2023-10-23 17:38 ross.burton
  2023-10-23 17:38 ` [PATCH][master nanbield 2/4] zlib: ignore CVE-2023-45853 ross.burton
                   ` (2 more replies)
  0 siblings, 3 replies; 4+ messages in thread
From: ross.burton @ 2023-10-23 17:38 UTC (permalink / raw)
  To: openembedded-core; +Cc: nd

From: Ross Burton <ross.burton@arm.com>

This CVE is a use-after-free which theoretically can be an exploit
vector, but this UAF only occurs when malloc() fails.  As it's
unlikely that the user can orchestrate malloc() failures at just the
place to break on _this_ malloc and not others it is disputed that this
is actually a security issue.

The underlying bug has been fixed, and will be incorporated into the
next release.

Signed-off-by: Ross Burton <ross.burton@arm.com>
---
 meta/recipes-core/libxml/libxml2_2.11.5.bb | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/meta/recipes-core/libxml/libxml2_2.11.5.bb b/meta/recipes-core/libxml/libxml2_2.11.5.bb
index 4cf6dd09a9a..fc82912df25 100644
--- a/meta/recipes-core/libxml/libxml2_2.11.5.bb
+++ b/meta/recipes-core/libxml/libxml2_2.11.5.bb
@@ -21,6 +21,9 @@ SRC_URI += "http://www.w3.org/XML/Test/xmlts20130923.tar;subdir=${BP};name=testt
 SRC_URI[archive.sha256sum] = "3727b078c360ec69fa869de14bd6f75d7ee8d36987b071e6928d4720a28df3a6"
 SRC_URI[testtar.sha256sum] = "c6b2d42ee50b8b236e711a97d68e6c4b5c8d83e69a2be4722379f08702ea7273"
 
+# Disputed as a security issue, but fixed in d39f780
+CVE_STATUS[CVE-2023-45322] = "disputed: issue requires memory allocation to fail"
+
 BINCONFIG = "${bindir}/xml2-config"
 
 PACKAGECONFIG ??= "python \
-- 
2.34.1



^ permalink raw reply related	[flat|nested] 4+ messages in thread
* [PATCH][master nanbield 2/4] zlib: ignore CVE-2023-45853
  2023-10-23 17:38 [PATCH][master nanbield 1/4] libxml2: ignore disputed CVE-2023-45322 ross.burton
@ 2023-10-23 17:38 ` ross.burton
  2023-10-23 17:38 ` [PATCH][master nanbield 3/4] cve-check: sort the package list in the JSON report ross.burton
  2023-10-23 17:38 ` [PATCH][master nanbield 4/4] cve-check: slightly more verbose warning when adding the same package twice ross.burton
  2 siblings, 0 replies; 4+ messages in thread
From: ross.burton @ 2023-10-23 17:38 UTC (permalink / raw)
  To: openembedded-core; +Cc: nd

From: Ross Burton <ross.burton@arm.com>

This CVE relates to a bug in the minizip tool, but we don't build that.

Signed-off-by: Ross Burton <ross.burton@arm.com>
---
 meta/recipes-core/zlib/zlib_1.3.bb | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/meta/recipes-core/zlib/zlib_1.3.bb b/meta/recipes-core/zlib/zlib_1.3.bb
index c8fd855ee67..1ed18172faa 100644
--- a/meta/recipes-core/zlib/zlib_1.3.bb
+++ b/meta/recipes-core/zlib/zlib_1.3.bb
@@ -45,3 +45,5 @@ do_install_ptest() {
 }
 
 BBCLASSEXTEND = "native nativesdk"
+
+CVE_STATUS[CVE-2023-45853] = "not-applicable-config: we don't build minizip"
-- 
2.34.1



^ permalink raw reply related	[flat|nested] 4+ messages in thread
* [PATCH][master nanbield 3/4] cve-check: sort the package list in the JSON report
  2023-10-23 17:38 [PATCH][master nanbield 1/4] libxml2: ignore disputed CVE-2023-45322 ross.burton
  2023-10-23 17:38 ` [PATCH][master nanbield 2/4] zlib: ignore CVE-2023-45853 ross.burton
@ 2023-10-23 17:38 ` ross.burton
  2023-10-23 17:38 ` [PATCH][master nanbield 4/4] cve-check: slightly more verbose warning when adding the same package twice ross.burton
  2 siblings, 0 replies; 4+ messages in thread
From: ross.burton @ 2023-10-23 17:38 UTC (permalink / raw)
  To: openembedded-core; +Cc: nd

From: Ross Burton <ross.burton@arm.com>

The JSON report generated by the cve-check class is basically a huge
list of packages.  This list of packages is, however, unsorted.

To make things easier for people comparing the JSON, or more
specifically for git when archiving the JSON over time in a git
repository, we can sort the list by package name.

Signed-off-by: Ross Burton <ross.burton@arm.com>
---
 meta/classes/cve-check.bbclass | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/meta/classes/cve-check.bbclass b/meta/classes/cve-check.bbclass
index b55f4299da3..5191d043030 100644
--- a/meta/classes/cve-check.bbclass
+++ b/meta/classes/cve-check.bbclass
@@ -138,6 +138,8 @@ def generate_json_report(d, out_path, link_path):
                     cve_check_merge_jsons(summary, data)
                 filename = f.readline()
 
+        summary["package"].sort(key=lambda d: d['name'])
+
         with open(out_path, "w") as f:
             json.dump(summary, f, indent=2)
 
-- 
2.34.1



^ permalink raw reply related	[flat|nested] 4+ messages in thread
* [PATCH][master nanbield 4/4] cve-check: slightly more verbose warning when adding the same package twice
  2023-10-23 17:38 [PATCH][master nanbield 1/4] libxml2: ignore disputed CVE-2023-45322 ross.burton
  2023-10-23 17:38 ` [PATCH][master nanbield 2/4] zlib: ignore CVE-2023-45853 ross.burton
  2023-10-23 17:38 ` [PATCH][master nanbield 3/4] cve-check: sort the package list in the JSON report ross.burton
@ 2023-10-23 17:38 ` ross.burton
  2 siblings, 0 replies; 4+ messages in thread
From: ross.burton @ 2023-10-23 17:38 UTC (permalink / raw)
  To: openembedded-core; +Cc: nd

From: Ross Burton <ross.burton@arm.com>

Occasionally the cve-check tool will warn that it is adding the same
package twice.  Knowing what this package is might be the first step
towards understanding where this message comes from.

Signed-off-by: Ross Burton <ross.burton@arm.com>
---
 meta/lib/oe/cve_check.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/meta/lib/oe/cve_check.py b/meta/lib/oe/cve_check.py
index 3979d521d10..c0ab22d25ea 100644
--- a/meta/lib/oe/cve_check.py
+++ b/meta/lib/oe/cve_check.py
@@ -172,7 +172,7 @@ def cve_check_merge_jsons(output, data):
 
     for product in output["package"]:
         if product["name"] == data["package"][0]["name"]:
-            bb.error("Error adding the same package twice")
+            bb.error("Error adding the same package %s twice" % product["name"])
             return
 
     output["package"].append(data["package"][0])
-- 
2.34.1



^ permalink raw reply related	[flat|nested] 4+ messages in thread
end of thread, other threads:[~2023-10-23 17:38 UTC | newest]

Thread overview: 4+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2023-10-23 17:38 [PATCH][master nanbield 1/4] libxml2: ignore disputed CVE-2023-45322 ross.burton
2023-10-23 17:38 ` [PATCH][master nanbield 2/4] zlib: ignore CVE-2023-45853 ross.burton
2023-10-23 17:38 ` [PATCH][master nanbield 3/4] cve-check: sort the package list in the JSON report ross.burton
2023-10-23 17:38 ` [PATCH][master nanbield 4/4] cve-check: slightly more verbose warning when adding the same package twice ross.burton

