* CDN for sstate.yoctoproject.org
@ 2023-09-22 17:32 Michael Halstead
  2023-09-22 19:03 ` Michael Halstead
  2023-10-17 15:33 ` Alexander Kanavin
  0 siblings, 2 replies; 10+ messages in thread
From: Michael Halstead @ 2023-09-22 17:32 UTC (permalink / raw)
  To: Alexander Kanavin, Yocto-mailing-list; +Cc: Richard Purdie


[-- Attachment #1.1: Type: text/plain, Size: 1616 bytes --]

Right now we have https://cdn.jsdelivr.net/yocto/sstate set up as a CDN
mirroring proxy endpoint. It's fast and completely free to the project.
However, it will only work for files smaller than 64MB and will send a
redirect to the main server at sstate.yoctoproject.org for files larger
than 64MB.

The good news is that we have a fast free CDN provided by
https://www.jsdelivr.com/ and their many sponsors for 99.4% of our files.

Here is an estimated distribution of sstate files currently available:
1 KB-4 KB: 103168
4 KB-16 KB: 1218048
16 KB-64 KB: 1886976
64 KB-256 KB: 1225216
256 KB-1 MB: 170752
1 MB-4 MB: 92928
4 MB-16 MB: 83200
16 MB-64 MB: 40448
64 MB-256 MB: 17664
256 MB-1 GB: 7936
1 GB-4 GB: 2560

I'm still working on a CDN solution for the larger files but we can begin
testing https://cdn.jsdelivr.net/yocto/sstate today.

Here is an example link to a file that is currently popular from each
location:

http://sstate.yoctoproject.org/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst

https://cdn.jsdelivr.net/yocto/sstate/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst

I'm also attaching a list of the largest files in sstate. Anything we can
do to reduce the size of these or to split them into smaller pieces will
help with hosting and with the user's download experience.

-- 
Michael Halstead
Linux Foundation / Yocto Project
Systems Operations Engineer

[-- Attachment #1.2: Type: text/html, Size: 2767 bytes --]

[-- Attachment #2: sstate-sizes.txt --]
[-- Type: text/plain, Size: 38485 bytes --]

1.5G	./a8/b4/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:a8b46f6a3a1bc1cf2b87868b874cb5fdee215e54ec9c0137e158928338a67929_package.tar.zst
1.5G	./c4/dd/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:c4dd7c7b4d30a76d8a6dc949b358a9c36a6ee0b51f767c2d212c9de17fc3f642_package.tar.zst
1.5G	./a3/65/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:a365274c552d9522255d5ecb00772c66a0c247c564f640a6f306e6223996dbe1_package.tar.zst
1.5G	./8b/55/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:8b55b88056e5949753a2e8c22a05c6ed0e67ba7a62057b0af1c85039af708e57_package.tar.zst
1.5G	./3e/fd/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:3efd12902f0bd914a06baa52ba8ea3dc5245b50a72d1f5be230a785953430050_package.tar.zst
1.5G	./51/a8/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:51a8aac859e1fe22e41a0cbf3bc7f4b6be5f2d6083890a0c1ad30ef04cbd562a_package.tar.zst
1.5G	./be/cc/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:becc86252d869953af9a0551a714eecb8293b2003f055240f3d62a08cf6fb587_package.tar.zst
1.5G	./11/38/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:11382ddafe9d877b423368098b3767cdb76997596258ac0b5abe84e039de792a_package.tar.zst
1.5G	./65/f3/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:65f364cf45aa1cdfad4ab2a06ac83f8c5192e50e934a5c80f3b3ece9e13e9d7f_package.tar.zst
1.5G	./d8/59/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:d859b97500df7b9583005d5d133f756ad9993ced0d87b3a3374ab8a284ed5203_package.tar.zst
1.5G	./5c/17/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:5c1791c3fb9aa770d6fe841c1edcaf92acf5036df04fef64d0d1f920bc12123e_package.tar.zst
1.5G	./35/45/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:3545516b619f151bcf2f284ee0aafe6026703f260c2637a5903c3045b61d786a_package.tar.zst
1.5G	./0f/60/sstate:webkitgtk:core2-64-poky-linux-musl:2.40.5:r0:core2-64:11:0f60d7aa20cb7ff17dc3fc2253f084e1c2619ce9a271ebe63d0a33d0eefacc9d_package.tar.zst
1.5G	./78/8c/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:788c4637e942d30a42bc5cc091ee8bf09bed90dc88ad97906e6cbdf4f69ba478_package.tar.zst
1.5G	./f2/98/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:f2982a32c5eb50c35ab6ff911f3e6a425dcaba54dc05a8d7acb33e49ce001762_package.tar.zst
1.5G	./ed/91/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:ed91adec9fab6be660905c14573d83b29edc638142a696ea10a84f159b97feab_package.tar.zst
1.5G	./f3/7e/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:f37eb7f6f9a0b5a5e892b9aaedb0cd06dc3448427b4a60390c47a424d5569bd8_package.tar.zst
1.5G	./5c/a6/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:5ca63e9f225aa53ce2e4d23aea4d80610f381aec9fc66d34b6117b0421dad349_package.tar.zst
1.5G	./bf/db/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:bfdbea005a7941b35b5dc182763c59b19e84f3fb06a60692351358416ebf4106_package.tar.zst
1.5G	./30/88/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:3088790a9fb368501eab1135fce08fc4653cc0c4c3e7979cf3a0bc5730549ae2_package.tar.zst
1.5G	./6b/c9/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:6bc94a716ef0da710d58e55bbefd7645d59918edbb4dc4b8b367452020540c6e_package.tar.zst
1.5G	./e9/02/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:e90262ca7a533108ac21a6bedb0509ec057e14f168ba3c5bd56b90bb34821845_package.tar.zst
1.5G	./93/8e/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:938e2d168522f853c1b4e2eb1e47230b7297287061c3d23eb51fc84877de8afc_package.tar.zst
1.5G	./fa/70/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:fa70b0771fcc32d8027fc7b4e5270a9672b2959a5852d0cdcfeb6adce3bb762a_package.tar.zst
1.5G	./7e/a5/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:7ea52d6a35c4bcc43e4577fd80cacc2260597e3dd0e9367b279b6d77301fd681_package.tar.zst
1.5G	./a5/a9/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:a5a9a5356ebb19bd7e05972d3f31f363b590a7f3a578237de0c9cdee687aff21_package.tar.zst
1.5G	./3b/9a/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:3b9a750db13bf4c57693c6532b121d4c322ee063cf1d647842bb1c6f3591d3b4_package.tar.zst
1.5G	./49/55/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:49551b849f235c160204fc5b38c4cedb6365f550437a748829eb852d43846e8a_package.tar.zst
1.5G	./95/56/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:9556ba7a63b6cea546dc7007feb109e5413c2246d00c3537e2e0bb5615e6888c_package.tar.zst
1.5G	./4c/91/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:4c91e4da2672dd1db1d5309001040e46889ac12467d7bacc550509f722cc378a_package.tar.zst
1.5G	./ce/08/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:ce08798734013aa4b6c60936f8865eae56d5d2745dd546eaaf71c61f2600e3bf_package.tar.zst
1.5G	./70/2a/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:702ae1243201f49d27b8b7e30997069dc1ba542bc8700a395735f6ff78694f42_package.tar.zst
1.5G	./8d/39/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:8d3978c7f04d519e8c3a611404c919f084a12b8cbbe4ac65fee67e6142fdd967_package.tar.zst
1.5G	./54/6a/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:546ad250755d3ef82e1777030f8e06a66faf0e006dae2d5fb9e98a14b078dc45_package.tar.zst
1.5G	./bd/d8/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:bdd88707ff21d31ebc8ae669e4c9fdada59bc86f4f2bcf6e98a6c97263cda954_package.tar.zst
1.5G	./15/9a/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:159a0e76674ad76bdfbaafb385fc9e3741fb84016a54183c2e555a8ac3fbeb13_package.tar.zst
1.5G	./94/f3/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:94f39b10c45779d9b34fb0a761caa032579a4dc1f90cb044bb3069e185179212_package.tar.zst
1.5G	./8f/e8/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:8fe82cddf9ca7c0775f251725c0a04ac1349f14d3e80fab0cb2e18169ce8043b_package.tar.zst
1.5G	./2f/9f/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:2f9f6fa2a338341ee6624d0c0a7048ac878a59a901d45b0b82311bc285938700_package.tar.zst
1.5G	./06/c4/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:06c44834f4da8f65322602b5dc6569f264158ec7f6219a495ca88fffbd61fa27_package.tar.zst
1.5G	./dc/eb/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:dceb009b7ac69d7fe395b21e1f52728a7c376af13763e67395474ea0ec6f6abb_package.tar.zst
1.5G	./1b/cd/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:1bcd3c8e3ccb4c82632fa4eaf62aa416e16603bf0c4360cc7616c884027f022c_package.tar.zst
1.5G	./6e/97/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:6e976720c96b2d7c43c68ced28db1741fb2f7e1a881cbdcf3f9d72a558f1ea87_package.tar.zst
1.5G	./8d/7f/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:8d7f76bc1b59e447ffca6a72336108b8b2933e3cba6f51a327a9629408f355fb_package.tar.zst
1.5G	./80/ac/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:80acf6e07fb1021d373ac43eaeea894522111944f53077dc09ab3e7cad97e32b_package.tar.zst
1.5G	./cc/5c/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:cc5cb39045f4faf85935a39af57afa78a38f061f44296bf318bf89bc906c306e_package.tar.zst
1.5G	./87/5b/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:875b50c1f82108bebcbd19fc1d538e5da5b81a58caef5a7b4d841691487f8dfa_package.tar.zst
1.5G	./95/f9/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:95f9021363541bd0153639482273c114e763d6c04379b4efdf9a4aa2537b8859_package.tar.zst
1.5G	./4c/ed/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:4cedcd0a40f068de37698c05cff3826c72e5204d4ecba65ba85d83776f05b3c3_package.tar.zst
1.5G	./6f/de/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:6fde6f4ff45f219dc0b87dd2a7117053648183208f6a8db03b84764eb3718d3d_package.tar.zst
1.5G	./23/9f/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:239f00093659992df4bce336e23b9c4edcab6d102a8252abd18abee0dfb98d98_package.tar.zst
1.5G	./83/cd/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:83cdff8fece186c36ff5c6f1509acd5394293e5242861dd51a54e653a2ba68e1_package.tar.zst
1.5G	./3d/b5/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:3db5b0bf329131d37e2505be042613ce516bb6043b201d6a50ec8c690ab61a20_package.tar.zst
1.5G	./4c/42/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:4c423ae94beb69550582ae0b0ec7f21d8a336088cd77a3b5f871a3c69fd0de73_package.tar.zst
1.5G	./54/91/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:549111bf9b6a4675e1c3f5eb8314692e4b49f35c79ba1a87f595006e23a7e3c6_package.tar.zst
1.5G	./49/cb/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:49cb3a9a252ebe33296cb6b0e1790c6ccc72c6beb6a182f16970267f7674e2c7_package.tar.zst
1.5G	./26/db/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:26dbb9ab2cb0c611fc872e26e126be1536a1285dfb75a71e8b31a78fdda601d3_package.tar.zst
1.5G	./fa/3d/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:fa3dacbe386d1553e7f63737ad74d38ddcc17a954d7d06051a1b730851931f3e_package.tar.zst
1.5G	./01/a9/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:01a924d50cd0fb0c66cc672d90625d1e715c652ebc5359be8e8788a4bbedfa8f_package.tar.zst
1.5G	./45/22/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:4522e5fc65dbc80559f865fe942743a3ef431eb9d84e7c8c0c19cc7418b89f03_package.tar.zst
1.5G	./de/0f/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:de0fd32c6a462834fce28bacc08d16d879da444cd45ab33947ff6e57940b5602_package.tar.zst
1.5G	./11/13/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:1113f057642e520e586a6ece3a76aa4caf4b10bfb77f36ab1971f0ce51e01f47_package.tar.zst
1.5G	./39/29/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:3929ece3c31ee8b344a0b7d92b2623091970ef0b2e6db9f0588fbe8d4049e2d3_package.tar.zst
1.5G	./05/ec/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:05ecc508985c1056636fc192b60176dd23840e72ed4f9c6c558e00aad614f49b_package.tar.zst
1.5G	./a8/dd/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:a8dde565547c975b3306bbeab61553e142615014f951533fe575399a7827707e_package.tar.zst
1.5G	./53/13/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:5313f25e304e0580541aea1734802a2573a0564ef7b430f4ffb83aa7a6faa63f_package.tar.zst
1.5G	./32/60/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:32602078d15fb42d92f3e4a6b590c0be5453866f478fdad944d7ed81ca89e731_package.tar.zst
1.5G	./87/3f/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:873f8e5a9bb89b04c2555ea21bd1b40c243c4e0cfd067ce427fe1e831e3ac9eb_package.tar.zst
1.5G	./d5/c2/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:d5c218db2ddf5cd5a42a2322f052b1b86b4366412656d1e0dc6b9ad94b9ae279_package.tar.zst
1.5G	./f8/d5/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:f8d5c3317106bf7785c9edd780613b4f71d4bc81e8762b0549a82d9932199b97_package.tar.zst
1.5G	./40/b8/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:40b8b8a7338649ce0c1f4b0396b777bdd7c7ff5012a92d1e99b83ec4a4eaf1b1_package.tar.zst
1.5G	./53/a1/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:53a1feb544e004be153d8c2221733e11a852df62137a19e8a844c348feec8a5b_package.tar.zst
1.5G	./b6/ae/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:b6ae418d4d743fc29fc71a105096fb54a9873b11de811b76766885202b970339_package.tar.zst
1.5G	./0a/87/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:0a87f311849fb868b6540cf954752805a5b2a37274a1bf4683b8ad948d64f4b9_package.tar.zst
1.5G	./cd/f6/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:cdf6dd17d547ec0f3e6f52cb21ec6cd9b36e45c83875853bcf97565e1b75680c_package.tar.zst
1.5G	./e6/ca/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:e6cad506f62f4d6a35304e5cc97810d4cb384808bb1f57c3452c94c5c5ee5c07_package.tar.zst
1.5G	./a9/f6/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:a9f6373c43250ac5c992b94280cd93380d27a6128727cbf60eedceb54bfa7913_package.tar.zst
1.5G	./c9/1c/sstate:webkitgtk:core2-64-poky-linux:2.40.5:r0:core2-64:11:c91c7cf73a96aece55d33b735f314fa2874fa3f62d85216a00e4d337e2cd551b_package.tar.zst
1.6G	./b9/ae/sstate:webkitgtk3:core2-64-poky-linux:2.40.5:r0:core2-64:11:b9aef46ad47da3a03661506024b0582d8649c6ae908771bfdc3680671fa29b5d_package.tar.zst
1.6G	./94/fe/sstate:webkitgtk3:core2-64-poky-linux:2.40.5:r0:core2-64:11:94fe6c54fab358177734945b70d0d7e5cfe6b4e67ee4f015babe2ac40652dd38_package.tar.zst
1.6G	./25/59/sstate:webkitgtk3:core2-64-poky-linux:2.40.5:r0:core2-64:11:2559400dff6d0f195bbed542cf736d9a43c817bd672233a7dcdd53b3fb351d7c_package.tar.zst
1.6G	./72/02/sstate:webkitgtk:core2-64-poky-linux:2.28.4:r0:core2-64:3:720249095d699b53b17bfb94b21396a09f69666c4d88ce0d3d32f41c93773d71_package_write_ipk.tgz
1.6G	./2c/65/sstate:webkitgtk:core2-64-poky-linux:2.28.4:r0:core2-64:3:2c65be961c98551c67f2db9dfe61079dd3d6ca0ff65b774ff90c03b3cfa63f92_package_write_deb.tgz
1.6G	./42/2d/sstate:webkitgtk3:core2-64-poky-linux:2.42.0:r0:core2-64:11:422d6b16772c635172bc5110d0acbafda14c38314dd469107f729ac52be5686e_package.tar.zst
1.6G	./53/62/sstate:webkitgtk3:core2-64-poky-linux:2.42.0:r0:core2-64:11:536207e2bf34f15721e268ffc996acc4c59dbad9d3b44cce23951ed719478b25_package.tar.zst
1.6G	./20/53/sstate:webkitgtk3:core2-64-poky-linux:2.42.0:r0:core2-64:11:2053141efe3a3c0347aab9cdf2a38137efafca1a8ae95286b13c50ecb40d4fc2_package.tar.zst
1.6G	./1b/6c/sstate:webkitgtk3:core2-64-poky-linux:2.42.0:r0:core2-64:11:1b6c64fbbf8757706ed5d8ec096d6da58c75dac2c42d6c625774917e24d68ceb_package.tar.zst
1.6G	./dd/6e/sstate:webkitgtk3:core2-64-poky-linux:2.42.0:r0:core2-64:11:dd6e3fa0a248fa0f2f3d09aeee2dbb8447012f28e10473d61f80e084105c435f_package.tar.zst
1.8G	./1f/9e/sstate:llvm:core2-64-poky-linux-musl:13.0.1:r0:core2-64:10:1f9eb82fdaa1875e441392c07052477e59fac0c5eaedd68c4907789725a2d922_package_write_deb.tar.zst
1.8G	./87/59/sstate:llvm:core2-64-poky-linux-musl:13.0.1:r0:core2-64:10:8759349fa106ca1bd399eb784b4c2ff0bfa559c07bdc009711a38063c10d2b69_package_write_ipk.tar.zst
1.8G	./4b/3e/sstate:llvm:core2-32-poky-linux-musl:13.0.1:r0:core2-32:10:4b3edfd8116287ebd16af20b0ef9a6b39065b443a795c14d82e8430964691e4c_package_write_ipk.tar.zst
1.8G	./72/45/sstate:llvm:core2-32-poky-linux-musl:13.0.1:r0:core2-32:10:72451024fe8103dada30e025ed93e09abe7ea001d8272a5ffbc131ad233715ff_package_write_deb.tar.zst
1.8G	./f5/c5/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:f5c537f0a959023c9fec71df46587ceffaa99ed7d87679c6ff9049c4c08346e2_package_write_ipk.tar.zst
1.8G	./a3/c1/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:a3c11d4a0ed5a24ba87a8c3dd94b213e3a27f168c747b2853b0aca90ab389a9a_package_write_ipk.tar.zst
1.8G	./a7/9f/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:a79f975f953acd63cb944a0895d5d51676619649a8bef1677a40d48498733f15_package_write_deb.tar.zst
1.8G	./8c/ed/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:8ceddc814cd5ff7c2ce68ff437fea0d63411cb3c92adf06fae85013402f47eda_package_write_deb.tar.zst
1.8G	./7f/a2/sstate:lib32-llvm:x86-pokymllib32-linux:13.0.1:r0:x86:10:7fa25f5c13ff9ee482cf263e0fd638b40557b742243e4d8d3b3b0652c096aed4_package_write_deb.tar.zst
1.8G	./1b/01/sstate:lib32-llvm:x86-pokymllib32-linux:13.0.1:r0:x86:10:1b01ae8ee4bf67059013b53a0e7a412319784016ae1e6a942a92445664c70ff3_package_write_ipk.tar.zst
1.8G	./85/5a/sstate:llvm:core2-64-poky-linux:9.0.1:r0:core2-64:3:855a440a9731888b0830b90d01c18b46f6b0eddaa22fb87f42857e75bc6dd3da_package_write_ipk.tgz
1.8G	./77/cf/sstate:llvm:core2-64-poky-linux:9.0.1:r0:core2-64:3:77cf71c79970d2b0b415bc855c238cf81494dbcef004e5cb50c7edc75cf201bf_package_write_deb.tgz
1.8G	./f2/11/sstate:webkitgtk:core2-64-poky-linux:2.38.6:r0:core2-64:11:f211cdcc54f078e8e63d6a9329625f751ac04108ed898710452dcd3bf00dcbec_package_write_deb.tar.zst
1.8G	./a9/50/sstate:webkitgtk:core2-64-poky-linux:2.38.6:r0:core2-64:11:a950112d743f73761e3be7aa411693e3f229c4fc5f8381da3cb0511c1f4e4270_package_write_ipk.tar.zst
1.9G	./1a/ef/sstate:webkitgtk:core2-64-poky-linux:2.36.8:r0:core2-64:10:1aef14726350019bd91a8acdfffec1f48a98fd1de83565198ae4eebcf896ed14_package_write_deb.tar.zst
1.9G	./ff/ce/sstate:webkitgtk:core2-64-poky-linux:2.36.8:r0:core2-64:10:ffce88cdd95cfd448fa45df2f9567d449c4ea3e7b7e964f767e555ddd4979a5d_package_write_ipk.tar.zst
1.9G	./fd/03/sstate:llvm:core2-64-poky-linux-musl:15.0.7:r0:core2-64:11:fd03af43a1161a9f48c3aba58f4a8538e9aeed46dc1f0b365c330bd5a456c259_package_write_deb.tar.zst
1.9G	./6f/09/sstate:llvm:core2-64-poky-linux-musl:15.0.7:r0:core2-64:11:6f098c0f202af61a0d8d33b6c3d761e988bfcb7dae11033c2136fed66f0d6f0b_package_write_ipk.tar.zst
1.9G	./88/55/sstate:llvm:core2-32-poky-linux-musl:13.0.1:r0:core2-32:10:88558387459c3b6ead3c30650d2ffab0a233f1e458c5d71b70729cac1da85ab4_package_write_rpm.tar.zst
1.9G	./4a/b6/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:4ab61e871ee41a80c7c7f8e1271e379ced4163096a005d6404b0f7a40852a40d_package_write_deb.tar.zst
1.9G	./af/43/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:af43914b3d674515665c9273cf79ad28bdb0cb3acda1715052f33241e5febc84_package_write_deb.tar.zst
1.9G	./81/e7/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:81e79e8c8b049c05cb52a439fe716bcb35df223268dec9d9a2ed24cf255336ed_package_write_ipk.tar.zst
1.9G	./78/27/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:7827fee0ef6e2f97643f07382295531e5f2e5b381b9dee97579ac1f8d78c11e1_package_write_ipk.tar.zst
1.9G	./76/3f/sstate:llvm:core2-32-poky-linux-musl:15.0.7:r0:core2-32:11:763f1d3814c773371cd3a999449d3b6fb42f7428f1cb21251e70eb5e8ad40169_package_write_ipk.tar.zst
1.9G	./0a/cc/sstate:llvm:core2-32-poky-linux-musl:15.0.7:r0:core2-32:11:0acc6876c1872c94d8d01b1e466e4e500375c16e23b0f6a55998507f7b47d47d_package_write_deb.tar.zst
1.9G	./e2/64/sstate:lib32-llvm:x86-pokymllib32-linux:13.0.1:r0:x86:10:e264be5e4aea24e6669cec9f7e1b86ac66da5a2511a03abbb10c85f459b2095e_package_write_rpm.tar.zst
1.9G	./71/86/sstate:lib32-llvm:x86-pokymllib32-linux:15.0.7:r0:x86:11:7186e7080e28c0fe2ffdacea4090089e6edd4115a2e94604c1ca8173ef014904_package_write_deb.tar.zst
1.9G	./d0/4d/sstate:lib32-llvm:x86-pokymllib32-linux:15.0.7:r0:x86:11:d04dcf2c9ba837ac6ef35a2bec70c52ad9c69835a3aa408f90157613c84db461_package_write_ipk.tar.zst
1.9G	./39/17/sstate:llvm:core2-64-poky-linux-musl:13.0.1:r0:core2-64:10:3917f859b801802f9d9081b2889a5891ae204ee171c112d269dbd5d3b374ad98_package_write_rpm.tar.zst
2.0G	./20/af/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:20af9f72cb8a112d585571d963da231cec65a5bed9d6178ca98f8ba4169a24a1_package_write_rpm.tar.zst
2.0G	./e4/c8/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:e4c8e4166d88e80ead77cda857f6348fe83d26885e708d94d18820fecbfea956_package_write_rpm.tar.zst
2.0G	./64/eb/sstate:llvm:core2-32-poky-linux-musl:15.0.7:r0:core2-32:11:64eb5cdce0b3d3b393098fd8e5ba3b2a9a40a6fb1a120a7dfd7965f42e574a1c_package_write_rpm.tar.zst
2.0G	./6f/b7/sstate:lib32-llvm:x86-pokymllib32-linux:15.0.7:r0:x86:11:6fb782437c927d2115668248b4ddd19f0a530e688edc2409817e759c51a828ee_package_write_rpm.tar.zst
2.1G	./e2/e3/sstate:llvm:core2-64-poky-linux-musl:15.0.7:r0:core2-64:11:e2e38f6ac280551acda7a3c90cf35b9e5f881c26637473c629e3ea69b3f11b3b_package_write_rpm.tar.zst
2.1G	./6c/06/sstate:webkitgtk:core2-64-poky-linux:2.38.6:r0:core2-64:11:6c06c40a3fab8a3d7cd9602ca4013cb36c1ed43f7780f9ad2d61a2bb92da5df3_package_write_rpm.tar.zst
2.1G	./c4/63/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:c463996baadb03366eb9271954f98adc967cf4193fac1e4f3a5f7c0ca4a0e85e_package_write_rpm.tar.zst
2.1G	./af/de/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:afdea14ee36aaa7d19362905e6704445ce50ed4008bd5c8dfd23aaa3267dba11_package_write_rpm.tar.zst
2.1G	./5e/ea/sstate:webkitgtk:core2-64-poky-linux:2.36.8:r0:core2-64:10:5eea7e4b29914c570ee57b2b0247ad8bd49b31ef070687c6c49ce6366c2c569b_package_write_rpm.tar.zst
2.1G	./81/0b/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:810b1a5d63ac09ddd346e39470e8f2e657a4c3eee888f806b460d9519734a7f0_package_write_deb.tar.zst
2.1G	./a7/e4/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:a7e41dc160c653e9d836357bd92c1562cb39055e171e9877353f03aa0d5965d7_package_write_ipk.tar.zst
2.1G	./ee/cb/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:eecb6e5e2f88f2e161cba544d05123df6597bbc90c8213eaa2df0555e5c9824f_package_write_ipk.tar.zst
2.1G	./d3/aa/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:d3aa5abebed9f362bfd317a4fe63693a3eafb97bf35252d8da00884373398568_package_write_ipk.tar.zst
2.1G	./1d/d0/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:1dd050201238c29116d6d279ab247c411a4c3c3964a5f56b43010efbffc87963_package_write_ipk.tar.zst
2.1G	./4b/2d/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:4b2dba76c56d01342cc7b4d8723391fe9b99bb97c102add7dd0fe9f8289ad204_package_write_ipk.tar.zst
2.1G	./aa/63/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:aa63d59742143495735f8103ddbe0e36420695bfbd3cf87ca79d135394f02c10_package_write_deb.tar.zst
2.1G	./b3/a2/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:b3a2e0782b80254f89e66b9526a3285f2922ccfb15822b0b5c91b0155c7945fc_package_write_deb.tar.zst
2.1G	./97/b7/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:97b77de9b347c938a7e47fd869e19620158c09556aaf8c13998e18ca9a497f17_package_write_deb.tar.zst
2.1G	./cc/f2/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:ccf24e74159376b3c40a8cc9213ff754894008592896a4561fad043c07dc2949_package_write_deb.tar.zst
2.1G	./7b/1e/sstate:llvm:core2-32-poky-linux-musl:16.0.6:r0:core2-32:11:7b1eadb516fc7533445e984816669309966a37b78e015ce6108223d89cd84221_package_write_ipk.tar.zst
2.1G	./1d/ba/sstate:llvm:core2-32-poky-linux-musl:16.0.6:r0:core2-32:11:1dba0462bc6687c4e137757f7c16d46afc7b2a8d5e9142f80d2260e8c32df554_package_write_deb.tar.zst
2.1G	./6d/69/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:6d69e15f62d8f7e5dd54d5c3545d1e71a4301c70461ce6654b0930ac243b7682_package_write_ipk.tar.zst
2.1G	./97/02/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:9702ce61a7dd652c11649ab93b3c592b8785ae8ee2d3071ceb682629d0c8fda1_package_write_ipk.tar.zst
2.1G	./97/01/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:970175eadea6e0ae9654149f3e7a783bae62b68baab1aec77b3bc195fe0b25a8_package_write_deb.tar.zst
2.1G	./10/a8/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:10a88bd216c0992acde5f7db84819e16984112139627b1c0508865b3fb456d45_package_write_deb.tar.zst
2.2G	./3d/79/sstate:llvm:core2-32-poky-linux-musl:13.0.1:r0:core2-32:10:3d795e745cb815db888fa461ca94d305a927ea7bccc89317de20fec79351129a_package.tar.zst
2.2G	./b9/e3/sstate:llvm:core2-64-poky-linux-musl:17.0.1:r0:core2-64:11:b9e3d28cc00cd0daacbb63bc3de01a83e963b4dff2913e74466a63a47c25d6db_package_write_deb.tar.zst
2.2G	./60/58/sstate:llvm:core2-64-poky-linux-musl:17.0.1:r0:core2-64:11:6058c9c6ea4a56c709b252fdd02f99451aaabe8cb0c69cde91a271358c9fb9c6_package_write_ipk.tar.zst
2.2G	./3a/52/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:3a52c91ab7bfcf4cf3a1a0876f416c2082f5747bea8c15f48e5df747c673f012_package_write_ipk.tar.zst
2.2G	./92/b2/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:92b29cd02479307f6c1787c41c422a09474c680c3f1f2dfe7b6ad436ef63f0fe_package_write_ipk.tar.zst
2.2G	./cd/a1/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:cda1eaf31720d0e718463857f89773851f742a94b1409abe0efc01f3963880c2_package_write_ipk.tar.zst
2.2G	./64/8c/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:648cc340ee52e9be616b8cdcc3b4da844a54ec292609f858a05696cd8dfc2a4c_package_write_ipk.tar.zst
2.2G	./bb/5e/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:bb5e090a4b35304d6f6cfcb07920f3373964ea8b903c2f3705bc24f86095116e_package_write_deb.tar.zst
2.2G	./08/e0/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:08e028bb63180eed1702fae7d47a698b5c7d86ff33ca091ccff7d579f2aec06f_package_write_deb.tar.zst
2.2G	./12/2f/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:122f05a04f819cae81e55439fff370e73bcbb2dba82ad447bb999c38a72f7d8d_package_write_deb.tar.zst
2.2G	./2c/e2/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:2ce292df4d28af1b968b07c13fdc5737ecb7ce676fb59aa221158fcff6d5f369_package_write_deb.tar.zst
2.2G	./a9/fd/sstate:llvm:core2-32-poky-linux-musl:17.0.1:r0:core2-32:11:a9fde7e742ab28a477850371f72855ac4f5aa363a4b3ab2897df242f88254215_package_write_ipk.tar.zst
2.2G	./17/87/sstate:llvm:core2-32-poky-linux-musl:17.0.1:r0:core2-32:11:17877b57a59ea5a5ae62e3fdcbc0da2359fbcb5d3abc77b0568caa5d6fb588a5_package_write_deb.tar.zst
2.2G	./8f/c3/sstate:lib32-llvm:x86-pokymllib32-linux:13.0.1:r0:x86:10:8fc3dbba19f311329155eb5ad2e061060c1aa524c5778fac9e44102e61a65231_package.tar.zst
2.2G	./92/fa/sstate:lib32-llvm:x86-pokymllib32-linux:13.0.1:r0:x86:10:92fa2bfbd443e231cff1c36f483a778ca0bb22b2a2e3d46fe568a8bb2ca876d0_package.tar.zst
2.2G	./3f/4a/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:3f4ab6f39416941c6b6b3a08be8f7c73229b2a9be6ae87d33297322c72c32f7e_package_write_deb.tar.zst
2.2G	./a1/9a/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:a19a562b331f571b5eac3bfc6d9af050f85a878339c3cd79d6cfb1efb5abf593_package_write_deb.tar.zst
2.2G	./45/cf/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:45cf28962a7beeafdb429450b68f850faf8052b041952a62abbb3cdcc2f4e1f7_package_write_ipk.tar.zst
2.2G	./f8/71/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:f8714b6e706221b5e482b6dd118fabfd7e990a7dda5d0259558092613d35e4ff_package_write_ipk.tar.zst
2.2G	./78/d1/sstate:llvm:core2-64-poky-linux-musl:13.0.1:r0:core2-64:10:78d1495cbee87bed68365ea81b7794245591d06f4f9d8aea8de54a142dd13abb_package.tar.zst
2.2G	./fa/f2/sstate:llvm:core2-64-poky-linux-musl:13.0.1:r0:core2-64:10:faf2b85a03f07d1d3ee7a32af921bd6a1a11ebe52e7c458fb972f76cba430484_package.tar.zst
2.2G	./e1/e1/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:e1e130acf9dcd62a14bf8bf73b60dc76b58a7b37eb6a9e58607092016ad98394_package.tar.zst
2.2G	./65/33/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:65339ce1c4dc3f091620756d56c0e092fe91d097c61dd97dd7b9b082114040eb_package.tar.zst
2.2G	./1f/43/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:1f4310e437009013a408ea3439f81f3096c80bca6756e6583106252b44fa7b69_package.tar.zst
2.2G	./9c/2e/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:9c2ee93f1d22eb9a4634b0857db6ec6a21c812a2689e1cb69dc3eb3eaf343aea_package.tar.zst
2.2G	./40/a6/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:40a6b01b6f4d2feabc2af8ce2ea8322079cb904117e4c76802fce7bbba4fe7d4_package.tar.zst
2.2G	./5e/fa/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:5efa3debde195e28702fd7598966245e97af930049fe4588faa8dd24e29803f2_package.tar.zst
2.3G	./9a/62/sstate:llvm:core2-32-poky-linux-musl:16.0.6:r0:core2-32:11:9a62f6292df9168f995d1ef62b2affce4ffd6d5ca1ed4ca88ff8273b9ee7cffb_package_write_rpm.tar.zst
2.3G	./f6/13/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:f613c22abe827fec3cf5c0e85af67a44f34148f309ba93b715cdd53617175721_package_write_rpm.tar.zst
2.3G	./45/01/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:4501b17351d02cffe7df6a000b388d6e565e64eb7f0b50da517ce4889a7ef0e0_package_write_rpm.tar.zst
2.3G	./b9/33/sstate:llvm:core2-32-poky-linux-musl:15.0.7:r0:core2-32:11:b9338809b305377f989d970584ee7f9dae1b91184669bf583d1463739491ddb6_package.tar.zst
2.3G	./f1/2c/sstate:lib32-llvm:x86-pokymllib32-linux:15.0.7:r0:x86:11:f12c3490da1de8734d2cf77a68a754ebb20c154c69ac3ab86e4197855b56a81b_package.tar.zst
2.3G	./fd/f3/sstate:lib32-llvm:x86-pokymllib32-linux:15.0.7:r0:x86:11:fdf36e19e19539cfd1d8a22c64cfde86614225eaf8fe9f323fe77cd8ece11719_package.tar.zst
2.3G	./0c/49/sstate:llvm:core2-32-poky-linux-musl:17.0.1:r0:core2-32:11:0c49edc3a94fe0771734a904a6ab0bc84868144f276343c8c1e9eef6c175558d_package_write_rpm.tar.zst
2.3G	./17/d8/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:17d87776416f493c994db9287f8fdcd265b13953532e51cc8886694e3bff228a_package_write_rpm.tar.zst
2.3G	./de/06/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:de06c46420c0b8277447ed15cf67a0d98e10613d02610ccb248d324fe27889d0_package_write_rpm.tar.zst
2.3G	./7b/fe/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:7bfe10b100550f0df9ff6829679254dc862c8fd8e58880759dc687eea346cdea_package_write_rpm.tar.zst
2.3G	./82/f1/sstate:llvm:core2-64-poky-linux-musl:15.0.7:r0:core2-64:11:82f18c69e75c1cd8dadd9aa18e42d77c2126420fa7de13f36a147cc04224ff37_package.tar.zst
2.3G	./04/36/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:0436fc8522491b76d1bee073ebd7f8c6c63f94debde8eb2c56c1179fe0d23d92_package_write_rpm.tar.zst
2.3G	./48/fd/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:48fdfec7812ef91e6a14e10b547661b5777e54b0840bad582efd265c412ff110_package_write_rpm.tar.zst
2.3G	./0a/1b/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:0a1bbf4b4843719332e2393c4f52c7fb09152fa8e649a1d354800bbbb4fd94f9_package_write_rpm.tar.zst
2.3G	./ae/74/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:ae74386910bf8270c7eb73cbbb7ab575f5d2f24e862ec85065fcc2b5a67ce0d5_package_write_rpm.tar.zst
2.3G	./9d/06/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:9d06ef46724f63ad7b1d7f4b9e5bbc143b19f5c8bc965468ab4a6df47323a436_package.tar.zst
2.3G	./ee/68/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:ee6821453a07c2be205b8626e7ecc4ac5038bab1fac300f86e61c7391771b0ab_package.tar.zst
2.3G	./36/8b/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:368bb270d6bc18ca484a97985ce67b672925d66509f5302914141e9f26877506_package.tar.zst
2.3G	./6d/84/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:6d842fa29d5fbeb761657f1069027c0d443e772808a5e6e4fa7909cfb4d7ed6c_package.tar.zst
2.3G	./46/8e/sstate:llvm:core2-64-poky-linux-musl:17.0.1:r0:core2-64:11:468e17b3e7011393e3e14692e031f43618108672cf8f1cbbe380042d4ef9c715_package_write_rpm.tar.zst
2.3G	./a2/2a/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:a22a44a12bd25b84918bb92e7c2dcd25067a5b202f5a1ecb7fbc529ad3e83fee_package_write_rpm.tar.zst
2.3G	./ef/9a/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:ef9af3463f807b78d31185ad4386fbb1d75ade280533fc56be04df93e0855497_package_write_rpm.tar.zst
2.3G	./1c/82/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:1c82db75cd05d9eb0083d80f8b36839e2022245dc420bebcb32c95d875698390_package_write_rpm.tar.zst
2.3G	./c4/c5/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:c4c5db3f56ea8a1b5d299999ffde5cd608eab36c90c3ed87fc452bb1a201708d_package_write_rpm.tar.zst
2.5G	./9c/1f/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:9c1f13884f51e8627b3de9ef91ca0ee6ff06528f38fbb0e2c32cfe6ef09aa10f_package_write_ipk.tar.zst
2.5G	./5c/a5/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:5ca5a2e4312e2edf7e85f752a186abe63c98375e5ce23dcf78a66b1b635c4087_package_write_deb.tar.zst
2.5G	./92/90/sstate:webkitgtk:core2-64-poky-linux:2.28.4:r0:core2-64:3:9290988c86aecc72b97735e4aab30fe3f6e4fd587aff3951025aed7d959e649b_package.tgz
2.5G	./33/f7/sstate:webkitgtk:core2-64-poky-linux:2.28.4:r0:core2-64:3:33f7a594810b380623734ce271da12f4feeb641d190c10d48d832978757072a1_package.tgz
2.6G	./c0/c0/sstate:llvm:core2-32-poky-linux-musl:16.0.6:r0:core2-32:11:c0c0cf7596117b17f3a5abdcbfdc0e20ec7ce1276846db53ebae919f6f524b5b_package.tar.zst
2.6G	./34/81/sstate:llvm:core2-32-poky-linux-musl:16.0.6:r0:core2-32:11:348136ace8d4b9c70cf98ea05997669feed42345eb6439474be515d6d32dd57f_package.tar.zst
2.6G	./39/46/sstate:llvm:core2-32-poky-linux-musl:16.0.6:r0:core2-32:11:394659d353173a3ad34e1df24a8caac4503f4e59d05ba72532faf5b0a96d9303_package.tar.zst
2.6G	./d5/d7/sstate:llvm:core2-32-poky-linux-musl:16.0.6:r0:core2-32:11:d5d7adbdbaf1497dff9d30f724ab812381122e7f0e2393caeb383bccb5331cb4_package.tar.zst
2.6G	./54/02/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:5402d81946909f05b93f3cf62aba4fa5463bab5472a5a1241e3669bf76c06e8d_package.tar.zst
2.6G	./fa/f2/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:faf25b13a97a8e049e038fc841ee11ab6ffeebfd81138b9d5f2477f6ceb6b96d_package.tar.zst
2.6G	./bf/39/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:bf39c4c82ab9d501c0b279a03dd2c8f3c8a0a5c24340a18f2bc725022f1fb107_package.tar.zst
2.6G	./81/2a/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:812a17c208e42df586f7084c0e225fc93dcb8d99bd5fd2799c102f91be48fdd8_package.tar.zst
2.6G	./34/00/sstate:lib32-llvm:x86-pokymllib32-linux:16.0.6:r0:x86:11:340067a8408e69ff19b6466d20b787c5c6d7ff686d63fab9a610257255d540af_package.tar.zst
2.6G	./5f/bb/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:5fbbeac3fabd8c7665fdc01ba4fd99a528a8416f6fbf83b7ddb2bfdc9e3c60e5_package.tar.zst
2.6G	./a4/3d/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:a43d3ab1d97b569a88baa461a25d76aa08f897b5e827dd5731f1e26ec98d90ba_package.tar.zst
2.6G	./01/d6/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:01d60f565d5e6ec0bd4418059be57b0133d46547a1d5b1f98ed9bf0be754bf3e_package.tar.zst
2.6G	./c4/0c/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:c40ccb3175c56e9da4cc96856c5095a5b59b2bf3499247cb58bf79dafdd44441_package.tar.zst
2.6G	./52/67/sstate:llvm:core2-64-poky-linux-musl:16.0.6:r0:core2-64:11:5267622e788e5defcc7c40bcbd6b128950604860665c5a565de2c27af20078ce_package.tar.zst
2.6G	./c2/27/sstate:llvm:core2-32-poky-linux-musl:17.0.1:r0:core2-32:11:c227b498030e2a37279f9a61baead1b1f0670c2e6c0440f738f40523274acc35_package.tar.zst
2.6G	./dc/19/sstate:llvm:core2-32-poky-linux-musl:17.0.1:r0:core2-32:11:dc19b41ca873b1af39ffae4023b2746f3905f53da74198bc56017b81629be048_package.tar.zst
2.6G	./8a/94/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:8a942c39fa4b8849d88524194b4a5b1ebb0fb2fc3d899be93dfad3ebad0471e3_package.tar.zst
2.6G	./4f/13/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:4f13afdcc3f31c3329ba12b0450cd092738227f69f70643fdf8ed860b895e78d_package.tar.zst
2.6G	./3d/b7/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:3db73cf2186a4eeaed54e3ebe8a79f0715ab631021863b95d42460de5ca4d10d_package.tar.zst
2.6G	./8d/49/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:8d4958899e7c8d9d0a6d4a8707087ab4f43252d7bdc4d6a08717bebb5056f611_package.tar.zst
2.6G	./de/f7/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:def71f352b3e4bf4feadd4872fda21c114b92a8140d4578d94aadba85cc243e5_package.tar.zst
2.6G	./9b/4c/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:9b4ccaa767a8b14e03a3a498e30ee521f1d4b148dd2d838a0cae83cdea9c6c4b_package.tar.zst
2.6G	./d5/68/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:d56876668eee027ce636a528513ddafac9dd5fc1ec6e59ebdf78a01c0db242d9_package.tar.zst
2.6G	./3d/42/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:3d4242018de5aa4213ac3e4eaaf34a0e70af2b5d15f15f60c89dbb95879688dd_package.tar.zst
2.6G	./a0/6c/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:a06c80394ea4fe46bd825a93daa53162a311a0f9ad44454e3a5d393054fbd1b2_package.tar.zst
2.6G	./eb/30/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:eb30e10f16601ddc67c4c0c0010c0b4ca18b9dc310476c0619d119a773ff26ff_package.tar.zst
2.6G	./12/44/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:1244e05d84b7d890af897c7fdd145bc80edec61873b61b74d7f561c0697bb4c1_package.tar.zst
2.6G	./bd/4e/sstate:llvm:core2-64-poky-linux:16.0.6:r0:core2-64:11:bd4e39eff88a81e5cc74e9ae254b9134a22c11b53f46ef7ef4a729962c58b72b_package.tar.zst
2.6G	./f9/13/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:f91393f3178abc9524f128dcae9010e101f286fa25b93c6dda008ec786cf4fdf_package.tar.zst
2.6G	./0a/52/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:0a52eeb212af73fa95bb88c4de689704c2c2288087a41b1a42bdc694f5ce8cdf_package.tar.zst
2.6G	./75/0f/sstate:lib32-llvm:x86-pokymllib32-linux:17.0.1:r0:x86:11:750ff6c723a27e4e6d3b404a4b6f1a405f4cf667e2c36fd13b73c142027dc2d7_package.tar.zst
2.6G	./32/c1/sstate:llvm:core2-64-poky-linux-musl:17.0.1:r0:core2-64:11:32c136f463d71e8d56196e608c84c760a0f3c9065103e09d9a4b40bc6b244867_package.tar.zst
2.6G	./86/61/sstate:llvm:core2-64-poky-linux-musl:17.0.1:r0:core2-64:11:8661b7dc1ad9e97dad61a4188c7ec1941ca0a6f4f19bd2df1e6bd4b20ca6622c_package.tar.zst
2.6G	./29/1f/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:291fd67560b6b8cec98c12b93bcb9c806780c0d2dfc6ebb82a0a02a591b76df9_package.tar.zst
2.6G	./d3/92/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:d3923bfa31cbb71fdcdc0370b6e69367fd39be230cfd76093fc977d26c454b03_package.tar.zst
2.6G	./bf/e1/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:bfe1c02ee126434574aaba125aa66123f216f248eebd479440326e9acce508d8_package.tar.zst
2.6G	./09/22/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:092251323d7e60c8d61969e5bba899af479740ff5f147f820f85e5cf8527027b_package.tar.zst
2.6G	./20/66/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:2066b22d740715039728142ebc2d37493cbad2ff7d99289b669af249e3897581_package.tar.zst
2.6G	./8c/8c/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:8c8cc5e4d03e3079edc2858425764d36016ba5b7c9add9c76ab913580ce88a0c_package.tar.zst
2.6G	./dd/95/sstate:llvm:core2-64-poky-linux:17.0.1:r0:core2-64:11:dd95f6d42c4edd21f2bdfa5a193de207ab544b906258eb5be956869197a951ef_package.tar.zst
2.7G	./f2/44/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:f2446355f6eeba677d2acf1939cef0a305d7f42d07ef6a277367468b7941ef31_package_write_deb.tar.zst
2.7G	./10/20/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:102028b9673368ab4cc5a81fb0e56871dc40eab53bf9596ea90d3ee272fe50a0_package_write_ipk.tar.zst
2.7G	./d3/bc/sstate:webkitgtk:core2-64-poky-linux:2.38.6:r0:core2-64:11:d3bce99394fd3e5e91bde84af640752d572a7ea089c71a3f2764835771cb0f4c_package.tar.zst
2.8G	./9f/0d/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:9f0d542dea1f0b8ef41f3311250554fa808509ec25c2ed6909ef01dcf4e1cabc_package_write_rpm.tar.zst
2.8G	./2c/a3/sstate:webkitgtk:core2-64-poky-linux:2.36.8:r0:core2-64:10:2ca3e457153e67fae0105e07f2521a653a917cf0c5bdc8ae71d56da8c48e7224_package.tar.zst
2.8G	./e5/03/sstate:webkitgtk:core2-64-poky-linux:2.36.8:r0:core2-64:10:e503052148d0c8afe787c8646fbb46039a52970c1d543fead322124761b8255c_package.tar.zst
2.8G	./33/68/sstate:webkitgtk:core2-64-poky-linux:2.36.8:r0:core2-64:10:3368de89398b1b4f8948cfd1adc74e8ae4bc8f03f46d3b8e4ad6a837ff10e02b_package.tar.zst
2.9G	./0b/b0/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:0bb0428be67694c2934071b497aad17d35263940c1774314a7056cc580fd35dd_package_write_rpm.tar.zst
3.2G	./f2/a2/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:f2a2f72c49c027ebe89a5f1da8f562f824f5c052ea897ade057f549eebebe202_package.tar.zst
3.2G	./c8/3e/sstate:llvm:core2-64-poky-linux:13.0.1:r0:core2-64:10:c83e674895d15cbfbbdd90e320e8284d7e3796af1625d3c939d59a4c97b705e0_package.tar.zst
3.4G	./64/3c/sstate:llvm:core2-64-poky-linux:15.0.7:r0:core2-64:11:643c62f893f04783fb40e3efe0f89e5a68d98833affda61f91368bd892c10f94_package.tar.zst

^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: CDN for sstate.yoctoproject.org
  2023-09-22 17:32 CDN for sstate.yoctoproject.org Michael Halstead
@ 2023-09-22 19:03 ` Michael Halstead
  2023-09-23 19:51   ` Michael Halstead
  2023-10-17 15:33 ` Alexander Kanavin
  1 sibling, 1 reply; 10+ messages in thread
From: Michael Halstead @ 2023-09-22 19:03 UTC (permalink / raw)
  To: Alexander Kanavin, Yocto-mailing-list; +Cc: Richard Purdie

[-- Attachment #1: Type: text/plain, Size: 5190 bytes --]

Here are packages and size ranges that are not yet served via CDN.
Hopefully testing on the smaller files is possible while we figure out
a solution for these.

assimp 75M 76M
binutils 64M 100M
boost 68M 148M
ceres-solver 167M 182M
cmake 157M 553M
ffmpeg 68M 69M
gcc 127M 681M
gcc-cross-aarch64 64M 102M
gcc-cross-arm 64M 72M
gcc-cross-i686 65M 80M
gcc-cross-mips 65M 69M
gcc-cross-mips64 64M 69M
gcc-cross-powerpc 64M 72M
gcc-cross-x86_64 65M 104M
gcc-crosssdk-aarch64-pokysdk-linux 65M 75M
gcc-crosssdk-i686-oesdk-linux 65M 77M
gcc-crosssdk-i686-pokysdk-linux 65M 79M
gcc-crosssdk-i686-w64-mingw32 66M 78M
gcc-crosssdk-x86_64-oesdk-linux 65M 78M
gcc-crosssdk-x86_64-pokysdk-linux 65M 80M
gcc-crosssdk-x86_64-w64-mingw32 67M 79M
gdb 66M 105M
ghostscript 64M 115M
git 68M 90M
glibc-locale 81M 228M
go 67M 67M
go-binary-native 82M 82M
go-cross-core2-32 98M 100M
go-cross-core2-64 93M 100M
go-cross-corei7-64 98M 99M
go-cross-cortexa15t2hf-neon 99M 99M
go-cross-cortexa57 93M 99M
go-cross-cortexa8hf-neon 99M 100M
go-cross-mips32r2 98M 99M
go-cross-mips64 99M 99M
go-cross-mips64r2 99M 99M
go-native 86M 86M
go-runtime 64M 82M
grpc 74M 102M
hdf5 78M 137M
influxdb 76M 98M
intel-media-driver 68M 132M
jemalloc 164M 164M
kea 65M 153M
lib32-binutils 64M 70M
lib32-boost 77M 122M
lib32-cmake 158M 305M
lib32-gcc 144M 390M
lib32-gcc-cross-i686 65M 79M
lib32-gcc-cross-mips 65M 69M
lib32-ghostscript 65M 83M
lib32-git 65M 65M
lib32-glibc-locale 81M 228M
lib32-go-cross-x86 98M 99M
lib32-kea 64M 88M
lib32-linux-firmware 275M 419M
lib32-llvm 1126.4M 2662.4M
lib32-ltp 77M 305M
lib32-mesa 65M 68M
lib32-openssl 119M 360M
lib32-piglit 106M 106M
lib32-qemu 275M 639M
lib32-rust 93M 129M
lib32-rust-llvm 64M 76M
lib32-spirv-tools 68M 107M
lib32-valgrind 68M 89M
lib32-vulkan-demos 74M 74M
lib32-vulkan-validation-layers 65M 101M
lib32-webkitgtk 1126.4M 927M
lib64-boost 75M 119M
lib64-gcc 151M 401M
lib64-gcc-cross-mips64 65M 69M
lib64-gcc-cross-x86_64 65M 80M
lib64-glibc-locale 82M 228M
lib64-go-cross-x86_64 98M 99M
lib64-go-runtime 68M 81M
lib64-ltp 67M 347M
lib64-mesa 66M 68M
lib64-openssl 276M 411M
lib64-rust 97M 123M
lib64-rust-llvm 64M 67M
lib64-valgrind 65M 84M
libyang 93M 93M
linux-firmware 275M 419M
linux-intel 120M 395M
linux-yocto 66M 537M
linux-yocto-rt 174M 287M
llvm 1126.4M 3481.6M
llvm-native 71M 88M
ltp 64M 598M
mariadb 1331.2M 966M
mariadb-native 237M 259M
mesa 64M 113M
minifi-cpp 155M 214M
mozjs-102 183M 255M
nativesdk-glibc-locale 81M 226M
nativesdk-qemu 245M 644M
nativesdk-rust 82M 125M
nativesdk-rust-llvm 65M 73M
nodejs 1024.0M 723M
opencv 185M 237M
opengl-es-cts 406M 560M
openssl 92M 685M
php 67M 68M
piglit 106M 106M
poco 75M 107M
python3-grpcio 65M 88M
python3-wxgtk4 70M 100M
qemu 1228.8M 929M
qemu-system-native 65M 71M
renderdoc 67M 82M
rocksdb 177M 272M
rust 85M 140M
rust-llvm 64M 79M
rust-llvm-native 287M 418M
rust-native 78M 85M
spirv-tools 64M 195M
systemd 69M 71M
tesseract-lang 369M 451M
upm 82M 82M
valgrind 64M 128M
vsomeip 82M 149M
vulkan-cts 592M 833M
vulkan-demos 73M 138M
vulkan-validation-layers 65M 108M
webkitgtk 1024.0M 995M
webkitgtk3 1126.4M 1638.4M
wireshark 65M 85M
wxwidgets 70M 88M

On Fri, Sep 22, 2023 at 10:32 AM Michael Halstead <
mhalstead@linuxfoundation.org> wrote:

> Right now we have https://cdn.jsdelivr.net/yocto/sstate set up as a CDN
> mirroring proxy endpoint. It's fast and completely free to the project.
> However, it will only work for files smaller than 64MB and will send a
> redirect to the main server at sstate.yoctoproject.org for files larger
> than 64MB.
>
> The good news is that we have a fast free CDN provided by
> https://www.jsdelivr.com/ and their many sponsors for 99.4% of our files.
>
> Here is an estimated distribution of sstate files currently available:
> 1 KB-4 KB: 103168
> 4 KB-16 KB: 1218048
> 16 KB-64 KB: 1886976
> 64 KB-256 KB: 1225216
> 256 KB-1 MB: 170752
> 1 MB-4 MB: 92928
> 4 MB-16 MB: 83200
> 16 MB-64 MB: 40448
> 64 MB-256 MB: 17664
> 256 MB-1 GB: 7936
> 1 GB-4 GB: 2560
>
> I'm still working on a CDN solution for the larger files but we can begin
> testing https://cdn.jsdelivr.net/yocto/sstate today.
>
> Here is an example link to a file that is currently popular from each
> location:
>
>
> http://sstate.yoctoproject.org/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>
>
> https://cdn.jsdelivr.net/yocto/sstate/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>
> I'm also attaching a list of the largest files in sstate. Anything we can
> do to reduce the size of these or to split them into smaller pieces will
> help with hosting and with the user's download experience.
>
> --
> Michael Halstead
> Linux Foundation / Yocto Project
> Systems Operations Engineer
>


-- 
Michael Halstead
Linux Foundation / Yocto Project
Systems Operations Engineer

[-- Attachment #2: Type: text/html, Size: 7091 bytes --]

^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: CDN for sstate.yoctoproject.org
  2023-09-22 19:03 ` Michael Halstead
@ 2023-09-23 19:51   ` Michael Halstead
  2023-09-23 19:52     ` Michael Halstead
  0 siblings, 1 reply; 10+ messages in thread
From: Michael Halstead @ 2023-09-23 19:51 UTC (permalink / raw)
  To: Alexander Kanavin, Yocto-mailing-list; +Cc: Richard Purdie, Ross Burton

[-- Attachment #1: Type: text/plain, Size: 6634 bytes --]

After some workshopping this morning we have a solution for larger files.
Almost every package is now available with CDN acceleration. For files over
64MB the fetcher will need to follow a series of redirects to work
properly. Files under 64MB will be served fast from every region. Larger
files will be proxyed and cached on a smaller network of servers that can
handle them. Once cached they will be stored for up to a month. Because
sstate is immutable that means fast access after the first use in a region.

Set SSTATE_MIRRORS
<https://docs.yoctoproject.org/ref-manual/variables.html#term-SSTATE_MIRRORS>
to include https://cdn.jsdelivr.net/yocto/sstate/all or
http://cdn.jsdelivr.net/yocto/sstate/all, test it out, and report back.

If we want the system to perform as fast as possible we need to change
SSTATE to work with 64MB file segments but that's a discussion to have
after this solution is tested.


On Fri, Sep 22, 2023 at 12:03 PM Michael Halstead <
mhalstead@linuxfoundation.org> wrote:

> Here are packages and size ranges that are not yet served via CDN.
> Hopefully testing on the smaller files is possible while we figure out
> a solution for these.
>
> assimp 75M 76M
> binutils 64M 100M
> boost 68M 148M
> ceres-solver 167M 182M
> cmake 157M 553M
> ffmpeg 68M 69M
> gcc 127M 681M
> gcc-cross-aarch64 64M 102M
> gcc-cross-arm 64M 72M
> gcc-cross-i686 65M 80M
> gcc-cross-mips 65M 69M
> gcc-cross-mips64 64M 69M
> gcc-cross-powerpc 64M 72M
> gcc-cross-x86_64 65M 104M
> gcc-crosssdk-aarch64-pokysdk-linux 65M 75M
> gcc-crosssdk-i686-oesdk-linux 65M 77M
> gcc-crosssdk-i686-pokysdk-linux 65M 79M
> gcc-crosssdk-i686-w64-mingw32 66M 78M
> gcc-crosssdk-x86_64-oesdk-linux 65M 78M
> gcc-crosssdk-x86_64-pokysdk-linux 65M 80M
> gcc-crosssdk-x86_64-w64-mingw32 67M 79M
> gdb 66M 105M
> ghostscript 64M 115M
> git 68M 90M
> glibc-locale 81M 228M
> go 67M 67M
> go-binary-native 82M 82M
> go-cross-core2-32 98M 100M
> go-cross-core2-64 93M 100M
> go-cross-corei7-64 98M 99M
> go-cross-cortexa15t2hf-neon 99M 99M
> go-cross-cortexa57 93M 99M
> go-cross-cortexa8hf-neon 99M 100M
> go-cross-mips32r2 98M 99M
> go-cross-mips64 99M 99M
> go-cross-mips64r2 99M 99M
> go-native 86M 86M
> go-runtime 64M 82M
> grpc 74M 102M
> hdf5 78M 137M
> influxdb 76M 98M
> intel-media-driver 68M 132M
> jemalloc 164M 164M
> kea 65M 153M
> lib32-binutils 64M 70M
> lib32-boost 77M 122M
> lib32-cmake 158M 305M
> lib32-gcc 144M 390M
> lib32-gcc-cross-i686 65M 79M
> lib32-gcc-cross-mips 65M 69M
> lib32-ghostscript 65M 83M
> lib32-git 65M 65M
> lib32-glibc-locale 81M 228M
> lib32-go-cross-x86 98M 99M
> lib32-kea 64M 88M
> lib32-linux-firmware 275M 419M
> lib32-llvm 1126.4M 2662.4M
> lib32-ltp 77M 305M
> lib32-mesa 65M 68M
> lib32-openssl 119M 360M
> lib32-piglit 106M 106M
> lib32-qemu 275M 639M
> lib32-rust 93M 129M
> lib32-rust-llvm 64M 76M
> lib32-spirv-tools 68M 107M
> lib32-valgrind 68M 89M
> lib32-vulkan-demos 74M 74M
> lib32-vulkan-validation-layers 65M 101M
> lib32-webkitgtk 1126.4M 927M
> lib64-boost 75M 119M
> lib64-gcc 151M 401M
> lib64-gcc-cross-mips64 65M 69M
> lib64-gcc-cross-x86_64 65M 80M
> lib64-glibc-locale 82M 228M
> lib64-go-cross-x86_64 98M 99M
> lib64-go-runtime 68M 81M
> lib64-ltp 67M 347M
> lib64-mesa 66M 68M
> lib64-openssl 276M 411M
> lib64-rust 97M 123M
> lib64-rust-llvm 64M 67M
> lib64-valgrind 65M 84M
> libyang 93M 93M
> linux-firmware 275M 419M
> linux-intel 120M 395M
> linux-yocto 66M 537M
> linux-yocto-rt 174M 287M
> llvm 1126.4M 3481.6M
> llvm-native 71M 88M
> ltp 64M 598M
> mariadb 1331.2M 966M
> mariadb-native 237M 259M
> mesa 64M 113M
> minifi-cpp 155M 214M
> mozjs-102 183M 255M
> nativesdk-glibc-locale 81M 226M
> nativesdk-qemu 245M 644M
> nativesdk-rust 82M 125M
> nativesdk-rust-llvm 65M 73M
> nodejs 1024.0M 723M
> opencv 185M 237M
> opengl-es-cts 406M 560M
> openssl 92M 685M
> php 67M 68M
> piglit 106M 106M
> poco 75M 107M
> python3-grpcio 65M 88M
> python3-wxgtk4 70M 100M
> qemu 1228.8M 929M
> qemu-system-native 65M 71M
> renderdoc 67M 82M
> rocksdb 177M 272M
> rust 85M 140M
> rust-llvm 64M 79M
> rust-llvm-native 287M 418M
> rust-native 78M 85M
> spirv-tools 64M 195M
> systemd 69M 71M
> tesseract-lang 369M 451M
> upm 82M 82M
> valgrind 64M 128M
> vsomeip 82M 149M
> vulkan-cts 592M 833M
> vulkan-demos 73M 138M
> vulkan-validation-layers 65M 108M
> webkitgtk 1024.0M 995M
> webkitgtk3 1126.4M 1638.4M
> wireshark 65M 85M
> wxwidgets 70M 88M
>
> On Fri, Sep 22, 2023 at 10:32 AM Michael Halstead <
> mhalstead@linuxfoundation.org> wrote:
>
>> Right now we have https://cdn.jsdelivr.net/yocto/sstate set up as a CDN
>> mirroring proxy endpoint. It's fast and completely free to the project.
>> However, it will only work for files smaller than 64MB and will send a
>> redirect to the main server at sstate.yoctoproject.org for files larger
>> than 64MB.
>>
>> The good news is that we have a fast free CDN provided by
>> https://www.jsdelivr.com/ and their many sponsors for 99.4% of our files.
>>
>> Here is an estimated distribution of sstate files currently available:
>> 1 KB-4 KB: 103168
>> 4 KB-16 KB: 1218048
>> 16 KB-64 KB: 1886976
>> 64 KB-256 KB: 1225216
>> 256 KB-1 MB: 170752
>> 1 MB-4 MB: 92928
>> 4 MB-16 MB: 83200
>> 16 MB-64 MB: 40448
>> 64 MB-256 MB: 17664
>> 256 MB-1 GB: 7936
>> 1 GB-4 GB: 2560
>>
>> I'm still working on a CDN solution for the larger files but we can begin
>> testing https://cdn.jsdelivr.net/yocto/sstate today.
>>
>> Here is an example link to a file that is currently popular from each
>> location:
>>
>>
>> http://sstate.yoctoproject.org/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>>
>>
>> https://cdn.jsdelivr.net/yocto/sstate/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>>
>> I'm also attaching a list of the largest files in sstate. Anything we can
>> do to reduce the size of these or to split them into smaller pieces will
>> help with hosting and with the user's download experience.
>>
>> --
>> Michael Halstead
>> Linux Foundation / Yocto Project
>> Systems Operations Engineer
>>
>
>
> --
> Michael Halstead
> Linux Foundation / Yocto Project
> Systems Operations Engineer
>


-- 
Michael Halstead
Linux Foundation / Yocto Project
Systems Operations Engineer

[-- Attachment #2: Type: text/html, Size: 8871 bytes --]

^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: CDN for sstate.yoctoproject.org
  2023-09-23 19:51   ` Michael Halstead
@ 2023-09-23 19:52     ` Michael Halstead
  2023-09-23 20:39       ` [yocto] " Khem Raj
  2023-09-24 13:37       ` akuster808
  0 siblings, 2 replies; 10+ messages in thread
From: Michael Halstead @ 2023-09-23 19:52 UTC (permalink / raw)
  To: Alexander Kanavin, Yocto-mailing-list; +Cc: Richard Purdie, Ross Burton

[-- Attachment #1: Type: text/plain, Size: 7233 bytes --]

When adding https://cdn.jsdelivr.net/yocto/sstate/all please remove any
reference to sstate.yoctoproject.org from SSTATE_MIRRORS to ensure a proper
test.

Thank you

On Sat, Sep 23, 2023 at 12:51 PM Michael Halstead <
mhalstead@linuxfoundation.org> wrote:

> After some workshopping this morning we have a solution for larger files.
> Almost every package is now available with CDN acceleration. For files over
> 64MB the fetcher will need to follow a series of redirects to work
> properly. Files under 64MB will be served fast from every region. Larger
> files will be proxyed and cached on a smaller network of servers that can
> handle them. Once cached they will be stored for up to a month. Because
> sstate is immutable that means fast access after the first use in a region.
>
> Set SSTATE_MIRRORS
> <https://docs.yoctoproject.org/ref-manual/variables.html#term-SSTATE_MIRRORS>
> to include https://cdn.jsdelivr.net/yocto/sstate/all or
> http://cdn.jsdelivr.net/yocto/sstate/all, test it out, and report back.
>
> If we want the system to perform as fast as possible we need to change
> SSTATE to work with 64MB file segments but that's a discussion to have
> after this solution is tested.
>
>
> On Fri, Sep 22, 2023 at 12:03 PM Michael Halstead <
> mhalstead@linuxfoundation.org> wrote:
>
>> Here are packages and size ranges that are not yet served via CDN.
>> Hopefully testing on the smaller files is possible while we figure out
>> a solution for these.
>>
>> assimp 75M 76M
>> binutils 64M 100M
>> boost 68M 148M
>> ceres-solver 167M 182M
>> cmake 157M 553M
>> ffmpeg 68M 69M
>> gcc 127M 681M
>> gcc-cross-aarch64 64M 102M
>> gcc-cross-arm 64M 72M
>> gcc-cross-i686 65M 80M
>> gcc-cross-mips 65M 69M
>> gcc-cross-mips64 64M 69M
>> gcc-cross-powerpc 64M 72M
>> gcc-cross-x86_64 65M 104M
>> gcc-crosssdk-aarch64-pokysdk-linux 65M 75M
>> gcc-crosssdk-i686-oesdk-linux 65M 77M
>> gcc-crosssdk-i686-pokysdk-linux 65M 79M
>> gcc-crosssdk-i686-w64-mingw32 66M 78M
>> gcc-crosssdk-x86_64-oesdk-linux 65M 78M
>> gcc-crosssdk-x86_64-pokysdk-linux 65M 80M
>> gcc-crosssdk-x86_64-w64-mingw32 67M 79M
>> gdb 66M 105M
>> ghostscript 64M 115M
>> git 68M 90M
>> glibc-locale 81M 228M
>> go 67M 67M
>> go-binary-native 82M 82M
>> go-cross-core2-32 98M 100M
>> go-cross-core2-64 93M 100M
>> go-cross-corei7-64 98M 99M
>> go-cross-cortexa15t2hf-neon 99M 99M
>> go-cross-cortexa57 93M 99M
>> go-cross-cortexa8hf-neon 99M 100M
>> go-cross-mips32r2 98M 99M
>> go-cross-mips64 99M 99M
>> go-cross-mips64r2 99M 99M
>> go-native 86M 86M
>> go-runtime 64M 82M
>> grpc 74M 102M
>> hdf5 78M 137M
>> influxdb 76M 98M
>> intel-media-driver 68M 132M
>> jemalloc 164M 164M
>> kea 65M 153M
>> lib32-binutils 64M 70M
>> lib32-boost 77M 122M
>> lib32-cmake 158M 305M
>> lib32-gcc 144M 390M
>> lib32-gcc-cross-i686 65M 79M
>> lib32-gcc-cross-mips 65M 69M
>> lib32-ghostscript 65M 83M
>> lib32-git 65M 65M
>> lib32-glibc-locale 81M 228M
>> lib32-go-cross-x86 98M 99M
>> lib32-kea 64M 88M
>> lib32-linux-firmware 275M 419M
>> lib32-llvm 1126.4M 2662.4M
>> lib32-ltp 77M 305M
>> lib32-mesa 65M 68M
>> lib32-openssl 119M 360M
>> lib32-piglit 106M 106M
>> lib32-qemu 275M 639M
>> lib32-rust 93M 129M
>> lib32-rust-llvm 64M 76M
>> lib32-spirv-tools 68M 107M
>> lib32-valgrind 68M 89M
>> lib32-vulkan-demos 74M 74M
>> lib32-vulkan-validation-layers 65M 101M
>> lib32-webkitgtk 1126.4M 927M
>> lib64-boost 75M 119M
>> lib64-gcc 151M 401M
>> lib64-gcc-cross-mips64 65M 69M
>> lib64-gcc-cross-x86_64 65M 80M
>> lib64-glibc-locale 82M 228M
>> lib64-go-cross-x86_64 98M 99M
>> lib64-go-runtime 68M 81M
>> lib64-ltp 67M 347M
>> lib64-mesa 66M 68M
>> lib64-openssl 276M 411M
>> lib64-rust 97M 123M
>> lib64-rust-llvm 64M 67M
>> lib64-valgrind 65M 84M
>> libyang 93M 93M
>> linux-firmware 275M 419M
>> linux-intel 120M 395M
>> linux-yocto 66M 537M
>> linux-yocto-rt 174M 287M
>> llvm 1126.4M 3481.6M
>> llvm-native 71M 88M
>> ltp 64M 598M
>> mariadb 1331.2M 966M
>> mariadb-native 237M 259M
>> mesa 64M 113M
>> minifi-cpp 155M 214M
>> mozjs-102 183M 255M
>> nativesdk-glibc-locale 81M 226M
>> nativesdk-qemu 245M 644M
>> nativesdk-rust 82M 125M
>> nativesdk-rust-llvm 65M 73M
>> nodejs 1024.0M 723M
>> opencv 185M 237M
>> opengl-es-cts 406M 560M
>> openssl 92M 685M
>> php 67M 68M
>> piglit 106M 106M
>> poco 75M 107M
>> python3-grpcio 65M 88M
>> python3-wxgtk4 70M 100M
>> qemu 1228.8M 929M
>> qemu-system-native 65M 71M
>> renderdoc 67M 82M
>> rocksdb 177M 272M
>> rust 85M 140M
>> rust-llvm 64M 79M
>> rust-llvm-native 287M 418M
>> rust-native 78M 85M
>> spirv-tools 64M 195M
>> systemd 69M 71M
>> tesseract-lang 369M 451M
>> upm 82M 82M
>> valgrind 64M 128M
>> vsomeip 82M 149M
>> vulkan-cts 592M 833M
>> vulkan-demos 73M 138M
>> vulkan-validation-layers 65M 108M
>> webkitgtk 1024.0M 995M
>> webkitgtk3 1126.4M 1638.4M
>> wireshark 65M 85M
>> wxwidgets 70M 88M
>>
>> On Fri, Sep 22, 2023 at 10:32 AM Michael Halstead <
>> mhalstead@linuxfoundation.org> wrote:
>>
>>> Right now we have https://cdn.jsdelivr.net/yocto/sstate set up as a CDN
>>> mirroring proxy endpoint. It's fast and completely free to the project.
>>> However, it will only work for files smaller than 64MB and will send a
>>> redirect to the main server at sstate.yoctoproject.org for files larger
>>> than 64MB.
>>>
>>> The good news is that we have a fast free CDN provided by
>>> https://www.jsdelivr.com/ and their many sponsors for 99.4% of our
>>> files.
>>>
>>> Here is an estimated distribution of sstate files currently available:
>>> 1 KB-4 KB: 103168
>>> 4 KB-16 KB: 1218048
>>> 16 KB-64 KB: 1886976
>>> 64 KB-256 KB: 1225216
>>> 256 KB-1 MB: 170752
>>> 1 MB-4 MB: 92928
>>> 4 MB-16 MB: 83200
>>> 16 MB-64 MB: 40448
>>> 64 MB-256 MB: 17664
>>> 256 MB-1 GB: 7936
>>> 1 GB-4 GB: 2560
>>>
>>> I'm still working on a CDN solution for the larger files but we can
>>> begin testing https://cdn.jsdelivr.net/yocto/sstate today.
>>>
>>> Here is an example link to a file that is currently popular from each
>>> location:
>>>
>>>
>>> http://sstate.yoctoproject.org/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>>>
>>>
>>> https://cdn.jsdelivr.net/yocto/sstate/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>>>
>>> I'm also attaching a list of the largest files in sstate. Anything we
>>> can do to reduce the size of these or to split them into smaller pieces
>>> will help with hosting and with the user's download experience.
>>>
>>> --
>>> Michael Halstead
>>> Linux Foundation / Yocto Project
>>> Systems Operations Engineer
>>>
>>
>>
>> --
>> Michael Halstead
>> Linux Foundation / Yocto Project
>> Systems Operations Engineer
>>
>
>
> --
> Michael Halstead
> Linux Foundation / Yocto Project
> Systems Operations Engineer
>


-- 
Michael Halstead
Linux Foundation / Yocto Project
Systems Operations Engineer

[-- Attachment #2: Type: text/html, Size: 9885 bytes --]

^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: [yocto] CDN for sstate.yoctoproject.org
  2023-09-23 19:52     ` Michael Halstead
@ 2023-09-23 20:39       ` Khem Raj
  2023-09-24 13:37       ` akuster808
  1 sibling, 0 replies; 10+ messages in thread
From: Khem Raj @ 2023-09-23 20:39 UTC (permalink / raw)
  To: Michael Halstead
  Cc: Alexander Kanavin, Yocto-mailing-list, Richard Purdie, Ross Burton

For fun, I tried scratch build of core-image-sato-sdk from master-next
+ my changes with the new SSTATE_MIRROR

Initialising tasks: 100%
|###############################################################################################################################################################|
Time: 0:02:16
Checking sstate mirror object availability: 100%
|#######################################################################################################################################|
Time: 0:02:26
Sstate summary: Wanted 5040 Local 3 Mirrors 5024 Missed 13 Current 0
(99% match, 0% complete)

...

NOTE: Tasks Summary: Attempted 10124 tasks of which 10092 didn't need
to be rerun and all succeeded.

So match percentage is cool.

Elapsed time: 799.86 seconds

which is approx 13 mins so pretty cool given that sstate download is
also included in this time.

On Sat, Sep 23, 2023 at 12:53 PM Michael Halstead
<mhalstead@linuxfoundation.org> wrote:
>
> When adding https://cdn.jsdelivr.net/yocto/sstate/all please remove any reference to sstate.yoctoproject.org from SSTATE_MIRRORS to ensure a proper test.
>
> Thank you
>
> On Sat, Sep 23, 2023 at 12:51 PM Michael Halstead <mhalstead@linuxfoundation.org> wrote:
>>
>> After some workshopping this morning we have a solution for larger files. Almost every package is now available with CDN acceleration. For files over 64MB the fetcher will need to follow a series of redirects to work properly. Files under 64MB will be served fast from every region. Larger files will be proxyed and cached on a smaller network of servers that can handle them. Once cached they will be stored for up to a month. Because sstate is immutable that means fast access after the first use in a region.
>>
>> Set SSTATE_MIRRORS to include https://cdn.jsdelivr.net/yocto/sstate/all or http://cdn.jsdelivr.net/yocto/sstate/all, test it out, and report back.
>>
>> If we want the system to perform as fast as possible we need to change SSTATE to work with 64MB file segments but that's a discussion to have after this solution is tested.
>>
>>
>> On Fri, Sep 22, 2023 at 12:03 PM Michael Halstead <mhalstead@linuxfoundation.org> wrote:
>>>
>>> Here are packages and size ranges that are not yet served via CDN. Hopefully testing on the smaller files is possible while we figure out a solution for these.
>>>
>>> assimp 75M 76M
>>> binutils 64M 100M
>>> boost 68M 148M
>>> ceres-solver 167M 182M
>>> cmake 157M 553M
>>> ffmpeg 68M 69M
>>> gcc 127M 681M
>>> gcc-cross-aarch64 64M 102M
>>> gcc-cross-arm 64M 72M
>>> gcc-cross-i686 65M 80M
>>> gcc-cross-mips 65M 69M
>>> gcc-cross-mips64 64M 69M
>>> gcc-cross-powerpc 64M 72M
>>> gcc-cross-x86_64 65M 104M
>>> gcc-crosssdk-aarch64-pokysdk-linux 65M 75M
>>> gcc-crosssdk-i686-oesdk-linux 65M 77M
>>> gcc-crosssdk-i686-pokysdk-linux 65M 79M
>>> gcc-crosssdk-i686-w64-mingw32 66M 78M
>>> gcc-crosssdk-x86_64-oesdk-linux 65M 78M
>>> gcc-crosssdk-x86_64-pokysdk-linux 65M 80M
>>> gcc-crosssdk-x86_64-w64-mingw32 67M 79M
>>> gdb 66M 105M
>>> ghostscript 64M 115M
>>> git 68M 90M
>>> glibc-locale 81M 228M
>>> go 67M 67M
>>> go-binary-native 82M 82M
>>> go-cross-core2-32 98M 100M
>>> go-cross-core2-64 93M 100M
>>> go-cross-corei7-64 98M 99M
>>> go-cross-cortexa15t2hf-neon 99M 99M
>>> go-cross-cortexa57 93M 99M
>>> go-cross-cortexa8hf-neon 99M 100M
>>> go-cross-mips32r2 98M 99M
>>> go-cross-mips64 99M 99M
>>> go-cross-mips64r2 99M 99M
>>> go-native 86M 86M
>>> go-runtime 64M 82M
>>> grpc 74M 102M
>>> hdf5 78M 137M
>>> influxdb 76M 98M
>>> intel-media-driver 68M 132M
>>> jemalloc 164M 164M
>>> kea 65M 153M
>>> lib32-binutils 64M 70M
>>> lib32-boost 77M 122M
>>> lib32-cmake 158M 305M
>>> lib32-gcc 144M 390M
>>> lib32-gcc-cross-i686 65M 79M
>>> lib32-gcc-cross-mips 65M 69M
>>> lib32-ghostscript 65M 83M
>>> lib32-git 65M 65M
>>> lib32-glibc-locale 81M 228M
>>> lib32-go-cross-x86 98M 99M
>>> lib32-kea 64M 88M
>>> lib32-linux-firmware 275M 419M
>>> lib32-llvm 1126.4M 2662.4M
>>> lib32-ltp 77M 305M
>>> lib32-mesa 65M 68M
>>> lib32-openssl 119M 360M
>>> lib32-piglit 106M 106M
>>> lib32-qemu 275M 639M
>>> lib32-rust 93M 129M
>>> lib32-rust-llvm 64M 76M
>>> lib32-spirv-tools 68M 107M
>>> lib32-valgrind 68M 89M
>>> lib32-vulkan-demos 74M 74M
>>> lib32-vulkan-validation-layers 65M 101M
>>> lib32-webkitgtk 1126.4M 927M
>>> lib64-boost 75M 119M
>>> lib64-gcc 151M 401M
>>> lib64-gcc-cross-mips64 65M 69M
>>> lib64-gcc-cross-x86_64 65M 80M
>>> lib64-glibc-locale 82M 228M
>>> lib64-go-cross-x86_64 98M 99M
>>> lib64-go-runtime 68M 81M
>>> lib64-ltp 67M 347M
>>> lib64-mesa 66M 68M
>>> lib64-openssl 276M 411M
>>> lib64-rust 97M 123M
>>> lib64-rust-llvm 64M 67M
>>> lib64-valgrind 65M 84M
>>> libyang 93M 93M
>>> linux-firmware 275M 419M
>>> linux-intel 120M 395M
>>> linux-yocto 66M 537M
>>> linux-yocto-rt 174M 287M
>>> llvm 1126.4M 3481.6M
>>> llvm-native 71M 88M
>>> ltp 64M 598M
>>> mariadb 1331.2M 966M
>>> mariadb-native 237M 259M
>>> mesa 64M 113M
>>> minifi-cpp 155M 214M
>>> mozjs-102 183M 255M
>>> nativesdk-glibc-locale 81M 226M
>>> nativesdk-qemu 245M 644M
>>> nativesdk-rust 82M 125M
>>> nativesdk-rust-llvm 65M 73M
>>> nodejs 1024.0M 723M
>>> opencv 185M 237M
>>> opengl-es-cts 406M 560M
>>> openssl 92M 685M
>>> php 67M 68M
>>> piglit 106M 106M
>>> poco 75M 107M
>>> python3-grpcio 65M 88M
>>> python3-wxgtk4 70M 100M
>>> qemu 1228.8M 929M
>>> qemu-system-native 65M 71M
>>> renderdoc 67M 82M
>>> rocksdb 177M 272M
>>> rust 85M 140M
>>> rust-llvm 64M 79M
>>> rust-llvm-native 287M 418M
>>> rust-native 78M 85M
>>> spirv-tools 64M 195M
>>> systemd 69M 71M
>>> tesseract-lang 369M 451M
>>> upm 82M 82M
>>> valgrind 64M 128M
>>> vsomeip 82M 149M
>>> vulkan-cts 592M 833M
>>> vulkan-demos 73M 138M
>>> vulkan-validation-layers 65M 108M
>>> webkitgtk 1024.0M 995M
>>> webkitgtk3 1126.4M 1638.4M
>>> wireshark 65M 85M
>>> wxwidgets 70M 88M
>>>
>>> On Fri, Sep 22, 2023 at 10:32 AM Michael Halstead <mhalstead@linuxfoundation.org> wrote:
>>>>
>>>> Right now we have https://cdn.jsdelivr.net/yocto/sstate set up as a CDN mirroring proxy endpoint. It's fast and completely free to the project. However, it will only work for files smaller than 64MB and will send a redirect to the main server at sstate.yoctoproject.org for files larger than 64MB.
>>>>
>>>> The good news is that we have a fast free CDN provided by https://www.jsdelivr.com/ and their many sponsors for 99.4% of our files.
>>>>
>>>> Here is an estimated distribution of sstate files currently available:
>>>> 1 KB-4 KB: 103168
>>>> 4 KB-16 KB: 1218048
>>>> 16 KB-64 KB: 1886976
>>>> 64 KB-256 KB: 1225216
>>>> 256 KB-1 MB: 170752
>>>> 1 MB-4 MB: 92928
>>>> 4 MB-16 MB: 83200
>>>> 16 MB-64 MB: 40448
>>>> 64 MB-256 MB: 17664
>>>> 256 MB-1 GB: 7936
>>>> 1 GB-4 GB: 2560
>>>>
>>>> I'm still working on a CDN solution for the larger files but we can begin testing https://cdn.jsdelivr.net/yocto/sstate today.
>>>>
>>>> Here is an example link to a file that is currently popular from each location:
>>>>
>>>> http://sstate.yoctoproject.org/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>>>>
>>>> https://cdn.jsdelivr.net/yocto/sstate/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>>>>
>>>> I'm also attaching a list of the largest files in sstate. Anything we can do to reduce the size of these or to split them into smaller pieces will help with hosting and with the user's download experience.
>>>>
>>>> --
>>>> Michael Halstead
>>>> Linux Foundation / Yocto Project
>>>> Systems Operations Engineer
>>>
>>>
>>>
>>> --
>>> Michael Halstead
>>> Linux Foundation / Yocto Project
>>> Systems Operations Engineer
>>
>>
>>
>> --
>> Michael Halstead
>> Linux Foundation / Yocto Project
>> Systems Operations Engineer
>
>
>
> --
> Michael Halstead
> Linux Foundation / Yocto Project
> Systems Operations Engineer
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> You automatically follow any topics you start or reply to.
> View/Reply Online (#61088): https://lists.yoctoproject.org/g/yocto/message/61088
> Mute This Topic: https://lists.yoctoproject.org/mt/101525879/1997914
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/leave/6692173/1997914/1837948400/xyzzy [raj.khem@gmail.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>


^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: [yocto] CDN for sstate.yoctoproject.org
  2023-09-23 19:52     ` Michael Halstead
  2023-09-23 20:39       ` [yocto] " Khem Raj
@ 2023-09-24 13:37       ` akuster808
  1 sibling, 0 replies; 10+ messages in thread
From: akuster808 @ 2023-09-24 13:37 UTC (permalink / raw)
  To: Michael Halstead, Alexander Kanavin, Yocto-mailing-list
  Cc: Richard Purdie, Ross Burton

Hello Micheal,

Thanks for working on this.

BR,
Armin

On 9/23/23 3:52 PM, Michael Halstead wrote:
> When adding https://cdn.jsdelivr.net/yocto/sstate/all 
> <https://cdn.jsdelivr.net/yocto/sstate/all> please remove any 
> reference to sstate.yoctoproject.org <http://sstate.yoctoproject.org> 
> from SSTATE_MIRRORS to ensure a proper test.
>
> Thank you
>
> On Sat, Sep 23, 2023 at 12:51 PM Michael Halstead 
> <mhalstead@linuxfoundation.org> wrote:
>
>     After some workshopping this morning we have a solution for larger
>     files. Almost every package is now available with CDN
>     acceleration. For files over 64MB the fetcher will need to follow
>     a series of redirects to work properly. Files under 64MB will be
>     served fast from every region. Larger files will be proxyed and
>     cached on a smaller network of servers that can handle them. Once
>     cached they will be stored for up to a month. Because sstate is
>     immutable that means fast access after the first use in a region.
>
>     Set SSTATE_MIRRORS
>     <https://docs.yoctoproject.org/ref-manual/variables.html#term-SSTATE_MIRRORS>
>     to include https://cdn.jsdelivr.net/yocto/sstate/all or
>     http://cdn.jsdelivr.net/yocto/sstate/all, test it out, and report
>     back.
>
>     If we want the system to perform as fast as possible we need to
>     change SSTATE to work with 64MB file segments but that's a
>     discussion to have after this solution is tested.
>
>
>     On Fri, Sep 22, 2023 at 12:03 PM Michael Halstead
>     <mhalstead@linuxfoundation.org> wrote:
>
>         Here are packages and size ranges that are not yet served via
>         CDN. Hopefully testing on the smaller files is possible while
>         we figure out a solution for these.
>
>         assimp 75M 76M
>         binutils 64M 100M
>         boost 68M 148M
>         ceres-solver 167M 182M
>         cmake 157M 553M
>         ffmpeg 68M 69M
>         gcc 127M 681M
>         gcc-cross-aarch64 64M 102M
>         gcc-cross-arm 64M 72M
>         gcc-cross-i686 65M 80M
>         gcc-cross-mips 65M 69M
>         gcc-cross-mips64 64M 69M
>         gcc-cross-powerpc 64M 72M
>         gcc-cross-x86_64 65M 104M
>         gcc-crosssdk-aarch64-pokysdk-linux 65M 75M
>         gcc-crosssdk-i686-oesdk-linux 65M 77M
>         gcc-crosssdk-i686-pokysdk-linux 65M 79M
>         gcc-crosssdk-i686-w64-mingw32 66M 78M
>         gcc-crosssdk-x86_64-oesdk-linux 65M 78M
>         gcc-crosssdk-x86_64-pokysdk-linux 65M 80M
>         gcc-crosssdk-x86_64-w64-mingw32 67M 79M
>         gdb 66M 105M
>         ghostscript 64M 115M
>         git 68M 90M
>         glibc-locale 81M 228M
>         go 67M 67M
>         go-binary-native 82M 82M
>         go-cross-core2-32 98M 100M
>         go-cross-core2-64 93M 100M
>         go-cross-corei7-64 98M 99M
>         go-cross-cortexa15t2hf-neon 99M 99M
>         go-cross-cortexa57 93M 99M
>         go-cross-cortexa8hf-neon 99M 100M
>         go-cross-mips32r2 98M 99M
>         go-cross-mips64 99M 99M
>         go-cross-mips64r2 99M 99M
>         go-native 86M 86M
>         go-runtime 64M 82M
>         grpc 74M 102M
>         hdf5 78M 137M
>         influxdb 76M 98M
>         intel-media-driver 68M 132M
>         jemalloc 164M 164M
>         kea 65M 153M
>         lib32-binutils 64M 70M
>         lib32-boost 77M 122M
>         lib32-cmake 158M 305M
>         lib32-gcc 144M 390M
>         lib32-gcc-cross-i686 65M 79M
>         lib32-gcc-cross-mips 65M 69M
>         lib32-ghostscript 65M 83M
>         lib32-git 65M 65M
>         lib32-glibc-locale 81M 228M
>         lib32-go-cross-x86 98M 99M
>         lib32-kea 64M 88M
>         lib32-linux-firmware 275M 419M
>         lib32-llvm 1126.4M 2662.4M
>         lib32-ltp 77M 305M
>         lib32-mesa 65M 68M
>         lib32-openssl 119M 360M
>         lib32-piglit 106M 106M
>         lib32-qemu 275M 639M
>         lib32-rust 93M 129M
>         lib32-rust-llvm 64M 76M
>         lib32-spirv-tools 68M 107M
>         lib32-valgrind 68M 89M
>         lib32-vulkan-demos 74M 74M
>         lib32-vulkan-validation-layers 65M 101M
>         lib32-webkitgtk 1126.4M 927M
>         lib64-boost 75M 119M
>         lib64-gcc 151M 401M
>         lib64-gcc-cross-mips64 65M 69M
>         lib64-gcc-cross-x86_64 65M 80M
>         lib64-glibc-locale 82M 228M
>         lib64-go-cross-x86_64 98M 99M
>         lib64-go-runtime 68M 81M
>         lib64-ltp 67M 347M
>         lib64-mesa 66M 68M
>         lib64-openssl 276M 411M
>         lib64-rust 97M 123M
>         lib64-rust-llvm 64M 67M
>         lib64-valgrind 65M 84M
>         libyang 93M 93M
>         linux-firmware 275M 419M
>         linux-intel 120M 395M
>         linux-yocto 66M 537M
>         linux-yocto-rt 174M 287M
>         llvm 1126.4M 3481.6M
>         llvm-native 71M 88M
>         ltp 64M 598M
>         mariadb 1331.2M 966M
>         mariadb-native 237M 259M
>         mesa 64M 113M
>         minifi-cpp 155M 214M
>         mozjs-102 183M 255M
>         nativesdk-glibc-locale 81M 226M
>         nativesdk-qemu 245M 644M
>         nativesdk-rust 82M 125M
>         nativesdk-rust-llvm 65M 73M
>         nodejs 1024.0M 723M
>         opencv 185M 237M
>         opengl-es-cts 406M 560M
>         openssl 92M 685M
>         php 67M 68M
>         piglit 106M 106M
>         poco 75M 107M
>         python3-grpcio 65M 88M
>         python3-wxgtk4 70M 100M
>         qemu 1228.8M 929M
>         qemu-system-native 65M 71M
>         renderdoc 67M 82M
>         rocksdb 177M 272M
>         rust 85M 140M
>         rust-llvm 64M 79M
>         rust-llvm-native 287M 418M
>         rust-native 78M 85M
>         spirv-tools 64M 195M
>         systemd 69M 71M
>         tesseract-lang 369M 451M
>         upm 82M 82M
>         valgrind 64M 128M
>         vsomeip 82M 149M
>         vulkan-cts 592M 833M
>         vulkan-demos 73M 138M
>         vulkan-validation-layers 65M 108M
>         webkitgtk 1024.0M 995M
>         webkitgtk3 1126.4M 1638.4M
>         wireshark 65M 85M
>         wxwidgets 70M 88M
>
>         On Fri, Sep 22, 2023 at 10:32 AM Michael Halstead
>         <mhalstead@linuxfoundation.org> wrote:
>
>             Right now we have https://cdn.jsdelivr.net/yocto/sstate
>             set up as a CDN mirroring proxy endpoint. It's fast and
>             completely free to the project. However, it will only work
>             for files smaller than 64MB and will send a redirect to
>             the main server at sstate.yoctoproject.org
>             <http://sstate.yoctoproject.org> for files larger than 64MB.
>
>             The good news is that we have a fast free CDN provided by
>             https://www.jsdelivr.com/ and their many sponsors for
>             99.4% of our files.
>
>             Here is an estimated distribution of sstate files
>             currently available:
>             1 KB-4 KB: 103168
>             4 KB-16 KB: 1218048
>             16 KB-64 KB: 1886976
>             64 KB-256 KB: 1225216
>             256 KB-1 MB: 170752
>             1 MB-4 MB: 92928
>             4 MB-16 MB: 83200
>             16 MB-64 MB: 40448
>             64 MB-256 MB: 17664
>             256 MB-1 GB: 7936
>             1 GB-4 GB: 2560
>
>             I'm still working on a CDN solution for the larger files
>             but we can begin testing
>             https://cdn.jsdelivr.net/yocto/sstate today.
>
>             Here is an example link to a file that is currently
>             popular from each location:
>
>             http://sstate.yoctoproject.org/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>
>             https://cdn.jsdelivr.net/yocto/sstate/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>
>             I'm also attaching a list of the largest files in sstate.
>             Anything we can do to reduce the size of these or to split
>             them into smaller pieces will help with hosting and with
>             the user's download experience.
>
>             -- 
>             Michael Halstead
>             Linux Foundation / Yocto Project
>             Systems Operations Engineer
>
>
>
>         -- 
>         Michael Halstead
>         Linux Foundation / Yocto Project
>         Systems Operations Engineer
>
>
>
>     -- 
>     Michael Halstead
>     Linux Foundation / Yocto Project
>     Systems Operations Engineer
>
>
>
> -- 
> Michael Halstead
> Linux Foundation / Yocto Project
> Systems Operations Engineer
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#61088): https://lists.yoctoproject.org/g/yocto/message/61088
> Mute This Topic: https://lists.yoctoproject.org/mt/101525879/3616698
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/leave/8702355/3616698/227989771/xyzzy [akuster808@gmail.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>



^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: CDN for sstate.yoctoproject.org
  2023-09-22 17:32 CDN for sstate.yoctoproject.org Michael Halstead
  2023-09-22 19:03 ` Michael Halstead
@ 2023-10-17 15:33 ` Alexander Kanavin
  2023-10-18  6:45   ` Richard Purdie
  1 sibling, 1 reply; 10+ messages in thread
From: Alexander Kanavin @ 2023-10-17 15:33 UTC (permalink / raw)
  To: Michael Halstead; +Cc: Yocto-mailing-list, Richard Purdie

Thanks for working on this! I finally got to playing with CDN mirror a
bit, and it seems to basically work ok, so next I'm going to write AB
tests that check that it remains useful. Specifically:

1. What should the test be?

I tried 'bitbake -S printdiff core-image-sato' on a blank build
directory, and the result against current master is:

===========
Checking sstate mirror object availability: 100%
|##################################################################################################################################################|
Time: 0:05:35
The differences between the current build and any cached tasks start
at the following tasks:
/srv/work/alex/poky/meta/recipes-sato/images/core-image-sato.bb:do_deploy_source_date_epoch
/srv/work/alex/poky/meta/recipes-core/base-files/base-files_3.0.14.bb:do_install
===========

I think this is pretty good! The two missing objects depend on the
current date, and so should go to the exception list in the test, and
otherwise there is a 100% match rate. The bitbake targets could be
'world core-image-sato-sdk', and target machines could be qemux86_64
and qemuarm64.

Just to be sure that mismatches elsewhere will be reported as CDN
misses, adding my shadow 4.14 update and re-running the command shows:
============
The differences between the current build and any cached tasks start
at the following tasks:
/srv/work/alex/poky/meta/recipes-gnome/hicolor-icon-theme/hicolor-icon-theme_0.17.bb:do_package
/srv/work/alex/poky/meta/recipes-sato/pulseaudio-sato/pulseaudio-client-conf-sato_1.bb:do_package
/srv/work/alex/poky/meta/recipes-core/initscripts/initscripts_1.0.bb:do_package
/srv/work/alex/poky/meta/recipes-core/update-rc.d/update-rc.d_0.8.bb:do_package
/srv/work/alex/poky/meta/recipes-multimedia/alsa/alsa-ucm-conf_1.2.10.bb:do_package
/srv/work/alex/poky/meta/recipes-kernel/wireless-regdb/wireless-regdb_2023.09.01.bb:do_package
/srv/work/alex/poky/meta/recipes-sato/packagegroups/packagegroup-core-x11-sato.bb:do_package
/srv/work/alex/poky/meta/recipes-kernel/linux-libc-headers/linux-libc-headers_6.5.bb:do_package
/srv/work/alex/poky/meta/recipes-core/packagegroups/packagegroup-core-ssh-dropbear.bb:do_package
/srv/work/alex/poky/meta/recipes-graphics/packagegroups/packagegroup-core-x11.bb:do_package
/srv/work/alex/poky/meta/recipes-sato/shutdown-desktop/shutdown-desktop.bb:do_package
virtual:native:/srv/work/alex/poky/meta/recipes-support/libbsd/libbsd_0.11.7.bb:do_prepare_recipe_sysroot
/srv/work/alex/poky/meta/recipes-support/ca-certificates/ca-certificates_20211016.bb:do_package
/srv/work/alex/poky/meta/recipes-core/sysvinit/sysvinit-inittab_2.88dsf.bb:do_package
virtual:native:/srv/work/alex/poky/meta/recipes-extended/shadow/shadow_4.14.0.bb:do_recipe_qa
... (a few more missing do_package objects)
===========

2. When to run the test, and against which commit in poky?

RP suggested that the test could run in an antiphase with the nightly
a-quick (i.e. 12 hours after). We can do that for a start, but I'm
(perhaps prematurely) worrying that this will be unstable: either
because the objects from the nightly haven't yet propagated to CDN, or
because master has meanwhile (e.g. in the 12 hours that have passed)
gained new commits without corresponding cache objects. Are those real
concerns?

Thoughts?

Alex


On Fri, 22 Sept 2023 at 19:32, Michael Halstead
<mhalstead@linuxfoundation.org> wrote:
>
> Right now we have https://cdn.jsdelivr.net/yocto/sstate set up as a CDN mirroring proxy endpoint. It's fast and completely free to the project. However, it will only work for files smaller than 64MB and will send a redirect to the main server at sstate.yoctoproject.org for files larger than 64MB.
>
> The good news is that we have a fast free CDN provided by https://www.jsdelivr.com/ and their many sponsors for 99.4% of our files.
>
> Here is an estimated distribution of sstate files currently available:
> 1 KB-4 KB: 103168
> 4 KB-16 KB: 1218048
> 16 KB-64 KB: 1886976
> 64 KB-256 KB: 1225216
> 256 KB-1 MB: 170752
> 1 MB-4 MB: 92928
> 4 MB-16 MB: 83200
> 16 MB-64 MB: 40448
> 64 MB-256 MB: 17664
> 256 MB-1 GB: 7936
> 1 GB-4 GB: 2560
>
> I'm still working on a CDN solution for the larger files but we can begin testing https://cdn.jsdelivr.net/yocto/sstate today.
>
> Here is an example link to a file that is currently popular from each location:
>
> http://sstate.yoctoproject.org/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>
> https://cdn.jsdelivr.net/yocto/sstate/all/universal/c6/81/sstate:re2c-native:x86_64-linux:3.1:r0:x86_64:11:c681f19e2786732c7920860d0b27cdcf3a79c9441d9bdaa82319a12e96e6246e_deploy_source_date_epoch.tar.zst
>
> I'm also attaching a list of the largest files in sstate. Anything we can do to reduce the size of these or to split them into smaller pieces will help with hosting and with the user's download experience.
>
> --
> Michael Halstead
> Linux Foundation / Yocto Project
> Systems Operations Engineer


^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: CDN for sstate.yoctoproject.org
  2023-10-17 15:33 ` Alexander Kanavin
@ 2023-10-18  6:45   ` Richard Purdie
  2023-10-18 12:02     ` Alexander Kanavin
  0 siblings, 1 reply; 10+ messages in thread
From: Richard Purdie @ 2023-10-18  6:45 UTC (permalink / raw)
  To: Alexander Kanavin, Michael Halstead; +Cc: Yocto-mailing-list

On Tue, 2023-10-17 at 17:33 +0200, Alexander Kanavin wrote:
> Thanks for working on this! I finally got to playing with CDN mirror a
> bit, and it seems to basically work ok, so next I'm going to write AB
> tests that check that it remains useful. Specifically:
> 
> 1. What should the test be?
> 
> I tried 'bitbake -S printdiff core-image-sato' on a blank build
> directory, and the result against current master is:
> 
> ===========
> Checking sstate mirror object availability: 100%
> > ##################################################################################################################################################|
> Time: 0:05:35
> The differences between the current build and any cached tasks start
> at the following tasks:
> /srv/work/alex/poky/meta/recipes-sato/images/core-image-sato.bb:do_deploy_source_date_epoch
> /srv/work/alex/poky/meta/recipes-core/base-files/base-files_3.0.14.bb:do_install
> ===========
> 
> I think this is pretty good! The two missing objects depend on the
> current date, and so should go to the exception list in the test, and
> otherwise there is a 100% match rate. The bitbake targets could be
> 'world core-image-sato-sdk', and target machines could be qemux86_64
> and qemuarm64.

That match does look good. As you say, the revision of the metadata
will change base-files so that is expected.

I'm torn on the targets to test as sato-sdk is a large image and world
is a lot of work. I'd be tempted to test sato, weston and full-cmdline?
World is a good test I guess and if from sstate, shouldn't have that
much of an issue. It does also prove things are working.

> Just to be sure that mismatches elsewhere will be reported as CDN
> misses, adding my shadow 4.14 update and re-running the command shows:
> ============
> The differences between the current build and any cached tasks start
> at the following tasks:
> /srv/work/alex/poky/meta/recipes-gnome/hicolor-icon-theme/hicolor-icon-theme_0.17.bb:do_package
> /srv/work/alex/poky/meta/recipes-sato/pulseaudio-sato/pulseaudio-client-conf-sato_1.bb:do_package
> /srv/work/alex/poky/meta/recipes-core/initscripts/initscripts_1.0.bb:do_package
> /srv/work/alex/poky/meta/recipes-core/update-rc.d/update-rc.d_0.8.bb:do_package
> /srv/work/alex/poky/meta/recipes-multimedia/alsa/alsa-ucm-conf_1.2.10.bb:do_package
> /srv/work/alex/poky/meta/recipes-kernel/wireless-regdb/wireless-regdb_2023.09.01.bb:do_package
> /srv/work/alex/poky/meta/recipes-sato/packagegroups/packagegroup-core-x11-sato.bb:do_package
> /srv/work/alex/poky/meta/recipes-kernel/linux-libc-headers/linux-libc-headers_6.5.bb:do_package
> /srv/work/alex/poky/meta/recipes-core/packagegroups/packagegroup-core-ssh-dropbear.bb:do_package
> /srv/work/alex/poky/meta/recipes-graphics/packagegroups/packagegroup-core-x11.bb:do_package
> /srv/work/alex/poky/meta/recipes-sato/shutdown-desktop/shutdown-desktop.bb:do_package
> virtual:native:/srv/work/alex/poky/meta/recipes-support/libbsd/libbsd_0.11.7.bb:do_prepare_recipe_sysroot
> /srv/work/alex/poky/meta/recipes-support/ca-certificates/ca-certificates_20211016.bb:do_package
> /srv/work/alex/poky/meta/recipes-core/sysvinit/sysvinit-inittab_2.88dsf.bb:do_package
> virtual:native:/srv/work/alex/poky/meta/recipes-extended/shadow/shadow_4.14.0.bb:do_recipe_qa
> ... (a few more missing do_package objects)
> ===========
> 
> 2. When to run the test, and against which commit in poky?
> 
> RP suggested that the test could run in an antiphase with the nightly
> a-quick (i.e. 12 hours after). We can do that for a start, but I'm
> (perhaps prematurely) worrying that this will be unstable: either
> because the objects from the nightly haven't yet propagated to CDN, or
> because master has meanwhile (e.g. in the 12 hours that have passed)
> gained new commits without corresponding cache objects. Are those real
> concerns?
> 
> Thoughts?

You're right, we need to run the test against a commit we know has been
built on the autobuilder. If we run with a newer commit we could easily
see mismatch since it won't have been built yet.

I'm less worried about CDN propagation, that should happen quickly and
if something isn't present, it might just be slow to obtain/lookup as
it ripples through the system.

Either we start logging what we've built so we get the last known
revisions, or we run the test as part of a-quick/a-full at the end of
the build? I don't really want to extend the build but I'm not sure we
may have much choice.

Cheers,

Richard



^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: CDN for sstate.yoctoproject.org
  2023-10-18  6:45   ` Richard Purdie
@ 2023-10-18 12:02     ` Alexander Kanavin
  2023-10-18 17:33       ` Richard Purdie
  0 siblings, 1 reply; 10+ messages in thread
From: Alexander Kanavin @ 2023-10-18 12:02 UTC (permalink / raw)
  To: Richard Purdie; +Cc: Michael Halstead, Yocto-mailing-list

On Wed, 18 Oct 2023 at 08:45, Richard Purdie
<richard.purdie@linuxfoundation.org> wrote:
> I'm torn on the targets to test as sato-sdk is a large image and world
> is a lot of work. I'd be tempted to test sato, weston and full-cmdline?
> World is a good test I guess and if from sstate, shouldn't have that
> much of an issue. It does also prove things are working.

I ran '-S printdiff world' on a blank build directory. First,
scalability isn't great:

Initialising tasks: 100%
|##########################################################################################################################################################################|
Time: 0:24:19
Checking sstate mirror object availability: 100%
|##################################################################################################################################################|
Time: 0:12:14

So it's taking 36 minutes just preparing to fetch the objects, and 2/3
of that time goes into communicating with hash equivalence server
(e.g. BB_HASHSERVE_UPSTREAM = "hashserv.yocto.io:8687").

Second, there are significant misses. I don't have a clear theory
where they come from, just want to list them:

The differences between the current build and any cached tasks start
at the following tasks:
/srv/work/alex/poky/meta/recipes-core/meta/meta-ide-support.bb:do_populate_ide_support
/srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-synaptics_1.9.2.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-devtools/bootchart2/bootchart2_0.14.9.bb:do_create_runtime_spdx
/srv/work/alex/poky/meta/recipes-graphics/igt-gpu-tools/igt-gpu-tools_git.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-devtools/python/python3-dbusmock_0.29.1.bb:do_create_runtime_spdx
/srv/work/alex/poky/meta/recipes-devtools/dpkg/dpkg_1.22.0.bb:do_configure
/srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-vmmouse_13.2.0.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-graphics/glew/glew_2.2.0.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-evdev_2.10.6.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-graphics/libva/libva_2.19.0.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-sato/webkit/libwpe_1.14.1.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-meta-base.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-python_1.22.6.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-extended/cups/cups_2.4.6.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-gnome/libdazzle/libdazzle_3.44.0.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-graphics/igt-gpu-tools/igt-gpu-tools_git.bb:do_package
/srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gst-devtools_1.22.6.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-core/packagegroups/packagegroup-core-sdk.bb:do_package
/srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-mouse_1.9.5.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-graphics/waffle/waffle_1.7.2.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-multimedia/alsa/alsa-tools_1.2.5.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-rtsp-server_1.22.6.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-devtools/apt/apt_2.6.1.bb:do_install
/srv/work/alex/poky/meta/recipes-gnome/gtk+/gtk4_4.12.3.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-devtools/devel-config/distcc-config.bb:do_create_runtime_spdx
/srv/work/alex/poky/meta/recipes-gnome/libhandy/libhandy_1.8.2.bb:do_collect_spdx_deps
/srv/work/alex/poky/meta/recipes-support/vim/vim_9.0.bb:do_collect_spdx_deps

So I think we should start with specific images first - minimal,
full-cmdline, weston, sato and sato-sdk are all much faster to check.

On qemux86_64 none of them show misses, but on qemuarm64 there are
problems with sato, sato-sdk and weston, i.e. sato-sdk shows:

The differences between the current build and any cached tasks start
at the following tasks:
/srv/work/alex/poky/meta/recipes-gnome/gdk-pixbuf/gdk-pixbuf_2.42.10.bb:do_package_write_rpm
/srv/work/alex/poky/meta/recipes-connectivity/connman/connman-gnome_0.7.bb:do_package_write_rpm
/srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gst-examples_1.18.6.bb:do_package_write_rpm
/srv/work/alex/poky/meta/recipes-sato/images/core-image-sato-sdk.bb:do_deploy_source_date_epoch
/srv/work/alex/poky/meta/recipes-graphics/xorg-font/font-util_1.4.1.bb:do_package_write_rpm
/srv/work/alex/poky/meta/recipes-core/packagegroups/packagegroup-core-sdk.bb:do_package
/srv/work/alex/poky/meta/recipes-gnome/librsvg/librsvg_2.56.3.bb:do_package_write_rpm
/srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-plugins-bad_1.22.6.bb:do_package_write_rpm


I'm not sure if that's because cache for the current master needs to
be populated properly first, or if there's a deeper issue.

> Either we start logging what we've built so we get the last known
> revisions, or we run the test as part of a-quick/a-full at the end of
> the build? I don't really want to extend the build but I'm not sure we
> may have much choice.

I think it can be a selftest and bundled into
trigger-build-posttrigger which already runs
'buildoptions.SourceMirroring.test_yocto_source_mirror':

https://git.yoctoproject.org/yocto-autobuilder-helper/tree/config.json#n465

The various yocto mirrors tests could be tagged in a way similar to
machine/toolchain selftests, so that they're excluded from regular
oe-selftest, but run specifically here.

Alex


^ permalink raw reply	[flat|nested] 10+ messages in thread
* Re: CDN for sstate.yoctoproject.org
  2023-10-18 12:02     ` Alexander Kanavin
@ 2023-10-18 17:33       ` Richard Purdie
  0 siblings, 0 replies; 10+ messages in thread
From: Richard Purdie @ 2023-10-18 17:33 UTC (permalink / raw)
  To: Alexander Kanavin; +Cc: Michael Halstead, Yocto-mailing-list

On Wed, 2023-10-18 at 14:02 +0200, Alexander Kanavin wrote:
> On Wed, 18 Oct 2023 at 08:45, Richard Purdie
> <richard.purdie@linuxfoundation.org> wrote:
> > I'm torn on the targets to test as sato-sdk is a large image and world
> > is a lot of work. I'd be tempted to test sato, weston and full-cmdline?
> > World is a good test I guess and if from sstate, shouldn't have that
> > much of an issue. It does also prove things are working.
> 
> I ran '-S printdiff world' on a blank build directory. First,
> scalability isn't great:
> 
> Initialising tasks: 100%
> > ##########################################################################################################################################################################|
> Time: 0:24:19
> Checking sstate mirror object availability: 100%
> > ##################################################################################################################################################|
> Time: 0:12:14
> 
> So it's taking 36 minutes just preparing to fetch the objects, and 2/3
> of that time goes into communicating with hash equivalence server
> (e.g. BB_HASHSERVE_UPSTREAM = "hashserv.yocto.io:8687").

FWIW the second time an artefact is pulled from the CDN, it will be
much faster. I don't know how much that is a factor here.

We know hashequiv is slow, particularly from europe. We've ideas on
that we're looking into but for now it is what it is. Part of this work
was to find out what the issues are so we write that one up.

> Second, there are significant misses. I don't have a clear theory
> where they come from, just want to list them:
> 
> The differences between the current build and any cached tasks start
> at the following tasks:
> /srv/work/alex/poky/meta/recipes-core/meta/meta-ide-support.bb:do_populate_ide_support
> /srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-synaptics_1.9.2.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-devtools/bootchart2/bootchart2_0.14.9.bb:do_create_runtime_spdx
> /srv/work/alex/poky/meta/recipes-graphics/igt-gpu-tools/igt-gpu-tools_git.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-devtools/python/python3-dbusmock_0.29.1.bb:do_create_runtime_spdx
> /srv/work/alex/poky/meta/recipes-devtools/dpkg/dpkg_1.22.0.bb:do_configure
> /srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-vmmouse_13.2.0.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-graphics/glew/glew_2.2.0.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-evdev_2.10.6.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-graphics/libva/libva_2.19.0.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-sato/webkit/libwpe_1.14.1.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-meta-base.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-python_1.22.6.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-extended/cups/cups_2.4.6.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-gnome/libdazzle/libdazzle_3.44.0.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-graphics/igt-gpu-tools/igt-gpu-tools_git.bb:do_package
> /srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gst-devtools_1.22.6.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-core/packagegroups/packagegroup-core-sdk.bb:do_package
> /srv/work/alex/poky/meta/recipes-graphics/xorg-driver/xf86-input-mouse_1.9.5.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-graphics/waffle/waffle_1.7.2.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-multimedia/alsa/alsa-tools_1.2.5.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-rtsp-server_1.22.6.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-devtools/apt/apt_2.6.1.bb:do_install
> /srv/work/alex/poky/meta/recipes-gnome/gtk+/gtk4_4.12.3.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-devtools/devel-config/distcc-config.bb:do_create_runtime_spdx
> /srv/work/alex/poky/meta/recipes-gnome/libhandy/libhandy_1.8.2.bb:do_collect_spdx_deps
> /srv/work/alex/poky/meta/recipes-support/vim/vim_9.0.bb:do_collect_spdx_deps

We'll have to dig into this.

> So I think we should start with specific images first - minimal,
> full-cmdline, weston, sato and sato-sdk are all much faster to check.

Agreed, lets start with simpler images, full-cmdline, minimal, sato and
weston. We can increase coverage as we move forward (world, sato-sdk).

> On qemux86_64 none of them show misses, but on qemuarm64 there are
> problems with sato, sato-sdk and weston, i.e. sato-sdk shows:
> 
> The differences between the current build and any cached tasks start
> at the following tasks:
> /srv/work/alex/poky/meta/recipes-gnome/gdk-pixbuf/gdk-pixbuf_2.42.10.bb:do_package_write_rpm
> /srv/work/alex/poky/meta/recipes-connectivity/connman/connman-gnome_0.7.bb:do_package_write_rpm
> /srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gst-examples_1.18.6.bb:do_package_write_rpm
> /srv/work/alex/poky/meta/recipes-sato/images/core-image-sato-sdk.bb:do_deploy_source_date_epoch
> /srv/work/alex/poky/meta/recipes-graphics/xorg-font/font-util_1.4.1.bb:do_package_write_rpm
> /srv/work/alex/poky/meta/recipes-core/packagegroups/packagegroup-core-sdk.bb:do_package
> /srv/work/alex/poky/meta/recipes-gnome/librsvg/librsvg_2.56.3.bb:do_package_write_rpm
> /srv/work/alex/poky/meta/recipes-multimedia/gstreamer/gstreamer1.0-plugins-bad_1.22.6.bb:do_package_write_rpm
> 
> 
> I'm not sure if that's because cache for the current master needs to
> be populated properly first, or if there's a deeper issue.

We made a release build with current master so the cache should be
good. We're going to have to look into it.

> > Either we start logging what we've built so we get the last known
> > revisions, or we run the test as part of a-quick/a-full at the end of
> > the build? I don't really want to extend the build but I'm not sure we
> > may have much choice.
> 
> I think it can be a selftest and bundled into
> trigger-build-posttrigger which already runs
> 'buildoptions.SourceMirroring.test_yocto_source_mirror':
> 
> https://git.yoctoproject.org/yocto-autobuilder-helper/tree/config.json#n465
> 
> The various yocto mirrors tests could be tagged in a way similar to
> machine/toolchain selftests, so that they're excluded from regular
> oe-selftest, but run specifically here.

That sounds reasonable. oe-selftest has the concept of "tags" so we
should create some for these tests and use those as the hardcoded lists
are a pain. We already do that for the toolchain-user, toolchain-system
and machine ones iirc.

Cheers,

Richard







^ permalink raw reply	[flat|nested] 10+ messages in thread
end of thread, other threads:[~2023-10-18 17:33 UTC | newest]

Thread overview: 10+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2023-09-22 17:32 CDN for sstate.yoctoproject.org Michael Halstead
2023-09-22 19:03 ` Michael Halstead
2023-09-23 19:51   ` Michael Halstead
2023-09-23 19:52     ` Michael Halstead
2023-09-23 20:39       ` [yocto] " Khem Raj
2023-09-24 13:37       ` akuster808
2023-10-17 15:33 ` Alexander Kanavin
2023-10-18  6:45   ` Richard Purdie
2023-10-18 12:02     ` Alexander Kanavin
2023-10-18 17:33       ` Richard Purdie

