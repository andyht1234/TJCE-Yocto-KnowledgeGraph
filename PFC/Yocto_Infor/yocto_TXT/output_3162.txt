* [layerindex-web][PATCH] models.py: extend max_length of name in YPCompatibleVersions to 100
@ 2021-07-13  2:44 Changqing Li
  0 siblings, 0 replies; only message in thread
From: Changqing Li @ 2021-07-13  2:44 UTC (permalink / raw)
  To: yocto

From: Changqing Li <changqing.li@windriver.com>

Now, YPCompatibleVersions's name is only designed for using version like
2.0 3.0, the max_length is 25. but we mostly use Codename for layer
compatibility, eg: LAYERSERIES_COMPAT_dpdk = "dunfell gatesgarth
hardknott", in this case, it's not enough to save the compatible
version. so extend it to 100.

Signed-off-by: Changqing Li <changqing.li@windriver.com>
---
 .../migrations/0045_yp_compatible_extend.py   | 24 +++++++++++++++++++
 layerindex/models.py                          |  2 +-
 2 files changed, 25 insertions(+), 1 deletion(-)
 create mode 100644 layerindex/migrations/0045_yp_compatible_extend.py

diff --git a/layerindex/migrations/0045_yp_compatible_extend.py b/layerindex/migrations/0045_yp_compatible_extend.py
new file mode 100644
index 0000000..3544b4b
--- /dev/null
+++ b/layerindex/migrations/0045_yp_compatible_extend.py
@@ -0,0 +1,24 @@
+# Generated by Django 2.2 on 2021-07-13 02:43
+
+from django.db import migrations, models
+import django.db.models.deletion
+
+
+class Migration(migrations.Migration):
+
+    dependencies = [
+        ('layerindex', '0044_extendedprovides'),
+    ]
+
+    operations = [
+        migrations.AlterField(
+            model_name='classicrecipe',
+            name='cover_layerbranch',
+            field=models.ForeignKey(blank=True, limit_choices_to={'branch__name': 'master'}, null=True, on_delete=django.db.models.deletion.SET_NULL, to='layerindex.LayerBranch', verbose_name='Covering layer'),
+        ),
+        migrations.AlterField(
+            model_name='ypcompatibleversion',
+            name='name',
+            field=models.CharField(help_text='Name of this Yocto Project compatible version (e.g. "2.0")', max_length=100, unique=True, verbose_name='Yocto Project Version'),
+        ),
+    ]
diff --git a/layerindex/models.py b/layerindex/models.py
index 329cc33..2317740 100644
--- a/layerindex/models.py
+++ b/layerindex/models.py
@@ -217,7 +217,7 @@ class LayerRecipeExtraURL(models.Model):
 
 
 class YPCompatibleVersion(models.Model):
-    name = models.CharField('Yocto Project Version', max_length=25, unique=True, help_text='Name of this Yocto Project compatible version (e.g. "2.0")')
+    name = models.CharField('Yocto Project Version', max_length=100, unique=True, help_text='Name of this Yocto Project compatible version (e.g. "2.0")')
     description = models.TextField(blank=True)
     image_url = models.CharField('Image URL', max_length=300, blank=True)
     link_url = models.CharField('Link URL', max_length=100, blank=True)
-- 
2.17.1


^ permalink raw reply related	[flat|nested] only message in thread
only message in thread, other threads:[~2021-07-13  2:45 UTC | newest]

Thread overview: (only message) (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2021-07-13  2:44 [layerindex-web][PATCH] models.py: extend max_length of name in YPCompatibleVersions to 100 Changqing Li

