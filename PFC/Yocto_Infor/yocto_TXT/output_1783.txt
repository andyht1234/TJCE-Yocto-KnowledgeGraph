* Kirkstone 4.0.1 - Exception: NameError: name 'json_summary_name' is not defined
@ 2022-05-25 19:34 Darcy Watkins
  2022-05-25 19:58 ` [yocto] " Steve Sakoman
  0 siblings, 1 reply; 3+ messages in thread
From: Darcy Watkins @ 2022-05-25 19:34 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 3881 bytes --]

Hi,



After sync-up with kirkstone 4.0.1, I get the following error…



Image CVE report stored in: /home/dwatkins/workspace/mgos/voyager1/build/tmp/deploy/images/mg90/omg-supplement-mfwimages-mg90-20220525182226.rootfs.cve

ERROR: omg-supplement-mfwimages-1.0-r0 do_rootfs: Error executing a python function in exec_func_python() autogenerated:



The stack trace of python calls that resulted in this exception/failure was:

File: 'exec_func_python() autogenerated', lineno: 2, function: <module>

     0001:

 *** 0002:cve_check_write_rootfs_manifest(d)

     0003:

File: '/home/dwatkins/workspace/mgos/voyager1/upstream/yocto/poky/meta/classes/cve-check.bbclass', lineno: 213, function: cve_check_write_rootfs_manifest

     0209:

     0210:        link_path = os.path.join(deploy_dir, "%s.json" % link_name)

     0211:        manifest_path = d.getVar("CVE_CHECK_MANIFEST_JSON")

     0212:        bb.note("Generating JSON CVE manifest")

 *** 0213:        generate_json_report(json_summary_name, json_summary_link_name)

     0214:        bb.plain("Image CVE JSON report stored in: %s" % link_path)

     0215:}

     0216:

     0217:ROOTFS_POSTPROCESS_COMMAND:prepend = "${@'cve_check_write_rootfs_manifest; ' if d.getVar('CVE_CHECK_CREATE_MANIFEST') == '1' else ''}"

Exception: NameError: name 'json_summary_name' is not defined



ERROR: Logfile of failure stored in: /home/dwatkins/workspace/mgos/voyager1/build/tmp/work/mg90-poky-linux-gnueabi/omg-supplement-mfwimages/1.0-r0/temp/log.do_rootfs.16510

ERROR: Task (/home/dwatkins/workspace/mgos/voyager1/meta-mgos-core/recipes-images/images/omg-supplement-mfwimages.bb:do_rootfs) failed with exit code '1'

NOTE: Tasks Summary: Attempted 8400 tasks of which 7718 didn't need to be rerun and 1 failed.

NOTE: Generating JSON CVE summary

CVE report summary created at: /home/dwatkins/workspace/mgos/voyager1/build/tmp/log/cve/cve-summary.json


645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 130)         json_summary_link_name = os.path.join(cvelogpath, d.getVar("CVE_CHECK_SUMMARY_FILE_NAME_JSON"))
645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 131)         json_summary_name = os.path.join(cvelogpath, "%s-%s.json" % (cve_summary_name, timestamp))
645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 132)         generate_json_report(json_summary_name, json_summary_link_name)
645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 133)         bb.plain("CVE report summary created at: %s" % json_summary_link_name)


645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 210)         link_path = os.path.join(deploy_dir, "%s.json" % link_name)
645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 211)         manifest_path = d.getVar("CVE_CHECK_MANIFEST_JSON")
777f1d42b62 (Marta Rybczynska       2022-03-29 14:54:31 +0200 212)         bb.note("Generating JSON CVE manifest")
645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 213)         generate_json_report(json_summary_name, json_summary_link_name)
645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 214)         bb.plain("Image CVE JSON report stored in: %s" % link_path)


I am not sure whether we need to locally setup the “json_summary_name” in  “python cve_check_write_rootfs_manifest ()” like was done inside “python cve_save_summary_handler ()” or if something different was supposed to be passed to “generate_json_report()” instead.


Regards,

Darcy

Darcy Watkins ::  Senior Staff Engineer, Firmware

SIERRA WIRELESS
Direct  +1 604 233 7989   ::  Fax  +1 604 231 1109  ::  Main  +1 604 231 1100
13811 Wireless Way  :: Richmond, BC Canada V6V 3A4
[M4]
dwatkins@sierrawireless.com<mailto:dwatkins@sierrawireless.com> :: www.sierrawireless.com<http://www.sierrawireless.com/>

[-- Attachment #2: Type: text/html, Size: 12064 bytes --]

^ permalink raw reply	[flat|nested] 3+ messages in thread
* Re: [yocto] Kirkstone 4.0.1 - Exception: NameError: name 'json_summary_name' is not defined
  2022-05-25 19:34 Kirkstone 4.0.1 - Exception: NameError: name 'json_summary_name' is not defined Darcy Watkins
@ 2022-05-25 19:58 ` Steve Sakoman
  2022-05-25 20:00   ` Darcy Watkins
  0 siblings, 1 reply; 3+ messages in thread
From: Steve Sakoman @ 2022-05-25 19:58 UTC (permalink / raw)
  To: Darcy Watkins; +Cc: yocto

On Wed, May 25, 2022 at 9:34 AM Darcy Watkins
<dwatkins@sierrawireless.com> wrote:
>
> Hi,
>
>
>
> After sync-up with kirkstone 4.0.1, I get the following error…
>
>
>
> Image CVE report stored in: /home/dwatkins/workspace/mgos/voyager1/build/tmp/deploy/images/mg90/omg-supplement-mfwimages-mg90-20220525182226.rootfs.cve
>
> ERROR: omg-supplement-mfwimages-1.0-r0 do_rootfs: Error executing a python function in exec_func_python() autogenerated:

There is a fix for this issue on list for review, it should be
available in the kirkstone branch later today.

Steve

> The stack trace of python calls that resulted in this exception/failure was:
>
> File: 'exec_func_python() autogenerated', lineno: 2, function: <module>
>
>      0001:
>
>  *** 0002:cve_check_write_rootfs_manifest(d)
>
>      0003:
>
> File: '/home/dwatkins/workspace/mgos/voyager1/upstream/yocto/poky/meta/classes/cve-check.bbclass', lineno: 213, function: cve_check_write_rootfs_manifest
>
>      0209:
>
>      0210:        link_path = os.path.join(deploy_dir, "%s.json" % link_name)
>
>      0211:        manifest_path = d.getVar("CVE_CHECK_MANIFEST_JSON")
>
>      0212:        bb.note("Generating JSON CVE manifest")
>
>  *** 0213:        generate_json_report(json_summary_name, json_summary_link_name)
>
>      0214:        bb.plain("Image CVE JSON report stored in: %s" % link_path)
>
>      0215:}
>
>      0216:
>
>      0217:ROOTFS_POSTPROCESS_COMMAND:prepend = "${@'cve_check_write_rootfs_manifest; ' if d.getVar('CVE_CHECK_CREATE_MANIFEST') == '1' else ''}"
>
> Exception: NameError: name 'json_summary_name' is not defined
>
>
>
> ERROR: Logfile of failure stored in: /home/dwatkins/workspace/mgos/voyager1/build/tmp/work/mg90-poky-linux-gnueabi/omg-supplement-mfwimages/1.0-r0/temp/log.do_rootfs.16510
>
> ERROR: Task (/home/dwatkins/workspace/mgos/voyager1/meta-mgos-core/recipes-images/images/omg-supplement-mfwimages.bb:do_rootfs) failed with exit code '1'
>
> NOTE: Tasks Summary: Attempted 8400 tasks of which 7718 didn't need to be rerun and 1 failed.
>
> NOTE: Generating JSON CVE summary
>
> CVE report summary created at: /home/dwatkins/workspace/mgos/voyager1/build/tmp/log/cve/cve-summary.json
>
>
>
>
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 130)         json_summary_link_name = os.path.join(cvelogpath, d.getVar("CVE_CHECK_SUMMARY_FILE_NAME_JSON"))
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 131)         json_summary_name = os.path.join(cvelogpath, "%s-%s.json" % (cve_summary_name, timestamp))
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 132)         generate_json_report(json_summary_name, json_summary_link_name)
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 133)         bb.plain("CVE report summary created at: %s" % json_summary_link_name)
>
>
>
>
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 210)         link_path = os.path.join(deploy_dir, "%s.json" % link_name)
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 211)         manifest_path = d.getVar("CVE_CHECK_MANIFEST_JSON")
>
> 777f1d42b62 (Marta Rybczynska       2022-03-29 14:54:31 +0200 212)         bb.note("Generating JSON CVE manifest")
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 213)         generate_json_report(json_summary_name, json_summary_link_name)
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 214)         bb.plain("Image CVE JSON report stored in: %s" % link_path)
>
>
>
>
>
> I am not sure whether we need to locally setup the “json_summary_name” in  “python cve_check_write_rootfs_manifest ()” like was done inside “python cve_save_summary_handler ()” or if something different was supposed to be passed to “generate_json_report()” instead.
>
>
>
>
>
> Regards,
>
>
>
> Darcy
>
>
>
> Darcy Watkins ::  Senior Staff Engineer, Firmware
>
>
>
> SIERRA WIRELESS
>
> Direct  +1 604 233 7989   ::  Fax  +1 604 231 1109  ::  Main  +1 604 231 1100
>
> 13811 Wireless Way  :: Richmond, BC Canada V6V 3A4
>
> [M4]
>
> dwatkins@sierrawireless.com :: www.sierrawireless.com
>
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#57189): https://lists.yoctoproject.org/g/yocto/message/57189
> Mute This Topic: https://lists.yoctoproject.org/mt/91340574/3620601
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [steve@sakoman.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>


^ permalink raw reply	[flat|nested] 3+ messages in thread
* Re: [yocto] Kirkstone 4.0.1 - Exception: NameError: name 'json_summary_name' is not defined
  2022-05-25 19:58 ` [yocto] " Steve Sakoman
@ 2022-05-25 20:00   ` Darcy Watkins
  0 siblings, 0 replies; 3+ messages in thread
From: Darcy Watkins @ 2022-05-25 20:00 UTC (permalink / raw)
  To: Steve Sakoman; +Cc: yocto

[-- Attachment #1: Type: text/plain, Size: 6928 bytes --]

Hi Steve,

Awesome!  Thanks, I will watch for it.



Regards,

Darcy

Darcy Watkins ::  Senior Staff Engineer, Firmware

SIERRA WIRELESS
Direct  +1 604 233 7989   ::  Fax  +1 604 231 1109  ::  Main  +1 604 231 1100
13811 Wireless Way  :: Richmond, BC Canada V6V 3A4
[M4]
dwatkins@sierrawireless.com<mailto:dwatkins@sierrawireless.com> :: www.sierrawireless.com<http://www.sierrawireless.com/>

From: Steve Sakoman <steve@sakoman.com>
Date: Wednesday, May 25, 2022 at 12:58 PM
To: Darcy Watkins <dwatkins@sierrawireless.com>
Cc: yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] Kirkstone 4.0.1 - Exception: NameError: name 'json_summary_name' is not defined
On Wed, May 25, 2022 at 9:34 AM Darcy Watkins
<dwatkins@sierrawireless.com> wrote:
>
> Hi,
>
>
>
> After sync-up with kirkstone 4.0.1, I get the following error…
>
>
>
> Image CVE report stored in: /home/dwatkins/workspace/mgos/voyager1/build/tmp/deploy/images/mg90/omg-supplement-mfwimages-mg90-20220525182226.rootfs.cve
>
> ERROR: omg-supplement-mfwimages-1.0-r0 do_rootfs: Error executing a python function in exec_func_python() autogenerated:

There is a fix for this issue on list for review, it should be
available in the kirkstone branch later today.

Steve

> The stack trace of python calls that resulted in this exception/failure was:
>
> File: 'exec_func_python() autogenerated', lineno: 2, function: <module>
>
>      0001:
>
>  *** 0002:cve_check_write_rootfs_manifest(d)
>
>      0003:
>
> File: '/home/dwatkins/workspace/mgos/voyager1/upstream/yocto/poky/meta/classes/cve-check.bbclass', lineno: 213, function: cve_check_write_rootfs_manifest
>
>      0209:
>
>      0210:        link_path = os.path.join(deploy_dir, "%s.json" % link_name)
>
>      0211:        manifest_path = d.getVar("CVE_CHECK_MANIFEST_JSON")
>
>      0212:        bb.note("Generating JSON CVE manifest")
>
>  *** 0213:        generate_json_report(json_summary_name, json_summary_link_name)
>
>      0214:        bb.plain("Image CVE JSON report stored in: %s" % link_path)
>
>      0215:}
>
>      0216:
>
>      0217:ROOTFS_POSTPROCESS_COMMAND:prepend = "${@'cve_check_write_rootfs_manifest; ' if d.getVar('CVE_CHECK_CREATE_MANIFEST') == '1' else ''}"
>
> Exception: NameError: name 'json_summary_name' is not defined
>
>
>
> ERROR: Logfile of failure stored in: /home/dwatkins/workspace/mgos/voyager1/build/tmp/work/mg90-poky-linux-gnueabi/omg-supplement-mfwimages/1.0-r0/temp/log.do_rootfs.16510
>
> ERROR: Task (/home/dwatkins/workspace/mgos/voyager1/meta-mgos-core/recipes-images/images/omg-supplement-mfwimages.bb:do_rootfs) failed with exit code '1'
>
> NOTE: Tasks Summary: Attempted 8400 tasks of which 7718 didn't need to be rerun and 1 failed.
>
> NOTE: Generating JSON CVE summary
>
> CVE report summary created at: /home/dwatkins/workspace/mgos/voyager1/build/tmp/log/cve/cve-summary.json
>
>
>
>
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 130)         json_summary_link_name = os.path.join(cvelogpath, d.getVar("CVE_CHECK_SUMMARY_FILE_NAME_JSON"))
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 131)         json_summary_name = os.path.join(cvelogpath, "%s-%s.json" % (cve_summary_name, timestamp))
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 132)         generate_json_report(json_summary_name, json_summary_link_name)
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 133)         bb.plain("CVE report summary created at: %s" % json_summary_link_name)
>
>
>
>
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 210)         link_path = os.path.join(deploy_dir, "%s.json" % link_name)
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 211)         manifest_path = d.getVar("CVE_CHECK_MANIFEST_JSON")
>
> 777f1d42b62 (Marta Rybczynska       2022-03-29 14:54:31 +0200 212)         bb.note("Generating JSON CVE manifest")
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 213)         generate_json_report(json_summary_name, json_summary_link_name)
>
> 645c157befa (Davide Gardenal        2022-05-03 09:51:43 +0200 214)         bb.plain("Image CVE JSON report stored in: %s" % link_path)
>
>
>
>
>
> I am not sure whether we need to locally setup the “json_summary_name” in  “python cve_check_write_rootfs_manifest ()” like was done inside “python cve_save_summary_handler ()” or if something different was supposed to be passed to “generate_json_report()” instead.
>
>
>
>
>
> Regards,
>
>
>
> Darcy
>
>
>
> Darcy Watkins ::  Senior Staff Engineer, Firmware
>
>
>
> SIERRA WIRELESS
>
> Direct  +1 604 233 7989   ::  Fax  +1 604 231 1109  ::  Main  +1 604 231 1100
>
> 13811 Wireless Way  :: Richmond, BC Canada V6V 3A4
>
> [M4]
>
> dwatkins@sierrawireless.com :: https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.sierrawireless.com%2F&amp;data=05%7C01%7Cdwatkins%40sierrawireless.com%7C8154326625634f53c21308da3e88f58a%7C08059a4c248643dd89e33a747e0dcbe8%7C0%7C0%7C637891055218478725%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=Beu3mEcOFIh3vQC1sN5kjjqaaE6DkHiNtYZVC3l%2FwbI%3D&amp;reserved=0
>
>
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#57189): https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.yoctoproject.org%2Fg%2Fyocto%2Fmessage%2F57189&amp;data=05%7C01%7Cdwatkins%40sierrawireless.com%7C8154326625634f53c21308da3e88f58a%7C08059a4c248643dd89e33a747e0dcbe8%7C0%7C0%7C637891055218478725%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=cqeOo7TdtIg6Vm6dIl4gZXorAIJE8%2Fn0rW%2Bn5cSipvA%3D&amp;reserved=0
> Mute This Topic: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.yoctoproject.org%2Fmt%2F91340574%2F3620601&amp;data=05%7C01%7Cdwatkins%40sierrawireless.com%7C8154326625634f53c21308da3e88f58a%7C08059a4c248643dd89e33a747e0dcbe8%7C0%7C0%7C637891055218478725%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=JuhJWMjoFGpoS7zcBaRcYY816Zim7%2Bg7wTVXSKQAjWc%3D&amp;reserved=0
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.yoctoproject.org%2Fg%2Fyocto%2Funsub&amp;data=05%7C01%7Cdwatkins%40sierrawireless.com%7C8154326625634f53c21308da3e88f58a%7C08059a4c248643dd89e33a747e0dcbe8%7C0%7C0%7C637891055218478725%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=avVa3Dv5zwkAAl7NTD6PUQZwOsISPN5cj2NJdw1TAl4%3D&amp;reserved=0 [steve@sakoman.com]
> -=-=-=-=-=-=-=-=-=-=-=-
>

[-- Attachment #2: Type: text/html, Size: 14953 bytes --]

^ permalink raw reply	[flat|nested] 3+ messages in thread
end of thread, other threads:[~2022-05-25 20:01 UTC | newest]

Thread overview: 3+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2022-05-25 19:34 Kirkstone 4.0.1 - Exception: NameError: name 'json_summary_name' is not defined Darcy Watkins
2022-05-25 19:58 ` [yocto] " Steve Sakoman
2022-05-25 20:00   ` Darcy Watkins

