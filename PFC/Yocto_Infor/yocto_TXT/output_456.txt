* meta-arm-toolchain: SUPPORTED file not found #toolchain
@ 2023-06-19 16:33 Jesus.JimenezSanchez
  2023-06-20  9:11 ` [yocto] " Ross Burton
  2023-06-20 12:08 ` Sumit Garg
  0 siblings, 2 replies; 11+ messages in thread
From: Jesus.JimenezSanchez @ 2023-06-19 16:33 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 897 bytes --]

Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
```
| cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
```
It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
```
TCMODE = "external-arm"

EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
```

I have added this to the `bblayers.conf`:
```
BBLAYERS += "${OEROOT}/layers/meta-arm/meta-arm-toolchain"
```

And that's it, I think. Have I missed any steps?

[-- Attachment #2: Type: text/html, Size: 961 bytes --]

^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-19 16:33 meta-arm-toolchain: SUPPORTED file not found #toolchain Jesus.JimenezSanchez
@ 2023-06-20  9:11 ` Ross Burton
  2023-06-20 10:35   ` Jesus Jimenez Sanchez
  2023-06-20 12:08 ` Sumit Garg
  1 sibling, 1 reply; 11+ messages in thread
From: Ross Burton @ 2023-06-20  9:11 UTC (permalink / raw)
  To: Jesus.JimenezSanchez; +Cc: Yocto-mailing-list, meta-arm

Copying meta-arm, as that’s the best place to discuss this.


> On 19 Jun 2023, at 17:33, Jesus.JimenezSanchez via lists.yoctoproject.org <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
> 
> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> ```
> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> ```
> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> ```
> TCMODE = "external-arm"
> 
> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> ```
> 
> I have added this to the `bblayers.conf`:
> ```
> BBLAYERS += "${OEROOT}/layers/meta-arm/meta-arm-toolchain"
> ```

Can you share the full logs, instead of just one line?

Also replicating with just poky+meta-arm and a brand new build tree (so no local configuration or layers) would help debug.

Ross

^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20  9:11 ` [yocto] " Ross Burton
@ 2023-06-20 10:35   ` Jesus Jimenez Sanchez
  2023-06-20 12:01     ` Ross Burton
  0 siblings, 1 reply; 11+ messages in thread
From: Jesus Jimenez Sanchez @ 2023-06-20 10:35 UTC (permalink / raw)
  To: Ross Burton; +Cc: Yocto-mailing-list, meta-arm

[-- Attachment #1: Type: text/plain, Size: 4028 bytes --]

Hello,

This is the complete output from yocto:

```
NOTE: Executing Tasks
ERROR: external-arm-toolchain-2022.02-r0 do_stash_locale: ExecutionError('.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/temp/run.do_stash_locale.449', 1, None, None)
ERROR: Logfile of failure stored in: .../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/temp/log.do_stash_locale.449
Log data follows:
| DEBUG: Executing python function sstate_task_prefunc
| DEBUG: Python function sstate_task_prefunc finished
| DEBUG: Executing shell function do_stash_locale
| cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
| WARNING: .../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/temp/run.do_stash_locale.449:165 exit 1 from 'cp -fpPR .../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED $dest'
| WARNING: Backtrace (BB generated script):
|     #1: do_stash_locale, .../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/temp/run.do_stash_locale.449, line 165
|     #2: main, .../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/temp/run.do_stash_locale.449, line 177
ERROR: Task (.../layers/meta-arm/meta-arm-toolchain/recipes-devtools/external-arm-toolchain/external-arm-toolchain.bb:do_stash_locale) failed with exit code '1'
NOTE: Tasks Summary: Attempted 2402 tasks of which 2396 didn't need to be rerun and 1 failed.
NOTE: Writing buildhistory
NOTE: Writing buildhistory took: 4 seconds

Summary: 1 task failed:
  .../layers/meta-arm/meta-arm-toolchain/recipes-devtools/external-arm-toolchain/external-arm-toolchain.bb:do_stash_locale
Summary: There was 1 ERROR message, returning a non-zero exit code.
```

Best regards,
Jesús Jiménez Sánchez
________________________________
From: Ross Burton <Ross.Burton@arm.com>
Sent: Tuesday 20 June 2023 10:11
To: Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com>
Cc: Yocto-mailing-list <yocto@lists.yoctoproject.org>; meta-arm@lists.yoctoproject.org <meta-arm@lists.yoctoproject.org>
Subject: Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain

[You don't often get email from ross.burton@arm.com. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]

CAUTION: This email originated from outside of our organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.


Copying meta-arm, as that’s the best place to discuss this.


> On 19 Jun 2023, at 17:33, Jesus.JimenezSanchez via lists.yoctoproject.org <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
>
> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> ```
> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> ```
> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> ```
> TCMODE = "external-arm"
>
> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> ```
>
> I have added this to the `bblayers.conf`:
> ```
> BBLAYERS += "${OEROOT}/layers/meta-arm/meta-arm-toolchain"
> ```

Can you share the full logs, instead of just one line?

Also replicating with just poky+meta-arm and a brand new build tree (so no local configuration or layers) would help debug.

Ross

[-- Attachment #2: Type: text/html, Size: 6941 bytes --]

^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20 10:35   ` Jesus Jimenez Sanchez
@ 2023-06-20 12:01     ` Ross Burton
  0 siblings, 0 replies; 11+ messages in thread
From: Ross Burton @ 2023-06-20 12:01 UTC (permalink / raw)
  To: Jesus Jimenez Sanchez; +Cc: Yocto-mailing-list, meta-arm

On 20 Jun 2023, at 11:35, Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com> wrote:
> 
> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory

That’s the line which confuses me.

My line is:

        cp -fpPR /yocto/ross/build/tmp/work/cortexa15t2hf-neon-poky-linux-gnueabi/external-arm-toolchain/12.2.Rel1-r0/SUPPORTED $dest

Do you have local configuration?  I just grabbed poky and meta-arm kirkstone, set the two variables, and it built fine.

Ross

^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-19 16:33 meta-arm-toolchain: SUPPORTED file not found #toolchain Jesus.JimenezSanchez
  2023-06-20  9:11 ` [yocto] " Ross Burton
@ 2023-06-20 12:08 ` Sumit Garg
  2023-06-20 12:35   ` Ross Burton
  1 sibling, 1 reply; 11+ messages in thread
From: Sumit Garg @ 2023-06-20 12:08 UTC (permalink / raw)
  To: Jesus.JimenezSanchez; +Cc: yocto

On Mon, 19 Jun 2023 at 22:03, Jesus.JimenezSanchez via
lists.yoctoproject.org
<Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
>
> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> ```
> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> ```
> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> ```
> TCMODE = "external-arm"
>
> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> ```
>

Don't provide a relative path here. It should be an absolute path to
your external toolchain install directory. This should resolve your
issue.

-Sumit

> I have added this to the `bblayers.conf`:
> ```
> BBLAYERS += "${OEROOT}/layers/meta-arm/meta-arm-toolchain"
> ```
>
> And that's it, I think. Have I missed any steps?
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#60349): https://lists.yoctoproject.org/g/yocto/message/60349
> Mute This Topic: https://lists.yoctoproject.org/mt/99626981/1777089
> Mute #toolchain:https://lists.yoctoproject.org/g/yocto/mutehashtag/toolchain
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe: https://lists.yoctoproject.org/g/yocto/unsub [sumit.garg@linaro.org]
> -=-=-=-=-=-=-=-=-=-=-=-
>


^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20 12:08 ` Sumit Garg
@ 2023-06-20 12:35   ` Ross Burton
  2023-06-20 13:18     ` Sumit Garg
  0 siblings, 1 reply; 11+ messages in thread
From: Ross Burton @ 2023-06-20 12:35 UTC (permalink / raw)
  To: sumit.garg; +Cc: Jesus.JimenezSanchez, yocto

On 20 Jun 2023, at 13:08, Sumit Garg via lists.yoctoproject.org <sumit.garg=linaro.org@lists.yoctoproject.org> wrote:
> 
> On Mon, 19 Jun 2023 at 22:03, Jesus.JimenezSanchez via
> lists.yoctoproject.org
> <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
>> 
>> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
>> ```
>> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
>> ```
>> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
>> ```
>> TCMODE = "external-arm"
>> 
>> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
>> ```
>> 
> 
> Don't provide a relative path here. It should be an absolute path to
> your external toolchain install directory. This should resolve your
> issue.

If that’s the issue, can you add a check for the path being absolute to the class?

Ross

^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20 12:35   ` Ross Burton
@ 2023-06-20 13:18     ` Sumit Garg
  2023-06-20 13:44       ` Jesus Jimenez Sanchez
  0 siblings, 1 reply; 11+ messages in thread
From: Sumit Garg @ 2023-06-20 13:18 UTC (permalink / raw)
  To: Ross Burton; +Cc: Jesus.JimenezSanchez, yocto

On Tue, 20 Jun 2023 at 18:06, Ross Burton <Ross.Burton@arm.com> wrote:
>
> On 20 Jun 2023, at 13:08, Sumit Garg via lists.yoctoproject.org <sumit.garg=linaro.org@lists.yoctoproject.org> wrote:
> >
> > On Mon, 19 Jun 2023 at 22:03, Jesus.JimenezSanchez via
> > lists.yoctoproject.org
> > <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
> >>
> >> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> >> ```
> >> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> >> ```
> >> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> >> ```
> >> TCMODE = "external-arm"
> >>
> >> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> >> ```
> >>
> >
> > Don't provide a relative path here. It should be an absolute path to
> > your external toolchain install directory. This should resolve your
> > issue.
>
> If that’s the issue, can you add a check for the path being absolute to the class?
>

Sure, see [1].

[1] https://lists.yoctoproject.org/g/meta-arm/message/4809

-Sumit

> Ross


^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20 13:18     ` Sumit Garg
@ 2023-06-20 13:44       ` Jesus Jimenez Sanchez
  2023-06-20 13:52         ` Ross Burton
  0 siblings, 1 reply; 11+ messages in thread
From: Jesus Jimenez Sanchez @ 2023-06-20 13:44 UTC (permalink / raw)
  To: Sumit Garg, Ross Burton; +Cc: yocto


[-- Attachment #1.1: Type: text/plain, Size: 2792 bytes --]

Hello,

I am using an absolute path there; I just removed it before posting on the email thread.

I have attached my local.conf here.

Best regards,
Jesús Jiménez Sánchez
________________________________
From: Sumit Garg <sumit.garg@linaro.org>
Sent: Tuesday 20 June 2023 14:18
To: Ross Burton <Ross.Burton@arm.com>
Cc: Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com>; yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain

[You don't often get email from sumit.garg@linaro.org. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]

CAUTION: This email originated from outside of our organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.


On Tue, 20 Jun 2023 at 18:06, Ross Burton <Ross.Burton@arm.com> wrote:
>
> On 20 Jun 2023, at 13:08, Sumit Garg via lists.yoctoproject.org <sumit.garg=linaro.org@lists.yoctoproject.org> wrote:
> >
> > On Mon, 19 Jun 2023 at 22:03, Jesus.JimenezSanchez via
> > lists.yoctoproject.org
> > <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
> >>
> >> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> >> ```
> >> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> >> ```
> >> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> >> ```
> >> TCMODE = "external-arm"
> >>
> >> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> >> ```
> >>
> >
> > Don't provide a relative path here. It should be an absolute path to
> > your external toolchain install directory. This should resolve your
> > issue.
>
> If that’s the issue, can you add a check for the path being absolute to the class?
>

Sure, see [1].

[1] https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.yoctoproject.org%2Fg%2Fmeta-arm%2Fmessage%2F4809&data=05%7C01%7CJesus.JimenezSanchez%40verifone.com%7C973f208b0af44819944408db7190e99c%7C611a22d68c40495884e3ce47d8205d98%7C0%7C0%7C638228639435319950%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=F7k3iyXYd8FFpc%2FMk2cPW3fKzKxIS44htt85A3liStA%3D&reserved=0<https://lists.yoctoproject.org/g/meta-arm/message/4809>

-Sumit

> Ross

[-- Attachment #1.2: Type: text/html, Size: 4980 bytes --]

[-- Attachment #2: local.conf.sample --]
[-- Type: application/octet-stream, Size: 11936 bytes --]

#
# This file is your local configuration file and is where all local user settings
# are placed. The comments in this file give some guide to the options a new user
# to the system might want to change but pretty much any configuration option can
# be set in this file. More adventurous users can look at
# local.conf.sample.extended which contains other examples of configuration which
# can be placed in this file but new users likely won't need any of them
# initially.
#
# Lines starting with the '#' character are commented out and in some cases the
# default values are provided as comments to show people example syntax. Enabling
# the option is a question of removing the # character and making any change to the
# variable as required.

#
# Machine Selection
#
# You need to select a specific machine to target the build with. There are a selection
# of emulated machines available which can boot and run in the QEMU emulator:
#
#MACHINE ?= "qemuarm"
#MACHINE ?= "qemuarm64"
#MACHINE ?= "qemumips"
#MACHINE ?= "qemumips64"
#MACHINE ?= "qemuppc"
#MACHINE ?= "qemux86"
#MACHINE ?= "qemux86-64"
#
# This sets the default machine to be qemux86-64 if no other machine is selected:
MACHINE ??= "qemux86-64"

#
# Default policy config
#
# The distribution setting controls which policy settings are used as defaults.
# The default value is fine for general Yocto project use, at least initially.
# Ultimately when creating custom policy, people will likely end up subclassing
# these defaults.
#
# This sets the default distribution to be nodistro if no other distribution is selected:
DISTRO ??= "nodistro"

#
# Where to place downloads
#
# During a first build the system will download many different source code tarballs
# from various upstream projects. This can take a while, particularly if your network
# connection is slow. These are all stored in DL_DIR. When wiping and rebuilding you
# can preserve this directory to speed up this part of subsequent builds. This directory
# is safe to share between multiple builds on the same machine too.
#
# The default is a downloads directory under TOPDIR which is the build directory.
#
#DL_DIR ?= "${TOPDIR}/downloads"

#
# Where to place shared-state files
#
# BitBake has the capability to accelerate builds based on previously built output.
# This is done using "shared state" files which can be thought of as cache objects
# and this option determines where those files are placed.
#
# You can wipe out TMPDIR leaving this directory intact and the build would regenerate
# from these files if no changes were made to the configuration. If changes were made
# to the configuration, only shared state files where the state was still valid would
# be used (done using checksums).
#
# The default is a sstate-cache directory under TOPDIR.
#
#SSTATE_DIR ?= "${TOPDIR}/sstate-cache"

#
# Where to place the build output
#
# This option specifies where the bulk of the building work should be done and
# where BitBake should place its temporary files and output. Keep in mind that
# this includes the extraction and compilation of many applications and the toolchain
# which can use Gigabytes of hard disk space.
#
# The default is a tmp directory under TOPDIR.
#
#TMPDIR = "${TOPDIR}/tmp"


#
# Package Management configuration
#
# This variable lists which packaging formats to enable. Multiple package backends
# can be enabled at once and the first item listed in the variable will be used
# to generate the root filesystems.
# Options are:
#  - 'package_deb' for debian style deb files
#  - 'package_ipk' for ipk files are used by opkg (a debian style embedded package manager)
#  - 'package_rpm' for rpm style packages
# E.g.: PACKAGE_CLASSES ?= "package_rpm package_deb package_ipk"
# We default to ipk:
# PACKAGE_CLASSES ?= "package_ipk"

#
# SDK target architecture
#
# This variable specifies the architecture to build SDK items for and means
# you can build the SDK packages for architectures other than the machine you are
# running the build on (i.e. building i686 packages on an x86_64 host).
# Supported values are i686, x86_64, aarch64
#SDKMACHINE ?= "i686"

#
# Extra image configuration defaults
#
# The EXTRA_IMAGE_FEATURES variable allows extra packages to be added to the generated
# images. Some of these options are added to certain image types automatically. The
# variable can contain the following options:
#  "dbg-pkgs"       - add -dbg packages for all installed packages
#                     (adds symbol information for debugging/profiling)
#  "src-pkgs"       - add -src packages for all installed packages
#                     (adds source code for debugging)
#  "dev-pkgs"       - add -dev packages for all installed packages
#                     (useful if you want to develop against libs in the image)
#  "ptest-pkgs"     - add -ptest packages for all ptest-enabled packages
#                     (useful if you want to run the package test suites)
#  "tools-sdk"      - add development tools (gcc, make, pkgconfig etc.)
#  "tools-debug"    - add debugging tools (gdb, strace)
#  "eclipse-debug"  - add Eclipse remote debugging support
#  "tools-profile"  - add profiling tools (oprofile, lttng, valgrind)
#  "tools-testapps" - add useful testing tools (ts_print, aplay, arecord etc.)
#  "debug-tweaks"   - make an image suitable for development
#                     e.g. ssh root access has a blank password
# There are other application targets that can be used here too, see
# meta/classes/image.bbclass and meta/classes/core-image.bbclass for more details.
# We default to enabling the debugging tweaks.
EXTRA_IMAGE_FEATURES ?= "debug-tweaks"

#
# Additional image features
#
# The following is a list of additional classes to use when building images which
# enable extra features. Some available options which can be included in this variable
# are:
#   - 'buildstats' collect build statistics
USER_CLASSES ?= "buildstats"


#
# Runtime testing of images
#
# The build system can test booting virtual machine images under qemu (an emulator)
# after any root filesystems are created and run tests against those images. It can also
# run tests against any SDK that are built. To enable this uncomment these lines.
# See classes/test{image,sdk}.bbclass for further details.
#IMAGE_CLASSES += "testimage testsdk"
#TESTIMAGE_AUTO:qemuall = "1"

#
# Interactive shell configuration
#
# Under certain circumstances the system may need input from you and to do this it
# can launch an interactive shell. It needs to do this since the build is
# multithreaded and needs to be able to handle the case where more than one parallel
# process may require the user's attention. The default is iterate over the available
# terminal types to find one that works.
#
# Examples of the occasions this may happen are when resolving patches which cannot
# be applied, to use the devshell or the kernel menuconfig
#
# Supported values are auto, gnome, xfce, rxvt, screen, konsole (KDE 3.x only), none
# Note: currently, Konsole support only works for KDE 3.x due to the way
# newer Konsole versions behave
#OE_TERMINAL = "auto"
# By default disable interactive patch resolution (tasks will just fail instead):
PATCHRESOLVE = "noop"

#
# Disk Space Monitoring during the build
#
# Monitor the disk space during the build. If there is less that 1GB of space or less
# than 100K inodes in any key build location (TMPDIR, DL_DIR, SSTATE_DIR), gracefully
# shutdown the build. If there is less than 100MB or 1K inodes, perform a hard halt
# of the build. The reason for this is that running completely out of space can corrupt
# files and damages the build in ways which may not be easily recoverable.
# It's necessary to monitor /tmp, if there is no space left the build will fail
# with very exotic errors.
BB_DISKMON_DIRS ??= "\
    STOPTASKS,${TMPDIR},1G,100K \
    STOPTASKS,${DL_DIR},1G,100K \
    STOPTASKS,${SSTATE_DIR},1G,100K \
    STOPTASKS,/tmp,100M,100K \
    HALT,${TMPDIR},100M,1K \
    HALT,${DL_DIR},100M,1K \
    HALT,${SSTATE_DIR},100M,1K \
    HALT,/tmp,10M,1K"

#
# Shared-state files from other locations
#
# As mentioned above, shared state files are prebuilt cache data objects which can be
# used to accelerate build time. This variable can be used to configure the system
# to search other mirror locations for these objects before it builds the data itself.
#
# This can be a filesystem directory, or a remote url such as https or ftp. These
# would contain the sstate-cache results from previous builds (possibly from other
# machines). This variable works like fetcher MIRRORS/PREMIRRORS and points to the
# cache locations to check for the shared objects.
# NOTE: if the mirror uses the same structure as SSTATE_DIR, you need to add PATH
# at the end as shown in the examples below. This will be substituted with the
# correct path within the directory structure.
#SSTATE_MIRRORS ?= "\
#file://.* https://someserver.tld/share/sstate/PATH;downloadfilename=PATH \
#file://.* file:///some/local/dir/sstate/PATH"


#
# Qemu configuration
#
# By default qemu will build with a builtin VNC server where graphical output can be
# seen. The two lines below enable the SDL backend too. By default libsdl2-native will
# be built, if you want to use your host's libSDL instead of the minimal libsdl built
# by libsdl2-native then uncomment the ASSUME_PROVIDED line below.
PACKAGECONFIG:append:pn-qemu-system-native = " sdl"
PACKAGECONFIG:append:pn-nativesdk-qemu = " sdl"
#ASSUME_PROVIDED += "libsdl2-native"

# =========================================================================
#   ST SPecific
# =========================================================================
#
# CONF_VERSION is increased each time build/conf/ changes incompatibly and is used to
# track the version of this file when it was generated. This can safely be ignored if
# this doesn't mean anything to you.
CONF_VERSION = "2"

# Set GLIBC_GENERATE_LOCALES to the locales you wish to generate should you not
# wish to perform the time-consuming step of generating all LIBC locales.
# NOTE: If removing en_US.UTF-8 you will also need to uncomment, and set
# appropriate value for IMAGE_LINGUAS.
# WARNING: this may break localisation!
GLIBC_GENERATE_LOCALES = "en_GB.UTF-8 en_US.UTF-8"
IMAGE_LINGUAS ?= "en-gb"

# Additional image generation features
#
# The following is a list of classes to import to use in the generation of images
# currently an example class is image_types_uboot
# IMAGE_CLASSES = " image_types_uboot"

# Support of devshell
INHERIT += "devshell"

# Remove the old image before the new one generated to save disk space
RM_OLD_IMAGE = "1"

# Nice debug data
INHERIT += "buildhistory"
BUILDHISTORY_COMMIT = "1"

# Clean up working directory after build
INHERIT += "rm_work"

# To generate debug image with all symbol
#IMAGE_GEN_DEBUGFS = "1"

# force the usage of debian package
PACKAGE_CLASSES = "package_deb"

# To enable archiver for recipes that are configured
#ST_ARCHIVER_ENABLE = "1"

# Setup environment for builds binary reproducibility
REPRODUCIBLE_TIMESTAMP_ROOTFS = ""

# Setup eSDK
SDK_EXT_TYPE="minimal"
SDK_INCLUDE_TOOLCHAIN="1"

# Enable PR server to avoid version-going-backward issue
PRSERV_HOST = "localhost:0"

# =========================================================================
# Configure STM32MP default version to github
# =========================================================================
#STM32MP_SOURCE_SELECTION:pn-linux-stm32mp = "github"
#STM32MP_SOURCE_SELECTION:pn-optee-os-stm32mp = "github"
#STM32MP_SOURCE_SELECTION:pn-tf-a-stm32mp = "github"
#STM32MP_SOURCE_SELECTION:pn-u-boot-stm32mp = "github"


# Disable dependency on SRCPV in PV for cleaner version
__BBSEENSRCREV = "1"

# Exclude debug symbols and other debug information
INHIBIT_PACKAGE_DEBUG_SPLIT = "1"

TCMODE = "external-arm"

EXTERNAL_TOOLCHAIN = "<<absolute-path-here>>/layers/gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"

^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20 13:44       ` Jesus Jimenez Sanchez
@ 2023-06-20 13:52         ` Ross Burton
  2023-06-21 14:32           ` Jesus Jimenez Sanchez
  2023-06-26 16:12           ` Jesus Jimenez Sanchez
  0 siblings, 2 replies; 11+ messages in thread
From: Ross Burton @ 2023-06-20 13:52 UTC (permalink / raw)
  To: Jesus Jimenez Sanchez; +Cc: Sumit Garg, yocto

So there’s a lot of settings in that file.  Can you replicate with a default config as generated by poky?

Ross

> On 20 Jun 2023, at 14:44, Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com> wrote:
>
> Hello,
>
> I am using an absolute path there; I just removed it before posting on the email thread.
>
> I have attached my local.conf here.
>
> Best regards,
> Jesús Jiménez SánchezFrom: Sumit Garg <sumit.garg@linaro.org>
> Sent: Tuesday 20 June 2023 14:18
> To: Ross Burton <Ross.Burton@arm.com>
> Cc: Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com>; yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
>  [You don't often get email from sumit.garg@linaro.org. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> CAUTION: This email originated from outside of our organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.
>
>
> On Tue, 20 Jun 2023 at 18:06, Ross Burton <Ross.Burton@arm.com> wrote:
> >
> > On 20 Jun 2023, at 13:08, Sumit Garg via lists.yoctoproject.org <sumit.garg=linaro.org@lists.yoctoproject.org> wrote:
> > >
> > > On Mon, 19 Jun 2023 at 22:03, Jesus.JimenezSanchez via
> > > lists.yoctoproject.org
> > > <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
> > >>
> > >> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> > >> ```
> > >> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> > >> ```
> > >> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> > >> ```
> > >> TCMODE = "external-arm"
> > >>
> > >> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> > >> ```
> > >>
> > >
> > > Don't provide a relative path here. It should be an absolute path to
> > > your external toolchain install directory. This should resolve your
> > > issue.
> >
> > If that’s the issue, can you add a check for the path being absolute to the class?
> >
>
> Sure, see [1].
>
> [1] https://lists.yoctoproject.org/g/meta-arm/message/4809
>
> -Sumit
>
> > Ross
> <local.conf.sample>


^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20 13:52         ` Ross Burton
@ 2023-06-21 14:32           ` Jesus Jimenez Sanchez
  2023-06-26 16:12           ` Jesus Jimenez Sanchez
  1 sibling, 0 replies; 11+ messages in thread
From: Jesus Jimenez Sanchez @ 2023-06-21 14:32 UTC (permalink / raw)
  To: Ross Burton; +Cc: Sumit Garg, yocto

[-- Attachment #1: Type: text/plain, Size: 3986 bytes --]

Hi,

After a few problems that took me a while to fix, I've now used a default poky with default configuration, and it builds just fine.

There must be something in one of my configuration files that appends that "image/local" at the end of WORKDIR, but I've search in entire folder and there are no references to that string.

Best regards,
Jesús Jiménez Sánchez
________________________________
From: Ross Burton <Ross.Burton@arm.com>
Sent: Tuesday 20 June 2023 14:52
To: Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com>
Cc: Sumit Garg <sumit.garg@linaro.org>; yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain

CAUTION: This email originated from outside of our organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.


So there’s a lot of settings in that file.  Can you replicate with a default config as generated by poky?

Ross

> On 20 Jun 2023, at 14:44, Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com> wrote:
>
> Hello,
>
> I am using an absolute path there; I just removed it before posting on the email thread.
>
> I have attached my local.conf here.
>
> Best regards,
> Jesús Jiménez SánchezFrom: Sumit Garg <sumit.garg@linaro.org>
> Sent: Tuesday 20 June 2023 14:18
> To: Ross Burton <Ross.Burton@arm.com>
> Cc: Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com>; yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
>  [You don't often get email from sumit.garg@linaro.org. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> CAUTION: This email originated from outside of our organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.
>
>
> On Tue, 20 Jun 2023 at 18:06, Ross Burton <Ross.Burton@arm.com> wrote:
> >
> > On 20 Jun 2023, at 13:08, Sumit Garg via lists.yoctoproject.org <sumit.garg=linaro.org@lists.yoctoproject.org> wrote:
> > >
> > > On Mon, 19 Jun 2023 at 22:03, Jesus.JimenezSanchez via
> > > lists.yoctoproject.org
> > > <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
> > >>
> > >> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> > >> ```
> > >> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> > >> ```
> > >> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> > >> ```
> > >> TCMODE = "external-arm"
> > >>
> > >> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> > >> ```
> > >>
> > >
> > > Don't provide a relative path here. It should be an absolute path to
> > > your external toolchain install directory. This should resolve your
> > > issue.
> >
> > If that’s the issue, can you add a check for the path being absolute to the class?
> >
>
> Sure, see [1].
>
> [1] https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.yoctoproject.org%2Fg%2Fmeta-arm%2Fmessage%2F4809&data=05%7C01%7CJesus.JimenezSanchez%40verifone.com%7C8fdf8d44005f462cd9b208db71959a89%7C611a22d68c40495884e3ce47d8205d98%7C0%7C0%7C638228659596378789%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=c%2Fd7LXNot1v%2Bmy%2BU6ioRDcoot2Qb2wXgN5PlDGHEe6I%3D&reserved=0<https://lists.yoctoproject.org/g/meta-arm/message/4809>
>
> -Sumit
>
> > Ross
> <local.conf.sample>


[-- Attachment #2: Type: text/html, Size: 6484 bytes --]

^ permalink raw reply	[flat|nested] 11+ messages in thread
* Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
  2023-06-20 13:52         ` Ross Burton
  2023-06-21 14:32           ` Jesus Jimenez Sanchez
@ 2023-06-26 16:12           ` Jesus Jimenez Sanchez
  1 sibling, 0 replies; 11+ messages in thread
From: Jesus Jimenez Sanchez @ 2023-06-26 16:12 UTC (permalink / raw)
  To: Ross Burton; +Cc: Sumit Garg, yocto

[-- Attachment #1: Type: text/plain, Size: 4049 bytes --]

Hi,

I kept investigating and it turns out that someone in my team had made a custom glibc-package.inc which changed the WORKDIR value, and I didn't know. That was all in the end.

I've modified this file to revert the change (we actually have both now, just in case they need it for something else) and the toolchain is working perfectly now.

Thank you very much for your help anyways.

Best regards,
Jesús Jiménez Sánchez
________________________________
From: Ross Burton <Ross.Burton@arm.com>
Sent: Tuesday 20 June 2023 14:52
To: Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com>
Cc: Sumit Garg <sumit.garg@linaro.org>; yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
Subject: Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain

CAUTION: This email originated from outside of our organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.


So there’s a lot of settings in that file.  Can you replicate with a default config as generated by poky?

Ross

> On 20 Jun 2023, at 14:44, Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com> wrote:
>
> Hello,
>
> I am using an absolute path there; I just removed it before posting on the email thread.
>
> I have attached my local.conf here.
>
> Best regards,
> Jesús Jiménez SánchezFrom: Sumit Garg <sumit.garg@linaro.org>
> Sent: Tuesday 20 June 2023 14:18
> To: Ross Burton <Ross.Burton@arm.com>
> Cc: Jesus Jimenez Sanchez <Jesus.JimenezSanchez@verifone.com>; yocto@lists.yoctoproject.org <yocto@lists.yoctoproject.org>
> Subject: Re: [yocto] meta-arm-toolchain: SUPPORTED file not found #toolchain
>  [You don't often get email from sumit.garg@linaro.org. Learn why this is important at https://aka.ms/LearnAboutSenderIdentification ]
>
> CAUTION: This email originated from outside of our organization. Do not click links or open attachments unless you recognize the sender and know the content is safe.
>
>
> On Tue, 20 Jun 2023 at 18:06, Ross Burton <Ross.Burton@arm.com> wrote:
> >
> > On 20 Jun 2023, at 13:08, Sumit Garg via lists.yoctoproject.org <sumit.garg=linaro.org@lists.yoctoproject.org> wrote:
> > >
> > > On Mon, 19 Jun 2023 at 22:03, Jesus.JimenezSanchez via
> > > lists.yoctoproject.org
> > > <Jesus.JimenezSanchez=verifone.com@lists.yoctoproject.org> wrote:
> > >>
> > >> Hello, I'm trying to add the arm toolchain to my yocto project but I just got this error
> > >> ```
> > >> | cp: cannot stat '.../tmp-glibc/work/cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi/external-arm-toolchain/2022.02-r0/image/local/SUPPORTED': No such file or directory
> > >> ```
> > >> It comes from the `external-arm-toolchain.bb` recipe. I've checked and the `SUPPORTED` file is in the right folder (the `files` folder where the `external-arm-toolchain.bb` file is). I haven't made any modifications to the meta-arm repo. I just cloned it and changed to branch `kirkstone`. After that, I have configured my local.conf with this:
> > >> ```
> > >> TCMODE = "external-arm"
> > >>
> > >> EXTERNAL_TOOLCHAIN = ".../gcc-arm-11.2-2022.02-x86_64-arm-none-linux-gnueabihf"
> > >> ```
> > >>
> > >
> > > Don't provide a relative path here. It should be an absolute path to
> > > your external toolchain install directory. This should resolve your
> > > issue.
> >
> > If that’s the issue, can you add a check for the path being absolute to the class?
> >
>
> Sure, see [1].
>
> [1] https://nam02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.yoctoproject.org%2Fg%2Fmeta-arm%2Fmessage%2F4809&data=05%7C01%7CJesus.JimenezSanchez%40verifone.com%7C8fdf8d44005f462cd9b208db71959a89%7C611a22d68c40495884e3ce47d8205d98%7C0%7C0%7C638228659596378789%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=c%2Fd7LXNot1v%2Bmy%2BU6ioRDcoot2Qb2wXgN5PlDGHEe6I%3D&reserved=0<https://lists.yoctoproject.org/g/meta-arm/message/4809>
>
> -Sumit
>
> > Ross
> <local.conf.sample>


[-- Attachment #2: Type: text/html, Size: 6886 bytes --]

^ permalink raw reply	[flat|nested] 11+ messages in thread
end of thread, other threads:[~2023-06-26 16:13 UTC | newest]

Thread overview: 11+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2023-06-19 16:33 meta-arm-toolchain: SUPPORTED file not found #toolchain Jesus.JimenezSanchez
2023-06-20  9:11 ` [yocto] " Ross Burton
2023-06-20 10:35   ` Jesus Jimenez Sanchez
2023-06-20 12:01     ` Ross Burton
2023-06-20 12:08 ` Sumit Garg
2023-06-20 12:35   ` Ross Burton
2023-06-20 13:18     ` Sumit Garg
2023-06-20 13:44       ` Jesus Jimenez Sanchez
2023-06-20 13:52         ` Ross Burton
2023-06-21 14:32           ` Jesus Jimenez Sanchez
2023-06-26 16:12           ` Jesus Jimenez Sanchez

