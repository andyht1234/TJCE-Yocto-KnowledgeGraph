* do_configure error while adding networkmanager to image
@ 2023-07-06  9:02 MOHAMMED HASSAN
  2023-07-06  9:29 ` [yocto] " adrian.freihofer
  0 siblings, 1 reply; 7+ messages in thread
From: MOHAMMED HASSAN @ 2023-07-06  9:02 UTC (permalink / raw)
  To: yocto


[-- Attachment #1.1: Type: text/plain, Size: 30571 bytes --]

Hi guys,
I am trying to add networkmanager to my image. However i get the error
message as shown below
DEBUG: Executing shell function autotools_preconfigure
DEBUG: Shell function autotools_preconfigure finished
DEBUG: Executing python function autotools_aclocals
DEBUG: SITE files ['endian-little', 'bit-32', 'arm-common', 'arm-32',
'common-linux', 'common-glibc', 'arm-linux', 'arm-linux-gnueabi', 'common']
DEBUG: Python function autotools_aclocals finished
DEBUG: Executing shell function do_configure
automake (GNU automake) 1.16.1
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later <
https://gnu.org/licenses/gpl-2.0.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Tom Tromey <tromey@redhat.com>
       and Alexandre Duret-Lutz <adl@gnu.org>.
AUTOV is 1.16
NOTE: Executing intltoolize --copy --force --automake
NOTE: Executing ACLOCAL="aclocal
--system-acdir=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot/usr/share/aclocal/
--automake-acdir=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/share/aclocal-1.16"
autoreconf -Wcross --verbose --install --force --exclude=autopoint -I
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/NetworkManager-1.22.16/m4/
-I
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/share/aclocal/
autoreconf: Entering directory `.'
autoreconf: running: aclocal
--system-acdir=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot/usr/share/aclocal/
--automake-acdir=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/share/aclocal-1.16
-I
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/NetworkManager-1.22.16/m4/
-I
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/share/aclocal/
--force
autoreconf: configure.ac: tracing
autoreconf: running: libtoolize --copy --force
libtoolize: putting auxiliary files in AC_CONFIG_AUX_DIR, 'build-aux'.
libtoolize: copying file 'build-aux/ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIRS, 'm4'.
libtoolize: copying file 'm4/libtool.m4'
libtoolize: copying file 'm4/ltoptions.m4'
libtoolize: copying file 'm4/ltsugar.m4'
libtoolize: copying file 'm4/ltversion.m4'
libtoolize: copying file 'm4/lt~obsolete.m4'
libtoolize: Consider adding '-I m4' to ACLOCAL_AMFLAGS in Makefile.am.
autoreconf: running:
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/autoconf
--include=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/NetworkManager-1.22.16/m4/
--include=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/share/aclocal/
--force
autoreconf: running:
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/autoheader
--include=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/NetworkManager-1.22.16/m4/
--include=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/share/aclocal/
--force
autoreconf: running: automake --add-missing --copy --force-missing
configure.ac:29: installing 'build-aux/compile'
configure.ac:24: installing 'build-aux/missing'
Makefile.am: installing 'build-aux/depcomp'
gtk-doc.make:173: warning: $(DOC_MAIN_SGML_FILE) was already defined in
condition BUILD_DOCS, which is included in condition TRUE ...
docs/api/Makefile.am:105:   'gtk-doc.make' included from here
docs/api/Makefile.am:14: ... '$(DOC_MAIN_SGML_FILE)' previously defined here
autoreconf: running: gnu-configize
autoreconf: Leaving directory `.'
NOTE: Running ../NetworkManager-1.22.16/configure  --build=x86_64-linux
 --host=arm-pokymllib32-linux-gnueabi
 --target=arm-pokymllib32-linux-gnueabi  --prefix=/usr  --exec_prefix=/usr
 --bindir=/usr/bin  --sbindir=/usr/sbin  --libexecdir=/usr/libexec
 --datadir=/usr/share  --sysconfdir=/etc  --sharedstatedir=/com
 --localstatedir=/var  --libdir=/usr/lib  --includedir=/usr/include
 --oldincludedir=/usr/include  --infodir=/usr/share/info
 --mandir=/usr/share/man  --disable-silent-rules
 --disable-dependency-tracking
 --with-libtool-sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
--disable-gtk-doc --enable-introspection      --disable-firewalld-zone
--disable-ifcfg-rh     --disable-more-warnings
--with-iptables=/usr/sbin/iptables     --with-tests     --with-nmtui=yes
  --with-udev-dir=/lib/udev  --disable-static  --enable-bluez5-dun
--with-nm-cloud-setup=no --with-dhclient=/sbin/dhclient
--with-dnsmasq=/usr/bin/dnsmasq --enable-ifupdown --with-modem-manager-1=no
--with-crypto=nss --disable-polkit --disable-ppp --disable-qt
 --with-systemdsystemunitdir=/lib/systemd/system
--with-session-tracking=systemd --enable-wifi=yes --enable-nls
configure: loading site script
/home/hp/Yocto-SDK/poky/meta/site/endian-little
configure: loading site script /home/hp/Yocto-SDK/poky/meta/site/arm-common
configure: loading site script /home/hp/Yocto-SDK/poky/meta/site/arm-32
configure: loading site script
/home/hp/Yocto-SDK/poky/meta/site/common-linux
configure: loading site script
/home/hp/Yocto-SDK/poky/meta/site/common-glibc
configure: loading site script /home/hp/Yocto-SDK/poky/meta/site/arm-linux
configure: loading site script /home/hp/Yocto-SDK/poky/meta/site/common
configure: loading site script
/home/hp/Yocto-SDK/meta-openembedded/meta-networking/site/endian-little
configure: loading site script
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot/usr/share/arm-pokymllib32-linux-gnueabi_config_site.d/ncurses_config
checking for a BSD-compatible install...
/home/hp/Yocto-SDK/build/tmp/hosttools/install -c
checking whether build environment is sane... yes
checking for arm-pokymllib32-linux-gnueabi-strip...
arm-pokymllib32-linux-gnueabi-strip
checking for a thread-safe mkdir -p...
/home/hp/Yocto-SDK/build/tmp/hosttools/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether UID '1000' is supported by ustar format... yes
checking whether GID '1000' is supported by ustar format... yes
checking how to create a ustar tar archive... gnutar
checking whether to enable maintainer-specific portions of Makefiles... yes
checking whether make supports nested variables... (cached) yes
checking whether make supports the include directive... yes (GNU style)
checking for arm-pokymllib32-linux-gnueabi-gcc...
arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb -mfpu=neon
-mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat
-Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... yes
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
accepts -g... yes
checking for arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
option to accept ISO C89... none needed
checking whether arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
understands -c and -o together... yes
checking dependency style of arm-pokymllib32-linux-gnueabi-gcc
 -march=armv7-a -mthumb -mfpu=neon -mfloat-abi=hard
-fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security
-Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot...
none
checking how to run the C preprocessor... arm-pokymllib32-linux-gnueabi-gcc
-E
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
 -march=armv7-a -mthumb -mfpu=neon -mfloat-abi=hard
-fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security
-Werror=format-security
checking for grep that handles long lines and -e...
/home/hp/Yocto-SDK/build/tmp/hosttools/grep
checking for egrep... /home/hp/Yocto-SDK/build/tmp/hosttools/grep -E
checking for ANSI C header files... (cached) yes
checking for sys/types.h... (cached) yes
checking for sys/stat.h... (cached) yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking for memory.h... (cached) yes
checking for strings.h... (cached) yes
checking for inttypes.h... (cached) yes
checking for stdint.h... (cached) yes
checking for unistd.h... (cached) yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for arm-pokymllib32-linux-gnueabi-gcc... (cached)
arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb -mfpu=neon
-mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat
-Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
checking whether we are using the GNU C compiler... (cached) yes
checking whether arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
accepts -g... (cached) yes
checking for arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
option to accept ISO C89... (cached) none needed
checking whether arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
understands -c and -o together... (cached) yes
checking dependency style of arm-pokymllib32-linux-gnueabi-gcc
 -march=armv7-a -mthumb -mfpu=neon -mfloat-abi=hard
-fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security
-Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot...
(cached) none
checking whether we are using the GNU C++ compiler... yes
checking whether arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
accepts -g... yes
checking dependency style of arm-pokymllib32-linux-gnueabi-g++
 -march=armv7-a -mthumb -mfpu=neon -mfloat-abi=hard
-fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security
-Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot...
none
checking whether ln -s works... yes
checking for arm-pokymllib32-linux-gnueabi-gcc-ar...
arm-pokymllib32-linux-gnueabi-gcc-ar
checking for arm-pokymllib32-linux-gnueabi-gcc-ranlib...
arm-pokymllib32-linux-gnueabi-gcc-ranlib
checking for arm-pokymllib32-linux-gnueabi-gcc-nm...
arm-pokymllib32-linux-gnueabi-nm
checking build system type... x86_64-pc-linux-gnu
checking host system type... arm-pokymllib32-linux-gnueabi
checking how to print strings... printf
checking for a sed that does not truncate output... (cached) sed
checking for fgrep... /home/hp/Yocto-SDK/build/tmp/hosttools/grep -F
checking for ld used by arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a
-mthumb -mfpu=neon -mfloat-abi=hard -fstack-protector-strong
 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot...
arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot

checking if the linker (arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)...
arm-pokymllib32-linux-gnueabi-nm
checking the name lister (arm-pokymllib32-linux-gnueabi-nm) interface...
BSD nm
checking the maximum length of command line arguments... 1572864
checking how to convert x86_64-pc-linux-gnu file names to
arm-pokymllib32-linux-gnueabi format... func_convert_file_noop
checking how to convert x86_64-pc-linux-gnu file names to toolchain
format... func_convert_file_noop
checking for arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
 option to reload object files... -r
checking for arm-pokymllib32-linux-gnueabi-objdump...
arm-pokymllib32-linux-gnueabi-objdump
checking how to recognize dependent libraries... pass_all
checking for arm-pokymllib32-linux-gnueabi-dlltool... no
checking for dlltool... no
checking how to associate runtime and link libraries... printf %s\n
checking for arm-pokymllib32-linux-gnueabi-ar... (cached)
arm-pokymllib32-linux-gnueabi-gcc-ar
checking for archiver @FILE support... @
checking for arm-pokymllib32-linux-gnueabi-strip... (cached)
arm-pokymllib32-linux-gnueabi-strip
checking for arm-pokymllib32-linux-gnueabi-ranlib... (cached)
arm-pokymllib32-linux-gnueabi-gcc-ranlib
checking command to parse arm-pokymllib32-linux-gnueabi-nm output from
arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb -mfpu=neon
-mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat
-Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
object... ok
checking for sysroot...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
checking for a working dd... /home/hp/Yocto-SDK/build/tmp/hosttools/dd
checking how to truncate binary pipes...
/home/hp/Yocto-SDK/build/tmp/hosttools/dd bs=4096 count=1
checking for arm-pokymllib32-linux-gnueabi-mt... no
checking for mt... no
checking if : is a manifest tool... no
checking for dlfcn.h... yes
checking for objdir... .libs
checking if arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
supports -fno-rtti -fno-exceptions... no
checking for arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
option to produce PIC... -fPIC -DPIC
checking if arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
PIC flag -fPIC -DPIC works... yes
checking if arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
static flag -static works... yes
checking if arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
supports -c -o file.o... yes
checking if arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
supports -c -o file.o... (cached) yes
checking whether the arm-pokymllib32-linux-gnueabi-gcc  -march=armv7-a
-mthumb -mfpu=neon -mfloat-abi=hard -fstack-protector-strong
 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
linker (arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking how to run the C++ preprocessor...
arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a -mthumb -mfpu=neon
-mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat
-Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
-E
checking for ld used by arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a
-mthumb -mfpu=neon -mfloat-abi=hard -fstack-protector-strong
 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot...
arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot

checking if the linker (arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
) is GNU ld... yes
checking whether the arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a
-mthumb -mfpu=neon -mfloat-abi=hard -fstack-protector-strong
 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
linker (arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
) supports shared libraries... yes
checking for arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
option to produce PIC... -fPIC -DPIC
checking if arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
PIC flag -fPIC -DPIC works... yes
checking if arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
static flag -static works... yes
checking if arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
supports -c -o file.o... yes
checking if arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a -mthumb
-mfpu=neon -mfloat-abi=hard -fstack-protector-strong  -D_FORTIFY_SOURCE=2
-Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
supports -c -o file.o... (cached) yes
checking whether the arm-pokymllib32-linux-gnueabi-g++  -march=armv7-a
-mthumb -mfpu=neon -mfloat-abi=hard -fstack-protector-strong
 -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
linker (arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
) supports shared libraries... yes
checking dynamic linker characteristics... (cached) GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking for pid_t... yes
checking size of pid_t... (cached) 4
checking size of uid_t... 4
checking size of gid_t... 4
checking size of dev_t... 8
checking size of ino_t... 4
checking size of time_t... 4
checking size of rlim_t... 4
checking whether explicit_bzero is declared... yes
checking whether reallocarray is declared... yes
checking whether memfd_create is declared... yes
checking sys/auxv.h usability... yes
checking sys/auxv.h presence... yes
checking for sys/auxv.h... yes
checking whether getrandom is declared... yes
checking whether NLS is requested... yes
checking for intltool >= 0.40.0... 0.51.0 found
checking for intltool-update...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/intltool-update
checking for intltool-merge...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/intltool-merge
checking for intltool-extract...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/intltool-extract
checking for xgettext...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/xgettext
checking for msgmerge...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/msgmerge
checking for msgfmt...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/msgfmt
checking for gmsgfmt...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/msgfmt
checking for msgfmt... (cached)
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/msgfmt
checking for gmsgfmt... (cached)
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/msgfmt
checking for xgettext... (cached)
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/xgettext
checking for msgmerge... (cached)
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/msgmerge
checking for ld... arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot

checking if the linker (arm-pokymllib32-linux-gnueabi-ld
--sysroot=/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/lib32-recipe-sysroot
) is GNU ld... yes
checking for shared library run path origin... done
checking 32-bit host C ABI... yes
checking for the common suffixes of directories in the library search
path... lib,lib
checking for CFPreferencesCopyAppValue... no
checking for CFLocaleCopyCurrent... no
checking for GNU gettext in libc... yes
checking whether to use NLS... yes
checking where the gettext function comes from... libc
checking for __secure_getenv... no
checking for secure_getenv... yes
checking whether to build with code coverage support... no
checking for library containing dlopen... -ldl
checking for arm-pokymllib32-linux-gnueabi-pkg-config... no
checking for pkg-config...
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/recipe-sysroot-native/usr/bin/pkg-config
configure: WARNING: using cross tools not prefixed with host triplet
checking pkg-config is at least version 0.9.0... yes
checking for gio-unix-2.0 >= 2.37.6 gmodule-2.0... yes
checking for gobject-introspection... yes
checking for libudev >= 175... yes
checking for QtCore >= 4 QtDBus QtNetwork... no
checking for systemd >= 200... yes
checking for libsystemd >= 209... yes
checking for libsystemd >= 209... yes
checking for libsystemd... yes
checking for libsystemd >= 209... yes
checking for libselinux... no
checking for audit... no
checking for uuid... yes
checking for jansson >= 2.5... yes
checking for arm-pokymllib32-linux-gnueabi-eu-readelf...
arm-pokymllib32-linux-gnueabi-readelf
checking for libteamdctl >= 1.9... no
checking for polkit-agent-1 >= 0.97... no
checking for gnutls >= 2.12... no
checking for nss... yes
checking for pppd... /sbin/pppd
checking for bluez >= 5... yes
checking for dhcpcanon... no
checking for dhclient... /sbin/dhclient
checking for dhcpcd... /sbin/dhcpcd
checking for dnssec-trigger-script... /usr/libexec/dnssec-trigger-script
checking for libpsl >= 0.1... no
checking for libcurl >= 7.24.0... yes
checking for libndp... yes
checking for a readline compatible library... -lreadline
checking readline.h usability... no
checking readline.h presence... no
checking for readline.h... no
checking readline/readline.h usability... yes
checking readline/readline.h presence... yes
checking for readline/readline.h... yes
checking whether readline supports history... yes
checking history.h usability... no
checking history.h presence... no
checking for history.h... no
checking readline/history.h usability... yes
checking readline/history.h presence... yes
checking for readline/history.h... yes

*checking whether readline supports rl_echo_signal_char()... noconfigure:
error: rl_echo_signal_char() is required (install readline6?)*
NOTE: The following config.log files may provide further information.
NOTE:
/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/build/config.log
ERROR: configure failed
WARNING: exit code 1 from a shell command.
ERROR: Execution of
'/home/hp/Yocto-SDK/build/tmp/work/armv7at2hf-neon-pokymllib32-linux-gnueabi/lib32-networkmanager/1.22.16-r0/temp/run.do_configure.367720'
failed with exit code 1

I don't know how to add readline6 to my networkmanager recipe. I have
attached my bb file for your reference. Let me know if I need anything else
to help me in solving this issue.
Do let me know if you have any suggestions.

Thanks and regards,
Hassan

[-- Attachment #1.2: Type: text/html, Size: 32166 bytes --]

[-- Attachment #2: networkmanager_1.22.16.bb --]
[-- Type: application/octet-stream, Size: 6542 bytes --]

SUMMARY = "NetworkManager"
HOMEPAGE = "https://wiki.gnome.org/Projects/NetworkManager"
SECTION = "net/misc"

LICENSE = "GPLv2+ & LGPLv2.1+"
LIC_FILES_CHKSUM = "file://COPYING;md5=b234ee4d69f5fce4486a80fdaf4a4263 \
                    file://COPYING.LGPL;md5=4fbd65380cdd255951079008b364516c \
"

DEPENDS = " \
    intltool-native \
    libxslt-native \
    libnl \
    libgudev \
    util-linux \
    libndp \
    libnewt \
    jansson \
    curl \
    readline \
"

inherit gnomebase gettext update-rc.d systemd bash-completion vala gobject-introspection gtk-doc update-alternatives upstream-version-is-even

SRC_URI = " \
    ${GNOME_MIRROR}/NetworkManager/${@gnome_verdir("${PV}")}/NetworkManager-${PV}.tar.xz \
    file://${BPN}.initd \
    file://0001-Fixed-configure.ac-Fix-pkgconfig-sysroot-locations.patch \
    file://0002-Do-not-create-settings-settings-property-documentati.patch \
"
SRC_URI_append_libc-musl = " \
    file://musl/0001-Fix-build-with-musl-systemd-specific.patch \
    file://musl/0002-Fix-build-with-musl.patch \
    file://musl/0003-Fix-build-with-musl-for-n-dhcp4.patch \
    file://musl/0004-Fix-build-with-musl-systemd-specific.patch \
"
SRC_URI[sha256sum] = "377aa053752eaa304b72c9906f9efcd9fbd5f7f6cb4cd4ad72425a68982cffc6"

S = "${WORKDIR}/NetworkManager-${PV}"

EXTRA_OECONF = " \
    --disable-firewalld-zone \
    --disable-ifcfg-rh \
    --disable-more-warnings \
    --with-iptables=${sbindir}/iptables \
    --with-tests \
    --with-nmtui=yes \
    --with-udev-dir=${nonarch_base_libdir}/udev \
"

# stolen from https://github.com/void-linux/void-packages/blob/master/srcpkgs/NetworkManager/template
# avoids:
# | ../NetworkManager-1.16.0/libnm-core/nm-json.c:106:50: error: 'RTLD_DEEPBIND' undeclared (first use in this function); did you mean 'RTLD_DEFAULT'?
CFLAGS_append_libc-musl = " \
    -DRTLD_DEEPBIND=0 \
"

do_compile_prepend() {
    export GIR_EXTRA_LIBS_PATH="${B}/libnm/.libs:${B}/libnm-glib/.libs:${B}/libnm-util/.libs"
}

PACKAGECONFIG ??= "nss ifupdown dhclient dnsmasq \
    ${@bb.utils.contains('DISTRO_FEATURES', 'systemd', 'systemd', bb.utils.contains('DISTRO_FEATURES', 'x11', 'consolekit', '', d), d)} \
    ${@bb.utils.contains('DISTRO_FEATURES', 'bluetooth', 'bluez5', '', d)} \
    ${@bb.utils.filter('DISTRO_FEATURES', 'wifi polkit', d)} \
"
PACKAGECONFIG[systemd] = " \
    --with-systemdsystemunitdir=${systemd_unitdir}/system --with-session-tracking=systemd, \
    --without-systemdsystemunitdir, \
"
PACKAGECONFIG[polkit] = "--enable-polkit,--disable-polkit,polkit"
PACKAGECONFIG[bluez5] = "--enable-bluez5-dun,--disable-bluez5-dun,bluez5"
# consolekit is not picked by shlibs, so add it to RDEPENDS too
PACKAGECONFIG[consolekit] = "--with-session-tracking=consolekit,,consolekit,consolekit"
PACKAGECONFIG[modemmanager] = "--with-modem-manager-1=yes,--with-modem-manager-1=no,modemmanager"
PACKAGECONFIG[ppp] = "--enable-ppp,--disable-ppp,ppp,ppp"
# Use full featured dhcp client instead of internal one
PACKAGECONFIG[dhclient] = "--with-dhclient=${base_sbindir}/dhclient,,,dhcp-client"
PACKAGECONFIG[dnsmasq] = "--with-dnsmasq=${bindir}/dnsmasq"
PACKAGECONFIG[nss] = "--with-crypto=nss,,nss"
PACKAGECONFIG[resolvconf] = "--with-resolvconf=${base_sbindir}/resolvconf,,,resolvconf"
PACKAGECONFIG[gnutls] = "--with-crypto=gnutls,,gnutls"
PACKAGECONFIG[wifi] = "--enable-wifi=yes,--enable-wifi=no,,wpa-supplicant"
PACKAGECONFIG[ifupdown] = "--enable-ifupdown,--disable-ifupdown"
PACKAGECONFIG[qt4-x11-free] = "--enable-qt,--disable-qt,qt4-x11-free"
PACKAGECONFIG[cloud-setup] = "--with-nm-cloud-setup=yes,--with-nm-cloud-setup=no"

PACKAGES =+ " \
  ${PN}-nmtui ${PN}-nmtui-doc \
  ${PN}-adsl ${PN}-cloud-setup \
"

SYSTEMD_PACKAGES = "${PN} ${PN}-cloud-setup"

FILES_${PN}-adsl = "${libdir}/NetworkManager/${PV}/libnm-device-plugin-adsl.so"

FILES_${PN}-cloud-setup = " \
    ${libexecdir}/nm-cloud-setup \
    ${systemd_system_unitdir}/nm-cloud-setup.service \
    ${systemd_system_unitdir}/nm-cloud-setup.timer \
    ${libdir}/NetworkManager/dispatcher.d/90-nm-cloud-setup.sh \
    ${libdir}/NetworkManager/dispatcher.d/no-wait.d/90-nm-cloud-setup.sh \
"
ALLOW_EMPTY_${PN}-cloud-setup = "1"
SYSTEMD_SERVICE_${PN}-cloud-setup = "${@bb.utils.contains('PACKAGECONFIG', 'cloud-setup', 'nm-cloud-setup.service nm-cloud-setup.timer', '', d)}"

FILES_${PN} += " \
    ${libexecdir} \
    ${libdir}/NetworkManager/${PV}/*.so \
    ${libdir}/NetworkManager \
    ${nonarch_libdir}/NetworkManager/conf.d \
    ${nonarch_libdir}/NetworkManager/dispatcher.d \
    ${nonarch_libdir}/NetworkManager/dispatcher.d/pre-down.d \
    ${nonarch_libdir}/NetworkManager/dispatcher.d/pre-up.d \
    ${nonarch_libdir}/NetworkManager/dispatcher.d/no-wait.d \
    ${nonarch_libdir}/NetworkManager/VPN \
    ${nonarch_libdir}/NetworkManager/system-connections \
    ${datadir}/polkit-1 \
    ${datadir}/dbus-1 \
    ${nonarch_base_libdir}/udev/* \
    ${systemd_system_unitdir} \
    ${libdir}/pppd \
"

RRECOMMENDS_${PN} += "iptables \
    ${@bb.utils.filter('PACKAGECONFIG', 'dnsmasq', d)} \
"
RCONFLICTS_${PN} = "connman"

FILES_${PN}-dev += " \
    ${datadir}/NetworkManager/gdb-cmd \
    ${libdir}/pppd/*/*.la \
    ${libdir}/NetworkManager/*.la \
    ${libdir}/NetworkManager/${PV}/*.la \
"

FILES_${PN}-nmtui = " \
    ${bindir}/nmtui \
    ${bindir}/nmtui-edit \
    ${bindir}/nmtui-connect \
    ${bindir}/nmtui-hostname \
"

FILES_${PN}-nmtui-doc = " \
    ${mandir}/man1/nmtui* \
"

INITSCRIPT_NAME = "network-manager"
SYSTEMD_SERVICE_${PN} = "${@bb.utils.contains('PACKAGECONFIG', 'systemd', 'NetworkManager.service NetworkManager-dispatcher.service', '', d)}"

ALTERNATIVE_PRIORITY = "100"
ALTERNATIVE_${PN} = "${@bb.utils.contains('DISTRO_FEATURES','systemd','resolv-conf','',d)}"
ALTERNATIVE_TARGET[resolv-conf] = "${@bb.utils.contains('DISTRO_FEATURES','systemd','${sysconfdir}/resolv-conf.NetworkManager','',d)}"
ALTERNATIVE_LINK_NAME[resolv-conf] = "${@bb.utils.contains('DISTRO_FEATURES','systemd','${sysconfdir}/resolv.conf','',d)}"

do_install_append() {
    install -Dm 0755 ${WORKDIR}/${BPN}.initd ${D}${sysconfdir}/init.d/network-manager

    rm -rf ${D}/run ${D}${localstatedir}/run

    if ${@bb.utils.contains('DISTRO_FEATURES','systemd','true','false',d)}; then
        # For read-only filesystem, do not create links during bootup
        ln -sf ../run/NetworkManager/resolv.conf ${D}${sysconfdir}/resolv-conf.NetworkManager

        # systemd v210 and newer do not need this rule file
        rm ${D}/${nonarch_base_libdir}/udev/rules.d/84-nm-drivers.rules
    fi
}

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: [yocto] do_configure error while adding networkmanager to image
  2023-07-06  9:02 do_configure error while adding networkmanager to image MOHAMMED HASSAN
@ 2023-07-06  9:29 ` adrian.freihofer
  2023-07-06  9:54   ` MOHAMMED HASSAN
  2023-07-06  9:55   ` MOHAMMED HASSAN
  0 siblings, 2 replies; 7+ messages in thread
From: adrian.freihofer @ 2023-07-06  9:29 UTC (permalink / raw)
  To: MOHAMMED HASSAN, yocto

Hi Hassan

It's a bit hard to guess what you are really doing. The bb is a fork
from a quite old version when it was still using the autotools. Now we
use meson.

The check for rl_echo_signal_char came into NetworkManager 8 years ago
https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/b69143b5085c58e51ab8077ee5cbe6fafe73e041.
It's probably not a change on NetworkManager side which came in
recently with your update to 1.22.16.

Compiling nmcli with readline works with the bb from meta-openembedded
and the poky version with a similar age. That's the default.

Some ideas:
- Try if the original recipe throws the same error
- Pass the readline parameter to autotools (what we do with newer
versions of the recipe and meson)
- Compile without nmcli and remove the readline dependency. Look at the
commit history of the networkmanager.bb. There was an autotools based
recipe which supported compiling without nmcli at some point in time.

Regards,
Adrian


^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: do_configure error while adding networkmanager to image
  2023-07-06  9:29 ` [yocto] " adrian.freihofer
@ 2023-07-06  9:54   ` MOHAMMED HASSAN
  2023-07-06 10:04     ` [yocto] " adrian.freihofer
  2023-07-06  9:55   ` MOHAMMED HASSAN
  1 sibling, 1 reply; 7+ messages in thread
From: MOHAMMED HASSAN @ 2023-07-06  9:54 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 1434 bytes --]

On Thu, Jul 6, 2023 at 02:29 AM, Adrian Freihofer wrote:

> 
> Hi Hassan

Hi Adrian,
Thanks for your reply.

> 
> It's a bit hard to guess what you are really doing. The bb is a fork
> from a quite old version when it was still using the autotools. Now we
> use meson.
> 
> The check for rl_echo_signal_char came into NetworkManager 8 years ago
> https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/b69143b5085c58e51ab8077ee5cbe6fafe73e041
> .
> It's probably not a change on NetworkManager side which came in
> recently with your update to 1.22.16.
> 
> Compiling nmcli with readline works with the bb from meta-openembedded
> and the poky version with a similar age. That's the default.
> 
> Some ideas:
> - Try if the original recipe throws the same error
> - Pass the readline parameter to autotools (what we do with newer
> versions of the recipe and meson)
> - Compile without nmcli and remove the readline dependency. Look at the
> commit history of the networkmanager.bb. There was an autotools based
> recipe which supported compiling without nmcli at some point in time.

Actually I want nmcli recipe in my yocto image file. I am still a beginner with this so i am facing these issues. Alternatively, I was looking at adding wireless-tools to my image file but i dont have its related recipe in my SDK. Do let me know if you have any suggestions.

> 
> Regards,
> Adrian

[-- Attachment #2: Type: text/html, Size: 1693 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: do_configure error while adding networkmanager to image
  2023-07-06  9:29 ` [yocto] " adrian.freihofer
  2023-07-06  9:54   ` MOHAMMED HASSAN
@ 2023-07-06  9:55   ` MOHAMMED HASSAN
  2023-07-06 10:12     ` [yocto] " Anders Montonen
  1 sibling, 1 reply; 7+ messages in thread
From: MOHAMMED HASSAN @ 2023-07-06  9:55 UTC (permalink / raw)
  To: yocto

[-- Attachment #1: Type: text/plain, Size: 1384 bytes --]

On Thu, Jul 6, 2023 at 02:29 AM, Adrian Freihofer wrote:

> 
> Hi Hassan
> 
> It's a bit hard to guess what you are really doing. The bb is a fork
> from a quite old version when it was still using the autotools. Now we
> use meson.
> 
> The check for rl_echo_signal_char came into NetworkManager 8 years ago
> https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/b69143b5085c58e51ab8077ee5cbe6fafe73e041
> .
> It's probably not a change on NetworkManager side which came in
> recently with your update to 1.22.16.
> 
> Compiling nmcli with readline works with the bb from meta-openembedded
> and the poky version with a similar age. That's the default.
> 
> Some ideas:
> - Try if the original recipe throws the same error
> - Pass the readline parameter to autotools (what we do with newer
> versions of the recipe and meson)
> - Compile without nmcli and remove the readline dependency. Look at the
> commit history of the networkmanager.bb. There was an autotools based
> recipe which supported compiling without nmcli at some point in time.

Actually I want nmcli recipe in my yocto image file. I am still a beginner with this so i am facing these issues. Alternatively, I was looking at adding wireless-tools to my image file but i dont have its related recipe in my SDK. Do let me know if you have any suggestions.
Regards,
Hassan

[-- Attachment #2: Type: text/html, Size: 1605 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: [yocto] do_configure error while adding networkmanager to image
  2023-07-06  9:54   ` MOHAMMED HASSAN
@ 2023-07-06 10:04     ` adrian.freihofer
  0 siblings, 0 replies; 7+ messages in thread
From: adrian.freihofer @ 2023-07-06 10:04 UTC (permalink / raw)
  To: MOHAMMED HASSAN, yocto

[-- Attachment #1: Type: text/plain, Size: 2258 bytes --]

On Thu, 2023-07-06 at 02:54 -0700, MOHAMMED HASSAN wrote:
> On Thu, Jul 6, 2023 at 02:29 AM, Adrian Freihofer wrote:
> > Hi Hassan
> Hi Adrian,
> Thanks for your reply.
> > It's a bit hard to guess what you are really doing. The bb is a
> > fork
> > from a quite old version when it was still using the autotools. Now
> > we
> > use meson.
> > 
> > The check for rl_echo_signal_char came into NetworkManager 8 years
> > ago
> > https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/b69143b5085c58e51ab8077ee5cbe6fafe73e041
> > .
> > It's probably not a change on NetworkManager side which came in
> > recently with your update to 1.22.16.
> > 
> > Compiling nmcli with readline works with the bb from meta-
> > openembedded
> > and the poky version with a similar age. That's the default.
> > 
> > Some ideas:
> > - Try if the original recipe throws the same error
> > - Pass the readline parameter to autotools (what we do with newer
> > versions of the recipe and meson)
> > - Compile without nmcli and remove the readline dependency. Look at
> > the
> > commit history of the networkmanager.bb. There was an autotools
> > based
> > recipe which supported compiling without nmcli at some point in
> > time.
> Actually I want nmcli recipe in my yocto image file. I am still a
> beginner with this so i am facing these issues. Alternatively, I was
> looking at adding wireless-tools to my image file but i dont have its
> related recipe in my SDK. Do let me know if you have any suggestions.

Sounds like I cannot provide any hints because with a standard bitbake
environment this should just work. readline should be compiled and
installed automatically. But since you mention SDK I guess you have a
special (and potentially broken) setup.

> > 
> > Regards,
> > Adrian
> 
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#60524):
> https://lists.yoctoproject.org/g/yocto/message/60524
> Mute This Topic: https://lists.yoctoproject.org/mt/99982001/4454582
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe:
> https://lists.yoctoproject.org/g/yocto/unsubÂ [adrian.freihofer@gmail.com
> ]
> -=-=-=-=-=-=-=-=-=-=-=-
> 


[-- Attachment #2: Type: text/html, Size: 3906 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: [yocto] do_configure error while adding networkmanager to image
  2023-07-06  9:55   ` MOHAMMED HASSAN
@ 2023-07-06 10:12     ` Anders Montonen
  2023-07-06 11:49       ` adrian.freihofer
  0 siblings, 1 reply; 7+ messages in thread
From: Anders Montonen @ 2023-07-06 10:12 UTC (permalink / raw)
  To: MOHAMMED HASSAN; +Cc: Yocto-mailing-list

[-- Attachment #1: Type: text/plain, Size: 1646 bytes --]



> On 6 Jul 2023, at 12:55, MOHAMMED HASSAN <hassanchattarki@gmail.com> wrote:
> 
> On Thu, Jul 6, 2023 at 02:29 AM, Adrian Freihofer wrote:
> Hi Hassan
> 
> It's a bit hard to guess what you are really doing. The bb is a fork
> from a quite old version when it was still using the autotools. Now we
> use meson.
> 
> The check for rl_echo_signal_char came into NetworkManager 8 years ago
> https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/b69143b5085c58e51ab8077ee5cbe6fafe73e041 <https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/b69143b5085c58e51ab8077ee5cbe6fafe73e041>.
> It's probably not a change on NetworkManager side which came in
> recently with your update to 1.22.16.
> 
> Compiling nmcli with readline works with the bb from meta-openembedded
> and the poky version with a similar age. That's the default.
> 
> Some ideas:
> - Try if the original recipe throws the same error
> - Pass the readline parameter to autotools (what we do with newer
> versions of the recipe and meson)
> - Compile without nmcli and remove the readline dependency. Look at the
> commit history of the networkmanager.bb. There was an autotools based
> recipe which supported compiling without nmcli at some point in time.
> Actually I want nmcli recipe in my yocto image file. I am still a beginner with this so i am facing these issues. Alternatively, I was looking at adding wireless-tools to my image file but i dont have its related recipe in my SDK. Do let me know if you have any suggestions.

Are you using meta-gplv2? Its version of readline is too old for NetworkManager.

-a

[-- Attachment #2: Type: text/html, Size: 3797 bytes --]

^ permalink raw reply	[flat|nested] 7+ messages in thread
* Re: [yocto] do_configure error while adding networkmanager to image
  2023-07-06 10:12     ` [yocto] " Anders Montonen
@ 2023-07-06 11:49       ` adrian.freihofer
  0 siblings, 0 replies; 7+ messages in thread
From: adrian.freihofer @ 2023-07-06 11:49 UTC (permalink / raw)
  To: Anders.Montonen, MOHAMMED HASSAN; +Cc: Yocto-mailing-list

On Thu, 2023-07-06 at 13:12 +0300, Anders Montonen wrote:
> 
> 
> > On 6 Jul 2023, at 12:55, MOHAMMED HASSAN
> > <hassanchattarki@gmail.com> wrote:
> > 
> > On Thu, Jul 6, 2023 at 02:29 AM, Adrian Freihofer wrote:
> > > Hi Hassan
> > > 
> > > It's a bit hard to guess what you are really doing. The bb is a
> > > fork
> > > from a quite old version when it was still using the autotools.
> > > Now we
> > > use meson.
> > > 
> > > The check for rl_echo_signal_char came into NetworkManager 8
> > > years ago
> > > https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/commit/b69143b5085c58e51ab8077ee5cbe6fafe73e041
> > > .
> > > It's probably not a change on NetworkManager side which came in
> > > recently with your update to 1.22.16.
> > > 
> > > Compiling nmcli with readline works with the bb from meta-
> > > openembedded
> > > and the poky version with a similar age. That's the default.
> > > 
> > > Some ideas:
> > > - Try if the original recipe throws the same error
> > > - Pass the readline parameter to autotools (what we do with newer
> > > versions of the recipe and meson)
> > > - Compile without nmcli and remove the readline dependency. Look
> > > at the
> > > commit history of the networkmanager.bb. There was an autotools
> > > based
> > > recipe which supported compiling without nmcli at some point in
> > > time.
> > Actually I want nmcli recipe in my yocto image file. I am still a
> > beginner with this so i am facing these issues. Alternatively, I
> > was looking at adding wireless-tools to my image file but i dont
> > have its related recipe in my SDK. Do let me know if you have any
> > suggestions.
> 
> Are you using meta-gplv2? Its version of readline is too old for
> NetworkManager.

No, we don't use meta-gplv2.

But we contributed the feature for compiling NetworkManager without
readline to NetworkManager. Recent NetworkManager recipe versions 1.36+
have a packageconfig flag to build it with libedit instead of
libreadline.

Here are all commits:
https://github.com/openembedded/meta-openembedded/commits/master/meta-networking/recipes-connectivity/networkmanager

That's the one which introduces the libedit feature:
https://github.com/openembedded/meta-openembedded/commit/9632eca6d27f29dc229d7a4c6663f97fc036661e

--> Updating at least NetworkManager would help you.

Regards,
Adrian

> 
> -a
> 
> -=-=-=-=-=-=-=-=-=-=-=-
> Links: You receive all messages sent to this group.
> View/Reply Online (#60527):
> https://lists.yoctoproject.org/g/yocto/message/60527
> Mute This Topic: https://lists.yoctoproject.org/mt/99982001/4454582
> Group Owner: yocto+owner@lists.yoctoproject.org
> Unsubscribe:
> https://lists.yoctoproject.org/g/yocto/unsubÂ [adrian.freihofer@gmail.com
> ]
> -=-=-=-=-=-=-=-=-=-=-=-
> 



^ permalink raw reply	[flat|nested] 7+ messages in thread
end of thread, other threads:[~2023-07-06 11:49 UTC | newest]

Thread overview: 7+ messages (download: mbox.gz / follow: Atom feed)
-- links below jump to the message on this page --
2023-07-06  9:02 do_configure error while adding networkmanager to image MOHAMMED HASSAN
2023-07-06  9:29 ` [yocto] " adrian.freihofer
2023-07-06  9:54   ` MOHAMMED HASSAN
2023-07-06 10:04     ` [yocto] " adrian.freihofer
2023-07-06  9:55   ` MOHAMMED HASSAN
2023-07-06 10:12     ` [yocto] " Anders Montonen
2023-07-06 11:49       ` adrian.freihofer

