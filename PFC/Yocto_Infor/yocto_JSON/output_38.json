[
    "* [meta-rockchip][PATCH] bsp: rkbin: fix default COMPATIBLE_MACHINE matching all\n@ 2023-10-16 11:21 Quentin Schulz\n  0 siblings, 0 replies; only message in thread\nFrom: Quentin Schulz @ 2023-10-16 11:21 UTC (permalink / raw)\n  To: twoerner; +Cc: yocto, Quentin Schulz, Quentin Schulz\n\nFrom: Quentin Schulz <quentin.schulz@theobroma-systems.com>\n\nThe goal of the default COMPATIBLE_MACHINE was to not allow\nrockchip-rkbin to be even parsed if a MACHINE isn't part of the\nCOMPATIBLE_MACHINE.\n\nHowever, COMPATIBLE_MACHINE is a regexp checked using Python's re module\napproximately like:\n\"\"\"\nif re.match(COMPATIBLE_MACHINE, MACHINE):\n\treturn True\n\"\"\"\n\nand re.match() returns a match whatever MACHINE is if COMPATIBLE_MACHINE\nis the empty string.\n\nTherefore, let's change it to `^$` which only matches the empty string,\nwhich shouldn't be possible for anything in MACHINEOVERRIDES, and if it\nis there are probably bigger problems than parsing rockchip-rkbin.\n\nFixes: f8af59dd7cd7 (\"rock-5b: add\")\nCc: Quentin Schulz <foss+yocto@0leil.net>\nSigned-off-by: Quentin Schulz <quentin.schulz@theobroma-systems.com>\n---\n recipes-bsp/rkbin/rockchip-rkbin_git.bb | 2 +-\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\ndiff --git a/recipes-bsp/rkbin/rockchip-rkbin_git.bb b/recipes-bsp/rkbin/rockchip-rkbin_git.bb\nindex 7fefb01..f9e680d 100644\n--- a/recipes-bsp/rkbin/rockchip-rkbin_git.bb\n+++ b/recipes-bsp/rkbin/rockchip-rkbin_git.bb\n@@ -12,7 +12,7 @@ inherit bin_package deploy\n \n S = \"${WORKDIR}/git\"\n \n-COMPATIBLE_MACHINE = \"\"\n+COMPATIBLE_MACHINE = \"^$\"\n COMPATIBLE_MACHINE:rk3588s = \"rk3588s\"\n \n PACKAGE_ARCH = \"${MACHINE_ARCH}\"\n-- \n2.41.0\n\n\n\n^ permalink raw reply related\t[flat|nested] only message in thread",
    "only message in thread, other threads:[~2023-10-16 11:21 UTC | newest]\n\nThread overview: (only message) (download: mbox.gz / follow: Atom feed)\n-- links below jump to the message on this page --\n2023-10-16 11:21 [meta-rockchip][PATCH] bsp: rkbin: fix default COMPATIBLE_MACHINE matching all Quentin Schulz\n"
]